diff -ur suse-2.6.22.17-0.1/drivers/xen/Kconfig suse-2.6.22.17-0.1-magrathea/drivers/xen/Kconfig
--- suse-2.6.22.17-0.1/drivers/xen/Kconfig	2008-02-11 03:05:12.000000000 +0100
+++ suse-2.6.22.17-0.1-magrathea/drivers/xen/Kconfig	2008-05-28 14:38:00.000000000 +0200
@@ -249,6 +249,8 @@
 	default 0x030002 if XEN_COMPAT_030002_AND_LATER
 	default 0
 
+source "drivers/xen/magrathea/Kconfig"
+
 endmenu
 
 config HAVE_IRQ_IGNORE_UNHANDLED
diff -ur suse-2.6.22.17-0.1/drivers/xen/Makefile suse-2.6.22.17-0.1-magrathea/drivers/xen/Makefile
--- suse-2.6.22.17-0.1/drivers/xen/Makefile	2008-02-11 03:05:12.000000000 +0100
+++ suse-2.6.22.17-0.1-magrathea/drivers/xen/Makefile	2008-05-28 14:38:00.000000000 +0200
@@ -1,3 +1,4 @@
+obj-y	+= magrathea/
 obj-y	+= core/
 obj-y	+= console/
 obj-y	+= evtchn/
diff -ur suse-2.6.22.17-0.1/include/linux/freezer.h suse-2.6.22.17-0.1-magrathea/include/linux/freezer.h
--- suse-2.6.22.17-0.1/include/linux/freezer.h	2007-07-09 01:32:17.000000000 +0200
+++ suse-2.6.22.17-0.1-magrathea/include/linux/freezer.h	2008-05-28 16:35:24.000000000 +0200
@@ -61,6 +61,8 @@
 extern void refrigerator(void);
 extern int freeze_processes(void);
 extern void thaw_processes(void);
+extern unsigned int try_to_freeze_tasks(int freeze_user_space);
+extern void thaw_tasks(int thaw_user_space);
 
 static inline int try_to_freeze(void)
 {
diff -ur suse-2.6.22.17-0.1/kernel/power/process.c suse-2.6.22.17-0.1-magrathea/kernel/power/process.c
--- suse-2.6.22.17-0.1/kernel/power/process.c	2007-07-09 01:32:17.000000000 +0200
+++ suse-2.6.22.17-0.1-magrathea/kernel/power/process.c	2008-05-28 16:32:47.000000000 +0200
@@ -111,7 +111,7 @@
 	return p->mm && !(p->flags & PF_BORROWED_MM);
 }
 
-static unsigned int try_to_freeze_tasks(int freeze_user_space)
+unsigned int try_to_freeze_tasks(int freeze_user_space)
 {
 	struct task_struct *g, *p;
 	unsigned long end_time;
@@ -201,7 +201,7 @@
 	return 0;
 }
 
-static void thaw_tasks(int thaw_user_space)
+void thaw_tasks(int thaw_user_space)
 {
 	struct task_struct *g, *p;
 
