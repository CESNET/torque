%!PS-Adobe-3.0
%%Creator: groff version 1.11
%%CreationDate: Fri Aug  7 15:36:19 1998
%%DocumentNeededResources: font NewCenturySchlbk-Roman
%%+ font NewCenturySchlbk-Bold
%%+ font NewCenturySchlbk-Italic
%%+ font Helvetica
%%+ font Courier
%%DocumentSuppliedResources: procset grops 1.11 0
%%Pages: 54
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.11 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font NewCenturySchlbk-Roman
%%IncludeResource: font NewCenturySchlbk-Bold
%%IncludeResource: font NewCenturySchlbk-Italic
%%IncludeResource: font Helvetica
%%IncludeResource: font Courier
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Courier@0 ENC0/Courier RE/Helvetica@0 ENC0/Helvetica RE
/NewCenturySchlbk-Italic@0 ENC0/NewCenturySchlbk-Italic RE
/NewCenturySchlbk-Bold@0 ENC0/NewCenturySchlbk-Bold RE
/NewCenturySchlbk-Roman@0 ENC0/NewCenturySchlbk-Roman RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 32/NewCenturySchlbk-Roman@0 SF(P)122.4 158.84 Q(B)133.4 169.84 Q/F1
28/NewCenturySchlbk-Roman@0 SF(Portable Batch System)26.688 -4 M F0(S)
143.4 180.84 Q .4 LW 127.4 192.84 122.4 192.84 DL 130.2 192.84 125.2
192.84 DL 135.2 192.84 130.2 192.84 DL 140.2 192.84 135.2 192.84 DL
145.2 192.84 140.2 192.84 DL 150.2 192.84 145.2 192.84 DL 155.2 192.84
150.2 192.84 DL 160.2 192.84 155.2 192.84 DL 165.2 192.84 160.2 192.84
DL 170.2 192.84 165.2 192.84 DL 175.2 192.84 170.2 192.84 DL 180.2
192.84 175.2 192.84 DL 185.2 192.84 180.2 192.84 DL 190.2 192.84 185.2
192.84 DL 195.2 192.84 190.2 192.84 DL 200.2 192.84 195.2 192.84 DL
205.2 192.84 200.2 192.84 DL 210.2 192.84 205.2 192.84 DL 215.2 192.84
210.2 192.84 DL 220.2 192.84 215.2 192.84 DL 225.2 192.84 220.2 192.84
DL 230.2 192.84 225.2 192.84 DL 235.2 192.84 230.2 192.84 DL 240.2
192.84 235.2 192.84 DL 245.2 192.84 240.2 192.84 DL 250.2 192.84 245.2
192.84 DL 255.2 192.84 250.2 192.84 DL 260.2 192.84 255.2 192.84 DL
265.2 192.84 260.2 192.84 DL 270.2 192.84 265.2 192.84 DL 275.2 192.84
270.2 192.84 DL 280.2 192.84 275.2 192.84 DL 285.2 192.84 280.2 192.84
DL 290.2 192.84 285.2 192.84 DL 295.2 192.84 290.2 192.84 DL 300.2
192.84 295.2 192.84 DL 305.2 192.84 300.2 192.84 DL 310.2 192.84 305.2
192.84 DL 315.2 192.84 310.2 192.84 DL 320.2 192.84 315.2 192.84 DL
325.2 192.84 320.2 192.84 DL 330.2 192.84 325.2 192.84 DL 335.2 192.84
330.2 192.84 DL 340.2 192.84 335.2 192.84 DL 345.2 192.84 340.2 192.84
DL 350.2 192.84 345.2 192.84 DL 355.2 192.84 350.2 192.84 DL 360.2
192.84 355.2 192.84 DL 365.2 192.84 360.2 192.84 DL 370.2 192.84 365.2
192.84 DL 375.2 192.84 370.2 192.84 DL 380.2 192.84 375.2 192.84 DL
385.2 192.84 380.2 192.84 DL 390.2 192.84 385.2 192.84 DL 395.2 192.84
390.2 192.84 DL 400.2 192.84 395.2 192.84 DL 405.2 192.84 400.2 192.84
DL 410.2 192.84 405.2 192.84 DL 415.2 192.84 410.2 192.84 DL 420.2
192.84 415.2 192.84 DL 425.2 192.84 420.2 192.84 DL 430.2 192.84 425.2
192.84 DL 435.2 192.84 430.2 192.84 DL 440.2 192.84 435.2 192.84 DL
445.2 192.84 440.2 192.84 DL 450.2 192.84 445.2 192.84 DL 455.2 192.84
450.2 192.84 DL 460.2 192.84 455.2 192.84 DL 465.2 192.84 460.2 192.84
DL 470.2 192.84 465.2 192.84 DL 475.2 192.84 470.2 192.84 DL/F2 12
/NewCenturySchlbk-Bold@0 SF(Administrator Guide)222.948 276.84 Q/F3 10
/NewCenturySchlbk-Italic@0 SF(Albeaus Bayucan \207)244.21 300.84 Q
(Robert L. Henderson \207)236.71 312.84 Q(Lonhyn T)237.63 324.84 Q 2.78
(.J)-1.11 G(asinskyj \207)-2.78 E(Casimir Lesiak \207)248.935 336.84 Q
(Bhroam Mann \207)250.32 348.84 Q -.89(To)259 360.84 S 2.78(mP).89 G
(roett \207)-2.78 E(Dave T)258.91 372.84 Q(weten)-.89 E/F4 10
/NewCenturySchlbk-Roman@0 SF
(Numerical Aerospace Simulation Systems Division)170.3 390.84 Q
(NASA Ames Research Center)219.485 402.84 Q(Release: 1.1.12)253.54
426.84 Q(Printed: August 7, 1998)232.985 438.84 Q .32 LW 76 696.2 72
696.2 DL 80 696.2 76 696.2 DL 84 696.2 80 696.2 DL 88 696.2 84 696.2 DL
92 696.2 88 696.2 DL 96 696.2 92 696.2 DL 100 696.2 96 696.2 DL 104
696.2 100 696.2 DL 108 696.2 104 696.2 DL 112 696.2 108 696.2 DL 116
696.2 112 696.2 DL 120 696.2 116 696.2 DL 124 696.2 120 696.2 DL 128
696.2 124 696.2 DL 132 696.2 128 696.2 DL 136 696.2 132 696.2 DL 140
696.2 136 696.2 DL 144 696.2 140 696.2 DL/F5 8/NewCenturySchlbk-Roman@0
SF 4.448<874d>82 708 S(RJ T)-4.448 E
(echnology Solutions., NASA Contract NAS 2-14303, Moffett Field, CA)
-.736 E EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 287.91(TOC PBS)72 48 R
(Administrator Guide)2.78 E
(Portable Batch System, Rights to Use and Redistribute)160.48 90 Q 1.162
(This program is con\214dential and proprietary to MRJ T)72 108 R 1.161
(echnology Solutions and may not be)-.92 F(reproduced, published or dis\
closed to others without written authorization from MRJ.)72 120 Q
(Copyright \(c\) 1998 MRJ T)72 144 Q
(echnology Solutions, Inc. All Rights Reserved.)-.92 E .389(This progra\
m is derived from prior work some of which was originally written as a \
joint pro-)72 168 R 1.475(ject between the Numerical Aerospace Simulati\
on \(NAS\) Systems Division of NASA Ames)72 180 R 2.739(Research Center\
 and the National Energy Research Supercomputer Center \(NERSC\) of)72
192 R(Lawrence Livermore National Laboratory)72 204 Q(.)-1.11 E .843(Th\
is product includes software developed by the NetBSD Foundation, Inc. a\
nd its contribu-)72 219.6 R(tors.)72 231.6 Q(PBS Revision History)
237.905 253.2 Q(Revision 1.0)72 274.8 Q(June, 1994 \212 Alpha T)18.69 E
(est Release)-.92 E(Revision 1.1)72 290.4 Q(March 15, 1995)18.69 E(...)
72 306 Q(Revision 1.1.7)72 321.6 Q(June 6, 1996)10.35 E(Revision 1.1.8)
72 337.2 Q(August 19, 1996)10.35 E(Revision 1.1.9)72 352.8 Q
(December 20, 1996)10.35 E(Revision 1.1.10)72 368.4 Q(July 31, 1997)4.79
E(Revision 1.1.1)72 384 Q 5.34(1D)-.55 G(ecember 19, 1997)-5.34 E
(Revision 1.1.12)72 399.6 Q(July 9, 1998)4.79 E(-ii-)72 768 Q EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q(TOC)
290.69 E/F1 12/NewCenturySchlbk-Roman@0 SF -.744(Ta)147 84 S
(ble of Contents).744 E F0(Revision History)147 108 Q 15.92(...........\
.......................................................................\
........ ii)4.58 F(1.)147 120 Q/F2 12/NewCenturySchlbk-Bold@0 SF
(Introduction)2.78 E F0 16.66(.........................................\
............................................ 1)4.36 F(1.2.)147 132 Q F2
(Installation)2.78 E F0 16.66(.........................................\
............................................ 2)3.364 F(1.3.)147 144 Q/F3
10/NewCenturySchlbk-Bold@0 SF(Release Contents)2.78 E F0 16.66(........\
.......................................................................\
 2)3.2 F(1.4.)147 156 Q F3(Build Overview)2.78 E F0 16.66(.............\
..................................................................... 2)
3.38 F(1.5.)147 168 Q F3(Build Details)2.78 E F0 16.66(................\
...................................................................... \
6)5.41 F(1.5.1. Make File T)147 180 Q .18(argets ......................\
........................................................)-.62 F(6)19.44
E(1.5.2. Con\214gure Options)147 192 Q 16.66(..........................\
.................................................... 6)2.92 F(1.6.)147
204 Q F3(Machine Dependent Build Instructions)2.78 E F0 11.1
(...................................... 10)4.23 F(1.6.1. Cray Systems)
147 216 Q 11.1(........................................................\
............................. 10)3.82 F(1.6.2. IBM W)147 228 Q 2.36(ork\
stations ..............................................................\
...............)-.55 F -.55(11)14.43 G(1.6.3. IBM SP)147 240 Q 11.65(..\
.......................................................................\
...................... 1)3.62 F(1)-.55 E(1.6.4. SGI W)147 252 Q
(orkstations Running IRIX 5)-.55 E 11.65
(................................................... 1)3.52 F(1)-.55 E
(1.6.5. SGI W)147 264 Q(orkstations Running IRIX 6)-.55 E 11.1
(................................................... 12)3.52 F
(1.6.6. FreeBSD and NetBSD)147 276 Q 11.1(.............................\
.......................................... 12)3.1 F(1.6.7. Linux)147 288
Q 11.1(................................................................\
.................................. 12)4.35 F(1.6.8. SUN Running SunOS)
147 300 Q 11.1(........................................................\
................ 12)3.1 F(1.7.)147 312 Q F3(Additional Build Options)
2.78 E F0 11.1
(................................................................ 12)
4.26 F(1.7.1. pbs_i\215.h)147 324 Q 11.1(..............................\
................................................................ 12)3.8
F(1.7.2. server_limits.h)147 336 Q 11.1(...............................\
.................................................... 13)3.83 F(1.8.)147
348 Q F3(Site Modi\214able Source Files)2.78 E F0 11.1
(........................................................... 14)3.25 F
(2.)147 360 Q F2(Batch System Con\214guration)2.78 E F0 11.1
(................................................... 16)3.324 F(2.1.)147
372 Q F3(Nodes)2.78 E F0 11.1(.........................................\
.......................................................... 16)5.47 F
(2.1.1. De\214ning Nodes)147 384 Q 11.1(...............................\
................................................... 17)5.31 F
(2.1.2. Where Jobs May Be Run)147 396 Q 11.1
(................................................................... 18)
3.68 F(2.1.3. Specifying Nodes)147 408 Q 11.1(.........................\
...................................................... 19)5.32 F(2.2.)
147 420 Q F3(Network Addresses)2.78 E F0 11.1(.........................\
.................................................. 20)3.38 F(2.3.)147
432 Q F3(Starting Daemons)2.78 E F0 11.1(..............................\
............................................... 20)4.69 F(2.4.)147 444 Q
F3(Con\214guring the Job Server)2.78 E 2.87(,p)-.74 G(bs_server)-2.87 E
F0 11.1(...................................... 21)4.3 F
(2.4.1. Server Con\214guration)147 456 Q 11.1(.........................\
................................................ 21)3.86 F
(2.4.2. Queue Con\214guration)147 468 Q 11.1(..........................\
............................................... 22)4.41 F
(2.4.3. Recording Server Con\214guration)147 480 Q 11.1
(....................................................... 25)4.65 F(2.5.)
147 492 Q F3(Con\214guring the Execution Server)2.78 E 2.87(,p)-.74 G
(bs_mom)-2.87 E F0 11.1(............................. 25)3.22 F(2.6.)147
504 Q F3(Con\214gurating the Scheduler)2.78 E 2.87(,p)-.74 G(bs_sched)
-2.87 E F0 11.1(..................................... 27)3.65 F(2.7.)147
516 Q F3(Alternate T)2.78 E(est Systems)-.92 E F0 11.1(................\
.................................................... 27)4.79 F(2.8.)147
528 Q F3(Installing an Updated Batch System)2.78 E F0 11.1
(............................................ 28)3 F(3.)147 540 Q F2
(Scheduling Policies)2.78 E F0 11.1(...................................\
................................... 29)3.508 F(3.1.)147 552 Q F3
(Scheduler \255 Server Interaction)2.78 E F0 11.1
(..................................................... 30)4.03 F(3.2.)
147 564 Q F3(BaSL Scheduling)2.78 E F0 11.1(...........................\
.................................................... 30)3.75 F(3.3.)147
576 Q F3 -.81(Tc)2.78 G 2.87(lB).81 G(ased Scheduling)-2.87 E F0 11.1(.\
...................................................................... \
31)4.11 F(3.4.)147 588 Q F3 2.87(CB)2.78 G(ased Scheduling)-2.87 E F0
11.1(..................................................................\
........ 32)3.48 F(3.5.)147 600 Q F3 2.87(CB)2.78 G
(ased Sample Schedulers)-2.87 E F0 11.1
(........................................................... 32)4.7 F
(3.5.1. FIFO Scheduler)147 612 Q 11.1(.................................\
................................................ 32)4.76 F(3.6.)147 624
Q F3(Scheduling and File Staging)2.78 E F0 11.1
(.......................................................... 39)4.55 F
(4.)147 636 Q F2(GUI System Administrator Notes)2.78 E F0 11.1
(........................................ 40)4.696 F(4.1. xpbs)147 648 Q
11.1(..................................................................\
..................................... 40)4.9 F(4.2. xpbsmon)147 660 Q
11.1(..................................................................\
.............................. 40)4.36 F(5.)147 672 Q F2
(Operational Issues)2.78 E F0 11.1(....................................\
.................................... 40)3.732 F(5.1.)147 684 Q F3
(Security)2.78 E F0 11.1(..............................................\
................................................. 40)4.36 F
(5.1.1. Internal Security)147 696 Q 11.1(..............................\
................................................. 41)4.77 F
(5.1.2. Host Authentication)147 708 Q 11.1(............................\
.............................................. 41)4.22 F
(5.1.3. Host Authorization)147 720 Q 11.1(.............................\
............................................... 41)3.85 F(TOC)482.33 768
Q EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 287.91(TOC PBS)72 48 R
(Administrator Guide)2.78 E(5.1.4. User Authentication)147 84 Q 11.1(..\
.......................................................................\
. 42)3.85 F(5.1.5. User Authorization)147 96 Q 11.1(...................\
......................................................... 42)3.48 F
(5.1.6. Group Authorization)147 108 Q 11.1(............................\
............................................. 42)4.97 F
(5.1.7. Root Owned Jobs)147 120 Q 11.1(................................\
............................................... 43)4.75 F(5.2.)147 132 Q
/F1 10/NewCenturySchlbk-Bold@0 SF(Job Prologue/Epilogue Scripts)2.78 E
F0 11.1(...................................................... 43)4.27 F
(5.3.)147 144 Q F1(Use and Maintenance of Logs)2.78 E F0 11.1
(........................................................ 44)4.66 F
(5.4.)147 156 Q F1(Problem Solving)2.78 E F0 11.1(.....................\
........................................................... 45)3.94 F
(5.4.1. Clients Unable to Contact Server)147 168 Q 11.1
(..................................................... 45)3.51 F
(5.4.2. Non Delivery of Output)147 180 Q 11.1(.........................\
............................................ 46)3.67 F
(5.4.3. Job Cannot be Executed)147 192 Q 11.1(.........................\
........................................... 46)3.48 F
(5.4.4. Running Jobs with No Active Processes)147 204 Q 11.1
(.......................................... 46)5.02 F(5.5.)147 216 Q F1
(Communication with the User)2.78 E F0 11.1
(....................................................... 46)3.08 F(6.)
147 228 Q/F2 12/NewCenturySchlbk-Bold@0 SF(Advice for Users)2.78 E F0
11.1(..................................................................\
........... 47)4.148 F(6.1.)147 240 Q F1
(Modi\214cation of User shell initialization \214les)2.78 E F0 11.1
(............................. 47)3.9 F(6.2.)147 252 Q F1
(Shell Invocation)2.78 E F0 11.1(......................................\
.......................................... 47)4.87 F(6.3.)147 264 Q F1
(Job Exit Status)2.78 E F0 11.1(.......................................\
........................................... 48)4.96 F(6.4.)147 276 Q F1
(Delivery of Output Files)2.78 E F0 11.1
(.................................................................. 48)
3.61 F(6.5.)147 288 Q F1(Stage in and Stage out problems)2.78 E F0 11.1
(................................................... 49)2.89 F(6.6.)147
300 Q F1(Dependent Jobs and T)2.78 E(est Systems)-.92 E F0 11.1
(................................................ 49)3.36 F(TOC)482.33
768 Q EP
%%Page: 1 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Bold@0 SF(1.)72 84 Q/F1 12
/NewCenturySchlbk-Bold@0 SF(Introduction)5.74 E/F2 10
/NewCenturySchlbk-Roman@0 SF 3.765(This document is intended to provide\
 the system administrator with the information)72 99.6 R .27(required t\
o build, install, con\214gure, and manage the Portable Batch System.)72
111.6 R .27(It is very likely)5.83 F 1.327
(that some important tidbit of information has been left out.)72 123.6 R
1.328(No document of this sort can)6.887 F .391(ever be complete, and u\
ntil it has been updated by several different administrators at differ)
72 135.6 R(-)-.18 E(ent sites, it is sure to be lacking.)72 147.6 Q
-1.11(Yo)72 163.2 S 2.791(ua)1.11 G .012(re strongly encouraged to read\
 the PBS External Reference Speci\214cation, ERS, included)-2.791 F
(with the release.)72 175.2 Q
(Look for pbs_ers.ps in the src/doc directory)5.56 E(.)-1.11 E -1.11(Yo)
72 190.8 S 2.982(um)1.11 G .201
(ay note change marks \(bars\) in the margin of this document.)-2.982 F
.201(They are in the form of a)5.761 F .489(single hex digit number whi\
ch represents the last part of the PBS revision number in which)72 202.8
R 1.625(the change appeared.)72 214.8 R 1.624
(For example "9" indicates release 1.1.9, "0" indicates release 1.1.10)
7.184 F .648(and "2" indicates release 1.1.12.)72 226.8 R .649
(After a few \(unspeci\214ed\) revisions, the older change marks)6.208 F
(will be removed.)72 238.8 Q F0 2.87(1.1. What)72 262.8 R(is PBS)2.87 E
F2 .505(The Portable Batch System, PBS, is a batch job and computer sys\
tem resource management)72 278.4 R 3.538(package. It)72 290.4 R .759(wa\
s developed with the intent to be conformant with the POSIX 1003.2d Bat\
ch)3.538 F 3.584(Environment Standard.)72 302.4 R 3.584
(As such, it will accept batch jobs, a shell script and control)9.144 F
.169(attributes, preserve and protect the job until it is run, run the \
job, and deliver output back to)72 314.4 R(the submitter)72 326.4 Q(.)
-.74 E 1.187(PBS may be installed and con\214gured to support jobs run \
on a single system, or many sys-)72 342 R 1.528(tems grouped together)72
354 R 9.868(.B)-.74 G 1.529
(ecause of the \215exibility of PBS, the systems may be grouped in)
-9.868 F(many fashions.)72 366 Q F0 2.87(1.2. Components)72 390 R
(of PBS)2.87 E F2 1.121
(PBS consist of four major components: commands, the job server)72 405.6
R 3.901(,t)-.74 G 1.12(he job executor)-3.901 F 3.9(,a)-.74 G 1.12
(nd the)-3.9 F .205(job scheduler)72 417.6 R 5.765(.A)-.74 G .205(brief\
 description of each is given here to help you make decisions during th\
e)-2.78 F(installation process.)72 429.6 Q(Commands)72 445.2 Q .5(PBS s\
upplies both command line commands that are POSIX 1003.2d conforming an\
d a)97 457.2 R 1.226(graphical interface.)97 469.2 R 1.227
(These are used to submit, monitor)9.566 F 4.007(,m)-.74 G(odify)-4.007
E 4.007(,a)-1.11 G 1.227(nd delete jobs.)-4.007 F(The)6.787 E 1.211(com\
mands can be installed on any system type supported by PBS and do not r\
equire)97 481.2 R 1.266
(the local presence of any of the other components of PBS.)97 493.2 R
1.267(There are three classi\214ca-)6.827 F .923(tions of commands: use\
r commands which any authorized user can use, operator com-)97 505.2 R
.568(mands, and manager \(or administrator\) commands.)97 517.2 R .568
(Operator and manager commands)6.128 F
(require different access privileges.)97 529.2 Q(Job Server)72 544.8 Q
2.191(The Job Server is the central focus for PBS.)97 556.8 R -.37(Wi)
7.751 G 2.19(thin this document, it is generally).37 F .764
(referred to as)97 568.8 R/F3 10/NewCenturySchlbk-Italic@0 SF .765
(the Server)3.545 F F2 .765(or by the execution name)5.211 F F3
(pbs_server)3.545 E F2 6.325(.A)1.666 G .765(ll commands and the)-6.325
F 1.768(other daemons communicate with the Server via an IP network.)97
580.8 R 1.768(The Server)7.328 F 2.508 -.37('s m).55 H(ain).37 E 1.491(\
function is to provide the basic batch services such as receiving/creat\
ing a batch job,)97 592.8 R .365(modifying the job, protecting the job \
against system crashes, and running the job \(plac-)97 604.8 R
(ing it into execution\).)97 616.8 Q(Job Executor)72 632.4 Q .616(The j\
ob executor is the daemon which actually places the job into execution.)
97 644.4 R .616(This dae-)6.176 F .238(mon is called)97 656.4 R F3(Mom)
3.018 E F2 .237(as it is the mother of all executing jobs, and)4.684 F
F3(pbs_mom)3.017 E F2 5.797(.M)1.666 G .237(om places)-5.797 F 3.908(aj)
97 668.4 S 1.129
(ob into execution when it receives a copy of the job from a Server)
-3.908 F 9.469(.M)-.74 G 1.129(om creates a)-9.469 F .19
(new session as identical to a user login session as is possible.)97
680.4 R .19(For example, if the user)5.75 F -.37('s).55 G 1.008(login s\
hell is csh, then Mom creates a session in which .login is run as well \
as .cshrc.)97 692.4 R .195
(Mom also has the responsibility for returning the job')97 704.4 R 2.974
(so)-.37 G .194(utput to the user when directed)-2.974 F
(to do so by the Server)97 716.4 Q(.)-.74 E(Chapt Revision: 1.173)72 768
Q(1)324.93 E EP
%%Page: 2 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 255.31(Installation PBS)72 48 R
(Administrator Guide)2.78 E(Job Scheduler)72 84 Q .38
(The Job Scheduler is another daemon which contains the site')97 96 R
3.16(sp)-.37 G .38(olicy controlling which)-3.16 F 1.4
(job is run and where and when it is run.)97 108 R 1.399
(Because each site has its own ideas about)6.959 F 1.957
(what is a good or effective policy)97 120 R 4.737(,P)-1.11 G 1.958
(BS allows each site to create its own scheduler)-4.737 F(.)-.74 E 1.135
(When run, the scheduler can communicate with the various Moms to learn\
 about the)97 132 R .783(state of system resources and with the Server \
to learn about the availability of jobs to)97 144 R 6.773(execute. The)
97 156 R 1.212
(interface to the Server is through the same API as the commands.)3.993
F(In)9.552 E
(fact, the Scheduler just appears as a batch Manager to the Server)97
168 Q(.)-.74 E/F1 12/NewCenturySchlbk-Bold@0 SF(Installation)72 195.6 Q
F0 2.159
(This section attempts to explain the steps to build and install PBS.)72
211.2 R 2.16(PBS installation is)7.72 F(2)10 E .197
(accomplished via the GNU autoconf process.)72 223.2 R .196
(This installation procedure requires more man-)5.756 F(2)10 E .614
(ual con\214guration than is `)72 235.2 R(`typical')-.18 E 3.394('f)-.18
G .614(or many packages.)-3.394 F .615
(There are a number of options which)6.174 F(2)10 E
(involve site policy and therefore cannot be determined automagically)72
247.2 Q(.)-1.11 E/F2 10/NewCenturySchlbk-Bold@0 SF 2.87(1.3. Release)72
271.2 R(Contents)2.87 E 2.87(1.3.1. T)72 298.8 R(ar File)-.62 E F0
(PBS is provided as a single tar \214le.)72 314.4 Q
(The tar \214le contains:)5.56 E 21.67(-T)72 330 S
(his document in both postscript and text form.)-21.67 E 21.67(-A)72
345.6 S(ll source code, header \214les, and make \214les required to bu\
ild and install PBS.)-21.67 E 21.67(-A)72 361.2 S
(full set of documentation sources.)-18.89 E
(These are troff input \214les.)5.56 E F2 2.87(1.3.2. Additional)72
388.8 R(Requirements)2.87 E F0 .539(PBS uses a con\214gure script gener\
ated by GNU autoconf to produce make\214les.)72 404.4 R .538
(If you have a)6.098 F .832(POSIX make program then the make\214les gen\
erated by con\214gure will try to take advantage)72 416.4 R .413
(of POSIX make features.)72 428.4 R .413
(If your make is unable to process the make\214les while building you)
5.973 F(may have a broken make.)72 440.4 Q
(Should make fail during the build, try using GNU make.)5.56 E .846
(If the T)72 456 R .846(cl based GUI \(xpbs and xpbsmon\) or the T)-.81
F .847(cl based scheduler is used, the T)-.81 F .847(cl header)-.81 F
.094(and library are required.)72 468 R .093(If the BaSL scheduler is u\
sed, yacc and lex \(or GNU bison and \215ex\))5.654 F(are required.)72
480 Q(Possible sites for T)5.56 E(cl are:)-.81 E
(http://sunscript.sun.com/)108 492 Q(ftp://ftp.smli.com/pub/tcl)108 504
Q(ftp://ftp.sunlabs.com/pub/tcl/)108 516 Q -.92(Ve)108 531.6 S 1.005
(rsions of T).92 F 1.005
(cl previous to 8.0 can no longer be used with PBS.)-.81 F -.81(Tc)6.565
G 3.785(la).81 G 1.005(nd Tk version)-3.785 F(2)10 E
(8.0 or greater must be used.)108 543.6 Q 2.78(Ap)72 559.2 S
(ossible site for yacc and lex is:)-2.78 E(prep.ai.mit.edu:/pub/gnu)108
571.2 Q F2 2.87(1.4. Build)72 595.2 R(Overview)2.87 E F0(2)338.02 E .883
(The normal PBS build procedure is to separate the source from the targ\
et.)72 610.8 R .883(This allows the)6.443 F(2)10 E .112(placement of a \
single copy of the source on a shared \214le system from which multiple\
 different)72 622.8 R(2)10 E .433(target systems can be built.)72 634.8
R .432(Also, the source can be protected from accidental destruction or)
5.992 F(2)10 E 1.09(modi\214cation by making the source read-only)72
646.8 R 6.651(.H)-1.11 G(owever)-6.651 E 3.871(,i)-.74 G 3.871(fy)-3.871
G 1.091(ou choose, objects may be made)-3.871 F(2)10 E
(within the source tree.)72 658.8 Q(2)337.74 E 1.676
(In the following descriptions, the)72 674.4 R/F3 10
/NewCenturySchlbk-Italic@0 SF 1.676(source tree)4.456 F F0 1.676
(is the result of un-tar)6.122 F 1.676(-ing the tar \214le into a)-.18 F
(2)10 E(directory \(and subdirectories\).)72 686.4 Q 2.78(Ad)5.56 G
(iagram of the source tree is show in \214gure 1\2551.)-2.78 E(2)64.82 E
324.93(2C)72 768 S(hapt Revision: 1.173)-324.93 E EP
%%Page: 3 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Installation)258.09 E 243 237.36 3.024 DC .44 LW ST 251.928 237.36
3.024 DC ST 260.496 237.36 3.024 DC ST 192.6 448.752 3.024 DC ST 201.6
448.752 3.024 DC ST 210.096 448.752 3.024 DC ST 547.128 533.352 3.024 DC
ST 556.128 533.352 3.024 DC ST 564.696 533.352 3.024 DC ST 319.464
106.464 22.464 DC ST 175.464 178.464 22.464 DC ST 103.464 236.928 22.464
DC ST 157.464 236.928 22.464 DC ST 211.464 236.928 22.464 DC ST 337.464
236.928 22.464 DC ST 103.464 331.464 22.464 DC ST 247.464 331.464 22.464
DC ST 323.928 349.464 22.464 DC ST 391.464 331.464 22.464 DC ST 184.464
349.464 22.464 DC ST 162 448.896 22.464 DC ST 463.464 408 22.464 DC ST
400.464 534 22.464 DC ST 459 533.568 22.464 DC ST 517.464 534 22.464 DC
ST 94.464 444 22.464 DC ST 193.464 164.928 301.464 115.464 DL 121.464
218.928 153 187.464 DL 161.928 214.464 171 200.928 DL 202.464 214.464
189 196.464 DL 125.928 322.464 315 246 DL 463.464 385.464 359.928 246 DL
391.464 308.928 351 254.928 DL 323.928 326.928 333 259.464 DL 251.928
308.928 328.464 254.928 DL 189 326.928 319.464 250.464 DL 94.464 403.464
99 354 DL 94.464 421.464 94.464 403.464 DL 103.464 403.464 103.464 354
DL 153 430.464 103.464 403.464 DL 459 511.464 463.464 430.464 DL 409.464
516 454.464 430.464 DL 513 511.464 472.464 426 DL 337.464 214.464
319.464 128.928 DL/F1 10/Helvetica@0 SF(pbs)310.824 111.404 Q(doc)
166.464 183.184 Q(admin)89.928 241.648 Q(ers)149.328 240.28 Q(ids)
203.832 241.216 Q(sched*)377.928 336.184 Q(include)89.928 336.184 Q
-2.48(ser v)233.928 336.184 R(er)-.25 E(cmds)315 354.184 Q(log)153
453.184 Q(resmom)444.024 412.648 Q(aix4)391.464 538.648 Q -2.63(ir ix6)
449.928 538.648 R(unicos8)502.128 537.784 Q(lib)179.064 351.448 Q(src)
331.2 239.416 Q(net)85.464 448.648 Q/F2 10/NewCenturySchlbk-Bold@0 SF
(Figure 1\2551: Source T)199.715 580.464 Q(ree Structure)-.62 E F0(The)
72 604.464 Q/F3 10/NewCenturySchlbk-Italic@0 SF .829(target tree)3.609 F
F0 .83(is a set of parallel directories in which the object modules are\
 actually com-)5.275 F 2.78(piled. This)72 616.464 R
(tree may be separate from the source tree.)2.78 E .508
(An overview of the installation steps is listed here.)72 632.064 R .508
(Detailed explanation of symbols will fol-)6.068 F(2)10 E(low)72 644.064
Q 5.585(.I)-.92 G 2.805(ti)-5.585 G 2.806(sr)-2.805 G .026(ecommended t\
hat you read completely through these instructions before beginning)
-2.806 F(2)10 E(the installation.)72 656.064 Q 1.84 -.92(To i)5.56 H
(nstall PBS:).92 E(2)293.61 E 13.88(1. Place)72 671.664 R(the tar \214l\
e on the system where you would like to maintain the source.)2.78 E(2)
63.06 E 13.88(2. Untar)72 687.264 R .12(the tar \214le.)2.9 F .12(It wi\
ll untar in the current directory producing several \214les and sub-)
5.68 F(2)10 E 3.246(directories. This)97 699.264 R .466(is the)3.246 F
F3 .466(source tree)3.246 F F0 6.026(.Y)1.666 G .466
(ou may write protect the source tree at this point)-7.136 F(2)10 E
(should you so choose.)97 711.264 Q(2)318.85 E(Chapt Revision: 1.173)72
768 Q(3)324.93 E EP
%%Page: 4 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 255.31(Installation PBS)72 48 R
(Administrator Guide)2.78 E 3.494
(In the top directory are two \214les, named "How_to_Install" and "INST)
97 84 R 6.273(ALL". The)-.55 F(2)10 E .547("How_to_Install" \214le is a\
ctually a set of release notes containing information about the)97 96 R
(2)10 E 5.437(release contents and pointing to this guide for installat\
ion instructions.)97 108 R 7.22(The 2)10.997 F("INST)97 120 Q
(ALL" \214le consists of standard notes about the use of GNU')-.55 E
2.78(sc)-.37 G 64.36(on\214gure. 2)-2.78 F 13.88(3. If)72 135.6 R .459(\
you choose to have separate build and src trees create the top level di\
rectory of what)3.239 F(2)10 E 1.408(will become the)97 147.6 R/F1 10
/NewCenturySchlbk-Italic@0 SF 1.407(target tree)4.187 F F0 1.407
(at this time.)5.853 F 1.407(This need not be within the source tree.)
6.967 F 7.22(It 2)6.967 F .031(must reside on a system of the same arch\
itecture as the target system for which you are)97 159.6 R(2)10 E .438
(generating the PBS binaries.)97 171.6 R .437
(This may well be the same system as holds the source or)5.998 F(2)10 E
(it may not.)97 183.6 Q
(Change directories to the top of the target tree.)5.56 E(2)143.64 E
13.88(4. Make)72 199.2 R 3.092(aj)3.092 G .313(ob scheduler choice.)
-3.092 F 3.093(Au)5.873 G .313
(nique feature of PBS is its external scheduler module.)-3.093 F(2)10 E
.451(This allows a site to implement any policy of its choice.)97 211.2
R 2.29 -.92(To p)8.79 H .45(rovide even more freedom).92 F(2)10 E .401
(in implementing policy)97 223.2 R 3.181(,P)-1.11 G .401
(BS provides three scheduler frameworks.)-3.181 F .401
(Schedulers may be)8.741 F(2)10 E .502
(developed in the C language, the T)97 235.2 R .501
(cl scripting language, or PBS')-.81 F 3.281(sv)-.37 G .501
(ery own C language)-3.281 F(2)10 E(extensions, the)97 247.2 Q/F2 10
/NewCenturySchlbk-Bold@0 SF(Ba)2.78 E F0(tch)A F2(S)2.78 E F0(cheduling)
A F2(L)2.78 E F0(anguage, or BaSL.)A(2)166.42 E 1.247(As distributed,)97
262.8 R F1(con\214gure)4.027 E F0 1.248
(will default to a C language based scheduler known as)5.693 F F1
(\214fo)4.028 E F0 10(.2)1.666 G .258(This scheduler can be con\214gure\
d to several common simple scheduling policies, not just)97 274.8 R(2)10
E .418(\214rst in \255 \214rst out as the name suggests..)97 286.8 R
.419(When this scheduler is installed, certain con-)5.979 F(2)10 E .199
(\214guration \214les are installed in PBS_HOME/scheduler_priv/.)97
298.8 R F2 -1.11(Yo)5.759 G 3.069(uw)1.11 G .199(ill need to modify)
-3.069 F F0(2)10 E F2 1.382(these \214les for your site.)97 310.8 R F0
1.382(These \214les are discussed in chapter 4.5 `)6.942 F 1.383
(`C based Sample)-.18 F(2)10 E -2.23(Scheduler ')97 322.8 R
(', in the section `)-.18 E(`FIFO Scheduler)-.18 E -.18('').55 G 210.49
(.2).18 G 4.716 -.92(To c)97 338.4 T 2.876(hange the selected scheduler)
.92 F 5.656(,s)-.74 G 2.875(ee the con\214gure options)-5.656 F F2
(--set-sched)5.655 E F0(and)5.655 E F2(--set-)5.655 E F0(2)10 E F2
(sched-code)97 350.4 Q F0 1.305
(in the Features and Package Options section of this chapter)4.084 F
6.865(.A)-.74 G 7.22(dditional 2)-6.865 F 1.837(information on the type\
s of scheduler and how to con\214gure \214fo can be found in the)97
362.4 R(2)10 E(Scheduling Policies chapter later in this guide.)97 374.4
Q(2)201.24 E 13.88(5. From)72 390 R
(within the top of the target tree, type the following command)2.78 E(2)
107.34 E/F3 10/Courier@0 SF({source_tree}/configure [options])133 402 Q
F0(2)183 E(Where)97 414 Q F3({source_tree})4.069 E F0 1.289
(is the full relative or absolute path to the con\214gure script in)
4.069 F(2)10 E .038
(the source tree. If you are building in the source tree type)97 426 R
F3(./configure)2.818 E F0 .038(at the top level)2.818 F(2)10 E
(of the source tree where the con\214gure script is found.)97 438 Q(2)
171.65 E .389(This will generate the complete target tree and a set of \
header \214les and make\214les used)97 453.6 R(2)10 E .735
(to build PBS.)97 465.6 R F1(Note,)6.295 E F0 .734
(unlike in prior versions of PBS, the top two subdirectories will be)
5.181 F(2)10 E F3(doc)97 477.6 Q F0(and)2.83 E F3(src)2.83 E F0 .05
(rather than)2.83 F F3(doc)2.83 E F0(and)2.83 E F3(obj)2.83 E F0 2.83
(;t)C .05(his is a result of the one-for)-2.83 F .05
(-one copy of the tree)-.18 F(2)10 E .054(made by con\214gure.)97 489.6
R .053
(This step will only need to be redone if you choose to change options)
5.613 F(2)10 E .166(speci\214ed on the con\214gure command line.)97
501.6 R .167(See section)5.727 F F2 .167(2.3 Build Details)2.947 F F0
.167(for information)2.947 F(2)10 E(on the con\214gure options.)97 513.6
Q F2(There are certain options which you must specify)5.56 E F0 38.02
(.2)C 1.365(Because the number of options may be large and each option \
is very wordy you may)97 529.2 R(2)10 E 2.446(wish to create a shell sc\
ript consisting of the con\214gure command and the selected)97 541.2 R
(2)10 E 377.92(options. 2)97 553.2 R 13.88(6. The)72 568.8 R
(next step is to compile PBS by typing)2.78 E(2)224.56 E F3(make)133
580.8 Q F0(2)357 E(from the top of the target tree.)97 592.8 Q(2)276.44
E 13.88(7. The)72 608.4 R 1.887
(documentation is not generated by default.)4.667 F -1.11(Yo)7.447 G
4.667(um)1.11 G 1.887(ay make it by specifying the)-4.667 F(2)10 E F3
(--enable-docs)97 620.4 Q F0 .036
(option to con\214gure or by changing into the)2.816 F F1(doc)2.817 E F0
.037(subdirectory in the tar)4.483 F 10(-2)-.18 G
(get tree and typing make.)97 632.4 Q(2)298.09 E 1.407(In order to buil\
d and print PostScript copies of the documentation from the included)97
648 R(2)10 E 1.042
(source, you will need the GNU groff formating package including the `)
97 660 R(`ms')-.18 E 3.823('f)-.18 G 7.22(ormatting 2)-3.823 F .231
(macro package.)97 672 R -1.11(Yo)5.791 G 3.011(um)1.11 G .231
(ay choose to print using different font sets.)-3.011 F .23
(In the source tree is)8.57 F(2)10 E 3.142<618c>97 684 S .362(le `)
-3.142 F(`doc/doc_fonts')-.18 E 3.142('w)-.18 G .362
(hich may require editing.)-3.142 F .363
(Please read the comments in that \214le.)5.922 F(2)10 E
(Note that font position 4 is left with the symbol font mounted.)97 696
Q(2)130.84 E 13.88(8. T)72 711.6 R 2.78(oi)-.92 G
(nstall PBS you must be running with root privileges.)-2.78 E
(As root, type)5.56 E(2)92.32 E F3(make install)133 723.6 Q F0(2)309 E
324.93(4C)72 768 S(hapt Revision: 1.173)-324.93 E EP
%%Page: 5 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Installation)258.09 E .686(This generates the working directory struct\
ures required for running PBS and installs)97 84 R(2)10 E 1.591
(the programs in the proper executable directories.)97 96 R -1.11(Yo)
7.152 G 4.372(um)1.11 G 1.592(ust be root to perform this)-4.372 F(2)10
E 392.18(step. 2)97 108 R 1.437(When the directories are made, they are\
 also checked to ensure that they have been)97 123.6 R(2)10 E 1.724
(setup with the correct ownership and permissions.)97 135.6 R 1.724
(This is performed to insure that)7.284 F(2)10 E .613
(\214les are not tampered with and the security of PBS compromised.)97
147.6 R .612(Part of the check is)6.172 F(2)10 E
(to insure that all parent directories and all \214les are:)97 159.6 Q
(2)176.78 E 11.67(-o)97 175.2 S
(wned by root \(bin, sys, or any uid < 10\),)-11.67 E/F1 10
/NewCenturySchlbk-Bold@0 SF(EPERM)2.78 E F0(returned if not;)2.78 E(2)
98.14 E 11.67(-t)97 190.8 S(hat group ownership is by a gid < 10,)-11.67
E F1(EPERM)2.78 E F0(returned if not;)2.78 E(2)110.36 E 11.67(-t)97
206.4 S 1.062(hat the directories are not world writable, or where requ\
ired to be world writable)-11.67 F(2)10 E(that the sticky bit is set,)
112 218.4 Q F1(EACCESS)2.78 E F0(returned if not; and)2.78 E(2)141.59 E
11.67(-t)97 234 S
(hat the \214le or directory is indeed a \214le or directory)-11.67 E(,)
-1.11 E F1(ENOTDIR)2.78 E F0(returned if not.)2.78 E(2)35.16 E(The vari\
ous PBS daemons will also perform similar checks when they are started.)
97 249.6 Q(2)38.25 E 13.88(9. The)72 265.2 R .864
(three daemons, pbs_server)3.644 F 3.644(,p)-.74 G .864
(bs_sched and pbs_mom must be run by root in order)-3.644 F(2)10 E .348
(to function.)97 277.2 R -.52(Ty)5.908 G .349
(pically they should be started at system boot time.).52 F 2.189 -.92
(To h)5.909 H .349(ave a fully func-).92 F(2)10 E .06(tional system, ea\
ch of the daemons will require certain con\214guration information.)97
289.2 R 7.22(This 2)8.4 F(is explained in detail in this guide in)97
301.2 Q F1(chapter 2. Batch System Con\214guration)2.78 E F0 40.84(.2)C
.746(Note that not all three daemons must be or even should be present \
on all systems.)97 316.8 R 7.22(In 2)6.307 F .036
(the case of a large system, all three may be present.)97 328.8 R .036
(In the case of a cluster of worksta-)8.376 F(2)10 E .838(tions, you ma\
y have the server \(pbs_server\) and the scheduler \(pbs_sched\) on one\
 sys-)97 340.8 R(2)10 E .713(tem only and a copy of Mom \(pbs_mom\) on \
each node where jobs may be executed.)97 352.8 R 7.22(At 2)6.273 F .966
(this point, it is assumed that you plan to have all three daemons runn\
ing on one sys-)97 364.8 R(2)10 E 393.66(tem. 2)97 376.8 R(A.)97 392.4 Q
F1 .063(One time only)15 F F0 2.843(,s)C .063
(tart pbs_server with the "-t create" option.)-2.843 F .063
(See the ERS for com-)5.623 F(2)10 E .315(mand details.)122 404.4 R .316
(This option causes the server to initialize various \214les.)5.875 F
.316(This option)5.876 F(2)10 E 2.892(will not be required after the \
\214rst time unless you wish to clear the server)122 416.4 R(2)10 E .301
(database and start over)122 428.4 R 5.861(.S)-.74 G .302
(ee the pbs_server\(8\) man page for more information.)-5.861 F 10(A2)
5.862 G .033(copy of the section 8 man pages can be found in the Extern\
al Reference Spec, ERS.)122 440.4 R(2)10 E 1.033
(For man pages on pbs_server and pbs_mom, see ERS chapter 6.)122 452.4 R
1.033(For man pages)6.593 F(2)10 E(on the scheduler)122 464.4 Q 2.78(,s)
-.74 G(ee ERS chapter 7.)-2.78 E(2)223.66 E 12.22(B. Start)97 480 R
2.753(the execution server)5.533 F 5.533(,p)-.74 G 5.533(bs_mom. No)
-5.533 F 2.753(options or arguments are required.)5.533 F(2)10 E .504(M\
om will look for a con\214guration \214le in PBS_HOME/mom_priv/con\214g\
.)122 492 R .505(If it is not)6.064 F(2)10 E .921(found, Mom will conti\
nue to function, but certain requests may be made of Mom)122 504 R(2)10
E .008(from the local system only)122 516 R 5.568(.S)-1.11 G .009
(ee the pbs_mom\(8\) man page for more information on)-5.568 F(2)10 E
(the con\214g \214le.)122 528 Q(2)327.37 E 12.22(C. Start)97 543.6 R
(the selected job scheduler)2.78 E 2.78(,p)-.74 G 189.58(bs_sched. 2)
-2.78 F 13.88(a. For)122 559.2 R 4.919(Cl)4.919 G 2.138
(anguage based schedulers, such as the default, see the man page)-4.919
F(2)10 E(pbs_sched_cc\(8\) for more detail.)147 571.2 Q(2)220.34 E 13.88
(b. For)122 586.8 R 2.182(the BaSL scheduler)4.962 F 4.963(,t)-.74 G
2.183(he scheduling policy is written in a specialized)-4.963 F(2)10 E
.145(batch scheduling language that is similar to C. The scheduling cod\
e, contain-)147 598.8 R(2)10 E .519
(ing BaSL constructs, must \214rst be converted into C using the)147
610.8 R F1(basl2c)3.3 E F0(utility)3.3 E 10(.2)-1.11 G .131
(This is done by setting the con\214gure option)147 622.8 R F1
(--set-sched-code=\214le)2.91 E F0(where)2.91 E/F2 10
/NewCenturySchlbk-Italic@0 SF(\214le)2.91 E F0(2)11.666 E 3.065
(is the relative \(to src/scheduler)147 634.8 R 3.065
(.basl/samples\) or absolute path of a basl)-.74 F(2)10 E
(source \214le.)147 646.8 Q(The \214le name should end in)5.56 E/F3 10
/Courier@0 SF(.basl)2.78 E F0 148.09(.2)C .503(The scheduler con\214gur\
ation \214le is an important entity in BaSL because it is)147 662.4 R(2)
10 E .998(where the list of servers and host resources reside.)147 674.4
R .999(Execute the basl based)6.559 F(2)10 E(scheduler by typing:)147
686.4 Q(2)273.48 E F3(pbs_sched -c config_file)183 698.4 Q F0(2)187 E
22.43(The scheduler searches for the con\214g \214le in)147 710.4 R(2)10
E(PBS_SER)147 722.4 Q(VER_HOME)-.37 E F2(/sched_priv)A F0 4.263
(by default.)7.043 F 4.264(More information can be)9.823 F(2)10 E
(Chapt Revision: 1.173)72 768 Q(5)324.93 E EP
%%Page: 6 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 255.31(Installation PBS)72 48 R
(Administrator Guide)2.78 E(found in the man page pbs_sched_basl\(8\).)
147 84 Q(2)174.57 E 15(c. The)122 99.6 R -.81(Tc)2.994 G 2.994(ls).81 G
.214(cheduler requires the T)-2.994 F .213(cl code policy module.)-.81 F
.213(Samples of T)5.773 F .213(cl scripts)-.81 F(2)10 E(may be found in)
147 111.6 Q/F1 10/NewCenturySchlbk-Italic@0 SF(src/scheduler)2.78 E
(.tcl/sample_scripts)-1.29 E F0(2)139.94 E 4.11(For the T)147 127.2 R
4.111(cl based scheduler)-.81 F 6.891(,t)-.74 G 4.111(he T)-6.891 F
4.111(cl body script should be placed in)-.81 F(2)10 E(PBS_HOME)147
139.2 Q/F2 10/Courier@0 SF(/sched_priv/)A F1(some_\214le)A F0
(and the Scheduler run via)2.78 E(2)72.05 E F2
(pbs_sched -b PBS_HOME/sched_priv/some_file)183 151.2 Q F0(2)79 E
(More information can be found in the man page pbs_sched_tcl\(8\).)147
163.2 Q(2)65.69 E 8.32(10. Log)72 178.8 R(onto the system as root and d\
e\214ne yourself to pbs_server as a manager by typing:)2.78 E(2)21.21 E
(#)133 190.8 Q F2(qmgr)6 E F0(2)345.44 E(Qmgr:)133 202.8 Q F2
(set server managers=your_name@your_host)6 E F0(2)111.74 E .032
(From this point, you no longer need root privilege.)97 214.8 R .032
(Note, "your_host" can be any host on)5.592 F(2)10 E .933
(which PBS' qmgr command is installed.)97 226.8 R -1.11(Yo)6.493 G 3.713
(uc)1.11 G .933(an now con\214gure and manage a remote)-3.713 F(2)10 E
(batch system from the comfort of your own workstation.)97 238.8 Q(2)
158.84 E 1.842(Now you need to de\214ne at least one queue.)97 254.4 R
-.52(Ty)7.402 G 1.842(pically it will be an execution queue).52 F(2)10 E
.215(unless you are using this server purely as a gateway)97 266.4 R
5.775(.Y)-1.11 G .216(ou may chose to establish queue)-6.885 F(2)10 E
1.012
(minimum, maximum, and/or default resource limits for some resources.)97
278.4 R 1.012(For example,)6.572 F(2)10 E 1.082(to establish a minimum \
of 1 second, a maximum of 12 cpu hours, and a default of 30)97 290.4 R
(2)10 E(cpu minutes on a queue named `)97 302.4 Q(`qname')-.18 E
('; issue the following commands inside of qmgr:)-.18 E(2)16.37 E(Qmgr:)
133 314.4 Q F2(create queue qname queue_type=e)6 E F0(2)159.74 E(Qmgr:)
133 326.4 Q F2 6(sqq)6 G
(name resources_min.cput=1,resources_max.cput=12:00:00)-6 E F0(2)A
(Qmgr:)133 338.4 Q F2 6(sqq)6 G(name resources_default.cput=30:00)-6 E
F0(2)117.74 E(Qmgr:)133 350.4 Q F2 6(sqq)6 G(name enabled=true)-6 E F0
(2)213.74 E(Lastly)97 362.4 Q 2.78(,a)-1.11 G
(llow the the scheduling of jobs by pbs_sched by issuing:)-2.78 E(2)
122.69 E(Qmgr:)133 374.4 Q F2 6(sss)6 G(cheduling=true)-6 E F0(2)231.74
E .329(When the attribute)97 398.4 R/F3 10/NewCenturySchlbk-Bold@0 SF
(scheduling)3.109 E F0 .329
(is set to true, the server will call the the job scheduler)3.109 F 10
(,2)-.74 G .087(if false the job scheduler is not called.)97 410.4 R
.088(The value of)5.647 F F3(scheduling)2.868 E F0 .088
(may be speci\214ed on the)2.868 F(2)10 E
(pbs_server command line with the \255a option.)97 422.4 Q(2)209.25 E F3
2.87(1.5. Build)72 446.4 R(Details)2.87 E F0(2)351.17 E .315(While the \
overview gives suf\214cient information to build a basic PBS system, th\
ere are lots of)72 462 R(2)10 E
(options available to you and custom tailoring that should be done.)72
474 Q(2)137.68 E F3 2.87(1.5.1. Make)72 498 R(File T)2.87 E(argets)-.62
E F0(2)317.44 E(The follow target names are applicable for make:)72
513.6 Q(2)216.03 E 40.36(all The)72 529.2 R
(default target, it compiles everything.)2.78 E(2)191.98 E 28.51
(build Same)72 544.8 R(as all.)2.78 E(2)330.86 E 18.89(depend Builds)72
560.4 R(the header \214le dependency rules.)2.78 E(2)201.63 E 22.58
(install Installs)72 576 R 293.66(everything. 2)2.78 F 27.96
(clean Removes)72 591.6 R
(all object and executable program \214les in the current subtree.)2.78
E(2)58.46 E 10.55(distclean Leaves)72 607.2 R .775
(the object tree very clean.)3.555 F .775
(It will remove all \214les that were created dur)6.335 F 10(-2)-.18 G
(ing a build.)127 619.2 Q(2)334.76 E F3 2.87(1.5.2. Con\214gure)72 646.8
R(Options)2.87 E F0(2)315.43 E(The following is detailed information on\
 the options to the con\214gure script.)72 662.4 Q(2)96.79 E F3 2.87
(1.5.2.1. Generic)72 686.4 R(Con\214gure Options)2.87 E F0(2)262.93 E
(The following are generic con\214gure options that do not effect PBS.)
72 702 Q(2)136.62 E(--cache-\214le=)72 717.6 Q F2(file)A F0(2)362.14 E
(Cache the system con\214guration test results in)97 729.6 Q F2(file)
2.78 E F0 175.21(.2)C 324.93(6C)72 768 S(hapt Revision: 1.173)-324.93 E
EP
%%Page: 7 11
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Installation)258.09 E(Default: con\214g.cache)97 84 Q(2)321.26 E 412.56
(--help 2)72 99.6 R(Prints out information on the available options.)97
111.6 Q(2)197.33 E 389.79(--no-create 2)72 127.2 R
(Do not create output \214les.)97 139.2 Q(2)297.36 E(--quiet, --silent)
72 154.8 Q(2)373.48 E(Do not print `)97 166.8 Q(`checking')-.18 E 2.78
('m)-.18 G 257.15(essages. 2)-2.78 F 398.86(--version 2)72 182.4 R
(Print the version of autoconf that created con\214gure.)97 194.4 Q(2)
177.93 E 336.64(--enable-depend-cache 2)72 210 R .091
(This turns on con\214gure')97 222 R 2.871(sa)-.37 G .09
(bility to cache)-2.871 F/F1 10/NewCenturySchlbk-Italic@0 SF(makedepend)
2.87 E F0 .09(information across runs of con\214g-)4.536 F(2)10 E 3.146
(ure. This)97 234 R .366(can be bad if the user makes certain con\214gu\
ration changes in rerunning con-)3.146 F(2)10 E
(\214gure, but it can save time in the hands of experienced developers.)
97 246 Q(2)108.83 E(Default: disabled)97 258 Q(2)338.09 E/F2 10
/NewCenturySchlbk-Bold@0 SF 2.87(1.5.2.2. Directory)72 285.6 R
(and File Names)2.87 E F0(2)268.76 E
(These options specify where PBS objects will be placed.)72 301.2 Q(2)
186.97 E(--pre\214x=)72 316.8 Q/F3 10/Courier@0 SF(PREFIX)A F0(2)366.62
E(Install \214les in subdirectories of)97 328.8 Q F3(PREFIX)2.78 E F0
(directory)2.78 E 188.96(.2)-1.11 G(Default: /usr/local)97 340.8 Q(2)
334.58 E(--exec-pre\214x=)72 356.4 Q F3(EPREFIX)A F0(2)337.48 E
(Install architecture dependent \214les in subdirectories of)97 368.4 Q
F3(EPREFIX)2.78 E F0 115.74(.2)C(Default: see PREFIX)97 380.4 Q(2)320.32
E(--bindir=)72 396 Q F3(DIR)A F0(2)383.13 E
(Install user executables \(commands\) in subdirectory)97 408 Q F3(DIR)
2.78 E F0 152.14(.2)C(Default: EPREFIX/bin)97 420 Q 235.49
(\(/usr/local/bin\) 2)8.34 F(--sbindir=)72 435.6 Q F3(DIR)A F0(2)378.5 E
1.717(Install System Administrator executables in subdirectory)97 447.6
R F3(DIR)4.497 E F0 7.276(.T)C 1.716(his includes certain)-7.276 F(2)10
E(administrative commands and the daemons.)97 459.6 Q(2)211.97 E
(Default: EPREFIX/sbin)97 471.6 Q 226.23(\(/usr/local/sbin\) 2)8.34 F
(--libdir=)72 487.2 Q F3(DIR)A F0(2)386.09 E
(Object code libraries are placed in)97 499.2 Q F3(DIR)2.78 E F0 5.56
(.T)C(his includes the PBS API library)-5.56 E 2.78(,l)-1.11 G 27.45
(ibpbs.a. 2)-2.78 F(Default: PREFIX/lib)97 511.2 Q 248.63
(\(/usr/local/lib\) 2)8.34 F(--includedir=)72 526.8 Q F3(DIR)A F0(2)
364.25 E 2.78(Cl)97 538.8 S(anguage header \214les are installed in)
-2.78 E F3(DIR)2.78 E F0 211.93(.2)C(Default: PREFIX/include)97 550.8 Q
204.95(\(/usr/local/include\) 2)8.34 F(--mandir=)72 566.4 Q F3(DIR)A F0
(2)377.39 E(Install man pages in)97 578.4 Q F3(DIR)2.78 E F0 298.42(.2)C
(Default: PREFIX/man)97 590.4 Q 231.23(\(/usr/local/man\) 2)8.34 F
(--srcdir=)72 606 Q F3(SOURCE_TREE)A F0(2)336.44 E
(PBS sources can be found in directory)97 618 Q F3(SOURCE_TREE)2.78 E F0
170.63(.2)C(Default: location of)97 630 Q F1(con\214gure)2.78 E F0
248.114(script. 2)4.446 F F2 2.87(1.5.2.3. Features)72 657.6 R
(and Package Options)2.87 E F0(2)243.02 E
(In general, these options take the following forms:)72 673.2 Q(2)210.31
E F3(--disable-)72 691.2 Q/F4 8/NewCenturySchlbk-Roman@0 SF(FEA)A(TURE)
-.44 E F0(Do not compile for)15.44 E F4(FEA)2.78 E(TURE)-.44 E F0 2.78
(,s)C(ame as --enable-)-2.78 E F4(FEA)A(TURE)-.44 E F0 54.242(=no 22)B
F3(--enable-)72 703.2 Q F4(FEA)A(TURE)-.44 E F0(Compile for FEA)21.44 E
217.624(TURE 22)-.55 F F3(--with-)72 715.2 Q F4 -.592(PA)C(CKAGE).592 E
F0(Compile to include)33 E F4 -.592(PA)2.78 G(CKAGE).592 E F0(22)197.328
E(Chapt Revision: 1.173)72 768 Q(7)324.93 E EP
%%Page: 8 12
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 255.31(Installation PBS)72 48 R
(Administrator Guide)2.78 E/F1 10/Courier@0 SF(--without-)72 84 Q/F2 8
/NewCenturySchlbk-Roman@0 SF -.592(PA)C(CKAGE).592 E F0
(Do not compile to include P)15 E(ACKAGE, same as with-P)-.74 E 16.724
(ACKAGE=no 22)-.74 F F1(--set-)72 96 Q F2(OPTION)A F0(Set the value of)
46.4 E F2(OPTION)2.78 E F0(22)218.978 E(For PBS, the recognized --enabl\
e/disable, --with/without, and --set options are:)72 114 Q(2)80.48 E
379.04(--enable-docs 2)72 129.6 R .326
(Build \(or not build\) the PBS documentation.)97 141.6 R 2.167 -.92
(To d)5.887 H 3.107(os).92 G .327(o, you will need the following GNU)
-3.107 F(2)10 E .789(utilities: groff, gtbl and gpic.)97 153.6 R .788
(Even if this option is not set, the man pages will still be)6.348 F(2)
10 E 371.06(installed. 2)97 165.6 R(Default: disabled)97 177.6 Q(2)
338.09 E 369.97(--enable-server 2)72 193.2 R 1.754
(Build \(or not build\) the PBS job server)97 205.2 R 4.534(,p)-.74 G
(bs_server)-4.534 E 7.314(.N)-.74 G 1.755(ormally all components \(Com-)
-7.314 F(2)10 E(mands, Server)97 217.2 Q 2.78(,M)-.74 G
(om, and Scheduler\) are built.)-2.78 E(2)201.24 E(Default: enabled)97
229.2 Q(2)340.5 E 376.07(--enable-mom 2)72 244.8 R
(Build \(or not build\) the PBS job execution daemon, pbs_mom.)97 256.8
Q(2)133.45 E(Default: enabled)97 268.8 Q(2)340.5 E 368.48
(--enable-clients 2)72 284.4 R(Build \(or not build\) the PBS commands.)
97 296.4 Q(2)232.91 E(Default: enabled)97 308.4 Q(2)340.5 E
(--with-isode=)72 324 Q F1(type)A F0(2)357.5 E
(Use the ISO Data Exchange protocols for backward compatibility)97 336 Q
114.18(.2)-1.11 G/F3 10/NewCenturySchlbk-Bold@0 SF
(This will be removed in release 2.0.)97 348 Q F0(2)235.34 E(If)97 360 Q
F1(type)2.78 E F0(is set to:)2.78 E(2)341.51 E(yes, all, or 0)97 375.6 Q
(2)361.24 E .585(then ISODE/ASN.1 protocol is used for commands and ser\
ver to server communi-)122 387.6 R(2)10 E 361.07(cation 2)122 399.6 R
(old or 1)97 415.2 Q(2)382.55 E 1.107(then ISODE/ASN.1 protocol will be\
 recognized by the server to support old com-)122 427.2 R(2)10 E 355.51
(mands. 2)122 439.2 R(no or 2)97 454.8 Q(2)385.33 E .781(then ISODE/ASN\
.1 will not be used at all and Data is Strings \(DIS\) will be used)122
466.8 R(2)10 E(for all communications.)122 478.8 Q(2)283.66 E
(Default: no - only DIS is used.)97 502.8 Q(2)278.46 E(--set-isode-top=)
72 518.4 Q F1(DIR)A F0(2)352.95 E 1.544(Specify the directory under whi\
ch the ISODE libraries, header \214les, and executables)97 530.4 R(2)10
E 1.846(can be found.)97 542.4 R 1.846
(They are expected in subdirectories lib, include and bin, respectively)
7.406 F 10(.2)-1.11 G F3(This will be removed in release 2.0.)97 554.4 Q
F0(2)235.34 E(Default: search in /usr/local/isode and /usr/local.)97
566.4 Q(2)195.49 E(--with-tcl=)72 582 Q F1(DIR_PREFIX)A F0(2)333.54 E
.012(Use this option if you wish T)97 594 R .012
(cl based PBS features compiled.)-.81 F .013(These features include the)
5.572 F(2)10 E .032(GUI interface, xpbs.)97 606 R .032(If the following\
 option, --with-tclx, is set, use this option only if the)5.592 F(2)10 E
-.81(Tc)97 618 S 4.39(ll).81 G 1.61
(ibraries are not co-located with the T)-4.39 F 1.61(clx libraries.)-.81
F 1.61(When set,)7.17 F F1(DIR_PREFIX)4.39 E F0 7.22(must 2)4.39 F
(specify the absolute path of the directory containing the T)97 630 Q
(cl Libraries.)-.81 E(2)94.82 E(Default: without, T)97 642 Q
(cl utilities are not built.)-.81 E(2)219.8 E(--with-tclx=)72 657.6 Q F1
(DIR_PREFIX)A F0(2)328.17 E .394(Use this option if you wish the T)97
669.6 R .393(cl based PBS features to be based on T)-.81 F 3.173
(clx. This)-.81 F 7.22(option 2)3.173 F(implies --with-tcl.)97 681.6 Q
(2)335.33 E(Default: T)97 693.6 Q(clx is not used.)-.81 E(2)302.42 E
384.22(--enable-gui 2)72 709.2 R(Build the xpbs GUI.)97 721.2 Q
(Only valid if --with-tcl is set.)5.56 E(2)186.41 E 324.93(8C)72 768 S
(hapt Revision: 1.173)-324.93 E EP
%%Page: 9 13
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Installation)258.09 E(Default: enabled)97 84 Q(2)340.5 E(--set-cc[=)72
99.6 Q/F1 10/Courier@0 SF(ccprog)A F0 360.89(]2)C 1.021
(Specify which C compiler should be used.)97 111.6 R 1.022
(This will override the CC environment set-)6.582 F(2)10 E 2.78
(ting. If)97 123.6 R
(only --set-cc is speci\214ed, then CC will be set to)2.78 E F1(cc)2.78
E F0 149.24(.2)C
(Default: gcc \(after all, con\214gure is from GNU also\))97 135.6 Q(2)
184.95 E(--set-c\215ags[=)72 151.2 Q F1(FLAGS)A F0 349.66(]2)C .747
(Set the compiler \215ags.)97 163.2 R .747
(This is used to set the CFLAGS variable.)6.307 F .746
(If only --set-c\215ags is)6.306 F(2)10 E 1.634
(speci\214ed, then CFLAGS is set to `)97 175.2 R(`')-.18 E 4.414
('. This)-.18 F 1.634(must be set to)4.414 F F1(-64)4.414 E F0 1.634
(to build 64 bit objects)4.414 F(2)10 E .515(under Irix 6, e.g.)97 187.2
R F1(--set-cflags=-64)6.075 E F0 6.075(.N)C .514
(ote, multiple \215ags, such as -g and -64 should)-6.075 F(2)10 E
(be enclosed in quotes, e.g.)97 199.2 Q F1(--set-cflags='-g -64')5.56 E
F0(2)166.53 E
(Default: CFLAGS is set to a best guess for the system type.)97 211.2 Q
(2)143.43 E 371.07(--enable-debug 2)72 226.8 R .361
(Builds PBS with debug features enabled.)97 238.8 R .361
(This allows the daemons to remain attached)8.701 F(2)10 E
(to standard output and produce vast quantities of messages.)97 250.8 Q
(2)138.26 E(Default: disabled)97 262.8 Q(2)338.09 E(--set-tmpdir=)72
278.4 Q F1(DIR)A F0(2)362.58 E 1.154(Set the tmp directory in which pbs\
_mom will create temporary scratch directories for)97 290.4 R(2)10 E
2.78(jobs. Used)97 302.4 R(on Cray systems only)2.78 E 263.83(.2)-1.11 G
(Default: /tmp)97 314.4 Q(2)355.32 E(--set-server)72 330 Q(-home=)-.18 E
F1(DIR)A F0(2)337.4 E 1.167(Sets the top level directory name for the P\
BS working directories, PBS_HOME.)97 342 R 7.22(This 2)6.728 F .987
(directory MUST reside on a local \214le system.)97 354 R .987
(PBS uses synchronous writes to \214les to)6.547 F(2)10 E
(maintain state.)97 366 Q(2)346.05 E(Default: /usr/spool/pbs)97 378 Q(2)
313.65 E(--set-server)72 393.6 Q(-name-\214le=)-.18 E F1(FILE)A F0(2)
313.25 E .31
(Set the \214le name which will contain the name of the default server)
97 405.6 R 5.87(.T)-.74 G .31(his \214le is used by)-5.87 F(2)10 E .321
(the commands to determine which server to contact.)97 417.6 R(If)5.881
E F1(FILE)3.101 E F0 .32(is not an absolute path, it)3.101 F(2)10 E
(will be evaluated relative to the value of --set-server)97 429.6 Q
142.52(-home. 2)-.18 F(Default: server_name)97 441.6 Q(2)317.18 E
(--set-default-server=)72 457.2 Q F1(HOSTNAME)A F0(2)299.44 E 1.143(Set\
 the name of the host that clients will contact when not otherwise spec\
i\214ed in the)97 469.2 R(2)10 E(command invocation.)97 481.2 Q
(It must be the primary network name of the host.)5.56 E(2)84.37 E
(Default: the name of the host on which PBS is being compiled.)97 493.2
Q(2)129.55 E(--set-environ=)72 508.8 Q F1(PATH)A F0(2)353.25 E 2.122(Se\
t the path name containing the environment variables used by the daemon\
s and)97 520.8 R(2)10 E .208(passed to the jobs.)97 532.8 R .208
(Use --without-environ if no environment is required.)5.768 F .209
(For AIX based)5.769 F(2)10 E 1.261
(systems, we suggest setting this option to)97 544.8 R F1
(/etc/environment)4.041 E F0 6.821(.R)C 1.261(elative path names)-6.821
F(2)10 E(are interpreted relative to the value of --set-server)97 556.8
Q(-home, PBS_HOME.)-.18 E(2)90.33 E(Default: the \214le)97 568.8 Q F1
(pbs_environment)2.78 E F0(in the directory PBS_HOME.)2.78 E(2)114.21 E
(--enable-plock-daemons=)72 584.4 Q F1(WHICH)A F0(2)297.05 E 1.408
(Enable daemons to lock themselves into memory to improve performance.)
97 596.4 R 1.409(The argu-)6.969 F(2)10 E(ment)97 608.4 Q F1(WHICH)3.22
E F0 .44(is the logical-or of 1 for pbs_server)3.22 F 3.22(,2f)-.74 G
.44(or pbs_sheduler)-3.22 F 3.22(,a)-.74 G .44(nd 4 for pbs_mom)-3.22 F
(2)10 E 1.404(\(7 is all three daemons\).)97 620.4 R 1.405
(This option is recommended for Unicos systems.)6.964 F 1.405(It should)
9.745 F(2)10 E/F2 10/NewCenturySchlbk-Bold@0 SF(not)97 632.4 Q F0
(be used for AIX systems.)2.78 E(2)282.92 E(Default: disabled.)97 644.4
Q(2)335.31 E 370.7(--enable-syslog 2)72 660 R .065
(Enable the use of syslog for error reporting.)97 672 R .064
(This is in addition to the normal PBS logs.)8.404 F(2)10 E
(Default: disabled.)97 684 Q(2)335.31 E(--set-sched=)72 699.6 Q F1(TYPE)
A F0(2)362.51 E .557(Set the scheduler \(language\) type.)97 711.6 R
.557(If set to)6.117 F F1(c)3.337 E F0 3.338(,aCb)C .558
(ased scheduler will be compiled.)-3.338 F 7.22(If 2)6.118 F 2.317
(set to)97 723.6 R F1(tcl)5.097 E F0 5.097(,aT)C 2.316
(cl based scheduler will be used.)-5.907 F 2.316(If set to)7.876 F F1
(basl)5.096 E F0 5.096(,aB)C 2.316(Atch Scheduler)-5.096 F(2)10 E
(Chapt Revision: 1.173)72 768 Q(9)324.93 E EP
%%Page: 10 14
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 255.31(Installation PBS)72 48 R
(Administrator Guide)2.78 E .578(Language scheduler will be generated.)
97 84 R .578(If set to)6.138 F/F1 10/Courier@0 SF(no)3.359 E F0 3.359
(,n)C 3.359(os)-3.359 G .579(cheduler will be compiled, jobs)-3.359 F(2)
10 E(will have to be run by hand.)97 96 Q(2)287.71 E(Default: c)97 108 Q
(2)372.18 E(--set-sched-code=)72 123.6 Q F1(PATH)A F0(2)339 E 1.157(Set\
s the name of the \214le or directory containing the source for the sch\
eduler)97 135.6 R 6.717(.T)-.74 G 1.157(his is)-6.717 F(2)10 E .599(onl\
y used for C and BaSL schedulers, where --set-sched is set to either)97
147.6 R F1(c)3.379 E F0(or)3.379 E F1(basl)3.379 E F0 6.159(.F)C 7.22
(or 2)-6.159 F 3.542(CS)97 159.6 S .762
(chedulers, this should be a directory name.)-3.542 F .761
(For BaSL schedulers, it should be \214le)9.101 F(2)10 E 1.573
(name ending in)97 171.6 R F1(.basl)4.353 E F0 7.133(.I)C 4.353(ft)
-7.133 G 1.573
(he path is not absolute, it will be interpreted relative to)-4.353 F(2)
10 E 3.844(SOURCE_TREE/src/schedulers.SCHED_TYPE/samples. For)97 183.6 R
1.064(example, if)3.844 F 1.064(--set-sched is)6.624 F(2)10 E
(set to basl, then set --set-sched-code to)97 195.6 Q F1(loadave2.basl)
2.78 E F0 156.21(.2)C(Default: \214fo)97 207.6 Q(\(C based scheduler\))
5.56 E(2)266.07 E 360.51(--enable-tcl-qstat 2)72 223.2 R .94
(Builds qstat with the T)97 235.2 R .94(cl interpreter extensions.)-.81
F .94(This allows site and user customiza-)6.5 F(2)10 E 2.78
(tions. Only)97 247.2 R(valid if --with-tcl is already present.)2.78 E
(2)194.75 E(Default: disabled)97 259.2 Q(2)338.09 E
(--set-qstatrc-\214le=)72 274.8 Q F1(FILE)A F0(2)338.43 E .444
(Set the name of the \214le that qstat will use if there is no)97 286.8
R/F2 10/NewCenturySchlbk-Italic@0 SF(.qstatrc)3.223 E F0 .443
(\214le in the user)4.889 F 1.183 -.37('s h).55 H 7.22(ome 2).37 F
(directory)97 298.8 Q 6.18(.T)-1.11 G .62(his option is only valid when)
-6.18 F .62(--enable-tcl-qstat is set.)6.18 F(If)6.18 E F1(FILE)3.4 E F0
.62(is a relative)3.4 F(2)10 E
(path, it will be evaluated relative to the PBS Home directory)97 310.8
Q 2.78(,s)-1.11 G(ee --set-server)-2.78 E 28.62(-home. 2)-.18 F
(Default: PBS_HOME/qstatrc)97 322.8 Q(2)283.47 E 393.49(--with-scp 2)72
338.4 R .763(Directs PBS to attempt to use the)97 350.4 R F2 .763
(Secure Copy Program)3.543 F F0(,)1.666 E F2(scp)3.542 E F0 3.542(,w)
1.666 G .762(hen copying \214les to or)-3.542 F(2)10 E 1.262
(from a remote host.)97 362.4 R 1.262
(This applies for delivery of output \214les and stage-in/stage-out of)
6.822 F(2)10 E 2.785(\214les. If)97 374.4 R .005(scp is to used and the\
 attempt fails, PBS will then attempt the copy using rcp in)2.785 F(2)10
E(case that scp did not exist on the remote host.)97 386.4 Q(2)205.68 E
1.042(For local delivery)97 402 R 3.822(,`)-1.11 G 1.042(`/bin/cp -r)
-4.002 F 1.402 -.18('' i).55 H 3.823(sa).18 G 1.043(lways used.)-3.823 F
1.043(For remote delivery)9.383 F 3.823(,av)-1.11 G 1.043
(arient of rcp is)-3.823 F(2)10 E 6.837(required. The)97 414 R 1.276
(program must always provide a non-zero exit status on any failure to)
4.057 F(2)10 E .677(deliver \214les.)97 426 R .678(This is not true of \
all rcp implementation, hence a copy of a known good)9.017 F(2)10 E .792
(rcp is included in the source, see mom_rcp.)97 438 R .791
(More information can be found in chapter)6.351 F(2)10 E(6.4 `)97 450 Q
(`Delivery of Output Files.')-.18 E 277.69('2)-.18 G .653
(Default: sbindir/pbs_rcp)97 462 R .654
(\(from the mom_rcp source directory\) is used, where sbindir is)6.213 F
(2)10 E(the value from --sbindir)97 474 Q 305.33(.2)-.74 G 353.85
(--enable-shell-pipe 2)72 489.6 R 1.07(When enabled, pbs_mom passes the\
 name of the job script to the top level shell via a)97 501.6 R(2)10 E
.154(pipe rather than placing the script \214le as the shell')97 513.6 R
2.935(ss)-.37 G .155(tandard input.)-2.935 F .155(This does result in)
5.715 F(2)10 E 3.993(as)97 525.6 S 1.213
(econd shell being created to process the script.)-3.993 F(However)6.773
E 3.993(,ac)-.74 G 1.212(ommand in the script)-3.993 F(2)10 E .377(that\
 reads from standard input will not be able to access the script conten\
ts, which can)97 537.6 R(2)10 E
(cause some shells to by-pass commands in the script.)97 549.6 Q(2)
172.53 E(Default: enabled)97 561.6 Q(2)340.5 E 382.92(--enable-sp2 2)72
577.2 R -.71(Tu)97 589.2 S 1.278(rn on special features for the IBM SP)
.71 F 9.618(.T)-1.29 G 1.278(his requires access to a special IBM sup-)
-9.618 F(2)10 E .861(plied library)97 601.2 R 3.641(,l)-1.11 G 3.641
(ibSDR.a. This)-3.641 F .862
(library is not provided by IBM except on special request.)3.641 F(2)10
E .328(This option is only valid when the PBS machine type is aix4.)97
613.2 R .328(The PBS machine type is)5.888 F(2)10 E
(automatically determined by the con\214gure script.)97 625.2 Q(2)188.84
E(Default: disabled)97 637.2 Q(2)338.09 E 381.82(--enable-srfs 2)72
652.8 R 1.587
(This option enables support for Session Reservable File Systems.)97
664.8 R 1.588(It is only valid on)7.148 F(2)10 E .48(Cray systems with \
the NASA modi\214cations to support Session Reservable File System,)97
676.8 R(2)10 E 384.95(SRFS. 2)97 688.8 R(Default: disabled)97 700.8 Q(2)
338.09 E 373.48(--enable-array 2)72 716.4 R 1.575(Setting this under Ir\
ix 6.x enables the use of SGI Array Session tracking.)97 728.4 R 7.22
(Enabling 2)7.135 F 316.59(10 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Page: 11 15
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Installation)258.09 E 1.875
(this feature is recommanded if MPI jobs use the Array Services Daemon.)
97 84 R 1.875(The PBS)7.435 F(2)10 E(machine type is set to irix6array)
97 96 Q 264.94(.2)-1.11 G(Default: disabled)97 108 Q(2)338.09 E/F1 10
/NewCenturySchlbk-Bold@0 SF 2.87(1.6. Machine)72 135.6 R
(Dependent Build Instructions)2.87 E F0 .33(There are a number of possi\
ble variables that are only used for a particular type of machine.)72
151.2 R(If you are not building for one of the following types, you may\
 ignore this section.)72 163.2 Q F1 2.87(1.6.1. Cray)72 187.2 R(Systems)
2.87 E 2.87(1.6.1.1. Cray)72 214.8 R(C90, J90, and T90 Systems)2.87 E F0
(On the traditional Cray systems such as the C90, PBS supports Unicos v\
ersions 8, 9 and 10.)72 230.4 Q .138(If your system supports the Sessio\
n Reservable File System enhancement by NASA, run con-)72 246 R .402
(\214gure with the)72 258 R/F2 10/Courier@0 SF(--enable-srfs)3.182 E F0
3.182(option. If)3.182 F .402
(enabled, the server and MOM will be compiled to)3.182 F 1.774
(have the resource names)72 270 R/F3 10/NewCenturySchlbk-Italic@0 SF
(srfs_tmp)4.554 E F0(,)1.666 E F3(srfs_big)4.554 E F0(,)1.666 E F3
(srfs_fast)4.554 E F0 4.554(,a)1.666 G(nd)-4.554 E F3(srfs_wrk)4.554 E
F0 7.334(.T)1.666 G 1.773(hese may be used)-7.334 F(from)72 282 Q F1
(qsub)2.829 E F0 .049(to request SRFS allocations.)2.829 F .049
(The \214le)5.609 F F2(/etc/tmpdir.conf)2.829 E F0 .05
(is the con\214guration \214le)2.829 F(for this.)72 294 Q
(An example \214le is:)5.56 E F2 6(#S)108 306 S(hell environ var)-6 E
(Filesystem)30 E(TMPDIR)108 318 Q 102(BIGDIR /big/nqs)108 330 R 96
(FASTDIR /fast/nqs)108 342 R 102(WRKDIR /big/nqs)108 354 R F0 5.612(The\
 directory for TMPDIR will default to that de\214ned by JTMPDIR in Unic\
os')72 366 R(s)-.37 E(/usr/include/tmpdir)72 378 Q(.h.)-.74 E -.37(Wi)72
393.6 S 1.378(thout the SRFS mods, Mom under Unicos will create a tempo\
rary job scratch directory).37 F(.)-1.11 E
(By default, this is placed in /tmp.)72 405.6 Q
(The location can be changed via)8.34 E F2(--set-tmpdir=DIR)2.78 E F0(.)
A F1 2.87(1.6.1.2. Unicos)72 433.2 R(10 with MLS)2.87 E F0 1.55
(If you are running Unicos MLS, required in Unicos 10.0 and later)72
448.8 R 4.33(,t)-.74 G 1.55(he following action is)-4.33 F 4.504
(required after the system is built and installed.)72 460.8 R 4.505
(MOM updates)10.065 F F1(ue_batchhost)7.285 E F0(and)7.285 E F1
(ue_batchtime)72 472.8 Q F0 1.083(in the UDB for the user)3.863 F 6.643
(.I)-.74 G 3.863(na)-6.643 G 3.863(nM)-3.863 G 1.082
(LS system, MOM must have the security)-3.863 F .235
(capability to write the protected UDB.)72 484.8 R 2.075 -.92(To g)5.795
H .235(rant this capability).92 F 3.016(,c)-1.11 G .236
(hange directory to wherever)-3.016 F
(pbs_mom has been installed and type:)72 496.8 Q F2
(spset -i 16 -j daemon -k exec pbs_mom)108 508.8 Q F0 -1.11(Yo)72 520.8
S .426(u, the administrator)1.11 F 3.206(,m)-.74 G .426
(ust have capabilities)-3.206 F F1(secadm)3.205 E F0(and)3.205 E F1 .425
(class 16)3.205 F F0 .425(to issue this command.)3.205 F -1.11(Yo)72
532.8 S 3.635(uu)1.11 G .856(se the setucat and setucls commands to get\
 to these levels if you are authorized to do)-3.635 F 3.774(so. The)72
544.8 R(UDB)3.774 E F1(reclsfy)3.774 E F0 .994
(permission bit gives a user the proper authorization to use the spset)
3.774 F(command.)72 556.8 Q F1 -.74(WA)97 572.4 S(RNING).74 E F0 1.289(\
There has been only limited testing in the weakest of MLS environments,\
 prob-)97 588 R
(lems may appear because of differences in your environment.)97 600 Q F1
2.87(1.6.1.3. Cray)72 624 R(T3E Systems)2.87 E F0(For Cray T3E systems,)
72 639.6 Q F1(TBD)2.78 E F0(.)A F1 2.87(1.6.2. IBM)72 667.2 R -.55(Wo)
2.87 G(rkstations).55 E F0 .166
(PBS supports IBM workstations running AIX 4.x.)72 682.8 R .165
(When man pages are installed in)5.726 F F3(mandir)2.945 E F0(,)1.666 E
.535(the default man page \214le name suf\214x, `)72 694.8 R(`)-.18 E F1
(B)A F0 -.18('')C 6.095(,m).18 G .535(ust be removed.)-6.095 F
(Currently)8.876 E 3.316(,t)-1.11 G .536(his must be done)-3.316 F
(by hand.)72 706.8 Q(For example, change man3/qsub.3B to man3/qsub.3.)
5.56 E(Chapt Revision: 1.173)72 768 Q -.55(11)319.92 G EP
%%Page: 12 16
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 255.31(Installation PBS)72 48 R
(Administrator Guide)2.78 E .116(Do not use the con\214gure option)72 84
R/F1 10/Courier@0 SF(--enable-plock)2.896 E F0 5.676(.I)C 2.896(tw)
-5.676 G .115(ill crash the system by using up all of)-2.896 F(memory)72
96 Q(.)-1.11 E/F2 10/NewCenturySchlbk-Bold@0 SF 2.87(1.6.3. IBM)72 120 R
(SP)2.87 E F0 1.18(Every thing under IBM W)72 135.6 R 1.181
(orkstation section above applies to the IBM SP)-.55 F 6.741(.B)-1.29 G
3.961(es)-6.741 G 1.181(ure to read)-3.961 F(the section)72 147.6 Q F2
(3.1 Nodes)2.78 E F0(before con\214guring the Server)2.78 E(.)-.74 E
1.497(Set special SP-2 code to interface with the IBM Resource \(Job\) \
Manager with)72 163.2 R F1(--enable-)4.276 E(sp2)72 175.2 Q F0(.)A F2
2.87(1.6.4. SGI)72 199.2 R -.55(Wo)2.87 G(rkstations Running IRIX 5).55
E F0 2.652
(If, and only if, your system is running Irix 5.3, you will need to add)
72 214.8 R F1(-D_KMEMUSER)5.433 E F0(to)5.433 E F2(CFLAGS)72 226.8 Q F0
(because of a quirk in the Irix header \214les.)2.78 E F2 2.87
(1.6.5. SGI)72 254.4 R -.55(Wo)2.87 G(rkstations Running IRIX 6).55 E F0
.79(If built for Irix 6.x, pbs_mom will track which processes are part \
of a PBS job using POSIX)72 270 R .195(session numbers.)72 282 R .195(T\
his method is \214ne for workstations and multiprocessor boxes not runn\
ing)5.755 F 1.262
(the SGI Array Services Daemon \(arrayd\) and not using SGI')72 294 R
4.042(sm)-.37 G 1.262(pirun command.)-4.042 F 1.262(The PBS)6.822 F
(machine type \(MACH\) is set to)72 306 Q F1(irix6)2.78 E F0(.)A 2.118(\
Where arrayd and mpirun is being used, the tasks of a parallel job are \
started through)72 321.6 R .519
(requests to arrayd and hence are not part of the job')72 333.6 R 3.299
(sP)-.37 G .519(OSIX session.)-3.299 F .518(In order to relate pro-)
6.079 F .168
(cesses to the job, the SGI Array Session Handle \(ASH\) must be used.)
72 345.6 R .169(This feature is enabled)5.728 F(by setting)72 357.6 Q F1
(--enable-array)2.78 E F0 5.56(.T)C
(he PBS machine type \(MACH\) is set to)-5.56 E F1(irix6array)2.78 E F0
.255(IRIX 6 supports both 32 and 64 bit objects.)72 373.2 R .254
(In prior versions of PBS, PBS was typically built)5.815 F .491
(as a 32 bit object.)72 385.2 R .492(Irix 6.4 introduced system support\
ed checkpoint/restart, PBS will include)6.051 F 1.897
(support for checkpoint/restart if the \214le)72 397.2 R/F3 10
/NewCenturySchlbk-Italic@0 SF(/usr/lib64/libcpr)4.677 E(.so)-1.29 E F0
1.896(is detected during the build)6.343 F 3.34(process. T)72 409.2 R
3.34(oi)-.92 G .56(nterface with the SGI checkpoint/restart library)
-3.34 F 3.34(,P)-1.11 G .56(BS must be made as a 64 bit)-3.34 F 5.929
(object. Add)72 421.2 R F1(-64)5.929 E F0 3.149(to the)5.929 F F2
(CFLAGS)5.929 E F0 8.709(.T)C 3.148
(his can be done via the con\214gure option)-8.709 F F1(--set-)5.928 E
(cflags=-64)72 433.2 Q F2 -.74(WA)97 448.8 S(RNING).74 E F0 1.014(Becau\
se of changes in structure size, PBS will not be able to recover any se\
rver)97 464.4 R(,)-.74 E 2.163(queue, or job information recorded by a \
PBS built with 32 bit objects, or vice)97 476.4 R 3.037(versa. Please)97
488.4 R .257(read chapter 3.8 of the Admin Guide entitled)3.037 F F3
.258(Installing an Updated)3.038 F(Batch System)97 500.4 Q F0
(for instructions on dealing with this incompatibility)4.446 E(.)-1.11 E
.592(If libcpr)72 516 R .592(.so is not present, PBS may be built as ei\
ther a 32 bit or a 64 bit object.)-.74 F 2.431 -.92(To b)6.152 H .591
(uild as).92 F(32 bit, add)72 528 Q F1(-n32)2.78 E F0(instead of -64 to)
2.78 E F2(CFLAGS)2.78 E F0(.)A F2 2.87(1.6.6. FreeBSD)72 555.6 R
(and NetBSD)2.87 E F0 .805
(There is a problem with FreeBSD up to at least version 2.2.6.)72 571.2
R .806(It is possible to lose track of)6.366 F .387(which session a set\
 of processes belongs to if the session leader exits.)72 583.2 R .386
(This means that if the)5.946 F .817(top shell of a job leaves processe\
s running in the background and then exits, MOM will not)72 595.2 R
(be able to \214nd them when the job is deleted.)72 607.2 Q
(This should be \214xed in a future version.)5.56 E F2 2.87
(1.6.7. Linux)72 634.8 R F0 1.563(Redhat version 4.x is supported.)72
650.4 R -.92(Ve)7.122 G 1.562
(rsion 5.x is not currently supported; there are system).92 F
(header \214le differences.)72 662.4 Q F2 2.87(1.6.8. SUN)72 690 R
(Running SunOS)2.87 E F0 .262(The native SunOS C compiler is not ANSI a\
nd cannot be used to build PBS.)72 705.6 R .263(GNU gcc is rec-)5.823 F
(0)10 E 386.07(ommended. 0)72 717.6 R 316.59(12 Chapt)72 768 R
(Revision: 1.173)2.78 E EP
%%Page: 13 17
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Installation)258.09 E/F1 10/NewCenturySchlbk-Bold@0 SF 2.87
(1.7. Additional)72 84 R(Build Options)2.87 E F0 -.71(Tw)72 99.6 S 3.476
(oh).71 G .696(eader \214les within the subdirectory src/include provid\
e additional con\214guration control)-3.476 F 1.291
(over the server and MOM.)72 111.6 R 1.291
(The modi\214cation of any symbols in the two \214les should not be)
6.851 F(undertaken lightly)72 123.6 Q(.)-1.11 E F1 2.87
(1.7.1. pbs_i\215.h)72 147.6 R F0 1.275(This header \214le contains str\
uctures, symbols and constants used by the API, libpbs.a, and)72 163.2 R
.154(the various commands as well as the daemons.)72 175.2 R -.92(Ve)
5.714 G .154(ry little here should ever be changed.).92 F(Pos-)5.714 E
1.032(sible exceptions are the following symbols.)72 187.2 R 1.031
(They must be consistent between all batch sys-)6.592 F
(tems which might interconnect.)72 199.2 Q(PBS_MAXHOSTNAME)72 214.8 Q
.732(De\214nes the length of the maximum possible host name.)97 226.8 R
.733(This should be set at least as)6.293 F(large as)97 238.8 Q F1
(MAXHOSTNAME)2.78 E F0(which may be de\214ned in)2.78 E/F2 10
/NewCenturySchlbk-Italic@0 SF(sys/params.h)2.78 E F0(.)1.666 E
(PBS_MAXUSER)72 254.4 Q
(De\214nes the length of the maximum possible user login name.)97 266.4
Q(PBS_MAXGRPN)72 282 Q
(De\214nes the length of the maximum possible group name.)97 294 Q
(PBS_MAXQUEUENAME)72 309.6 Q
(De\214nes the length of the maximum possible PBS queue name.)97 321.6 Q
(PBS_USE_IFF)72 337.2 Q .257(If this symbol is set to zero \(0\), befor\
e the library and commands are built, the API rou-)97 349.2 R .621
(tine pbs_connect\(\) will not attempt to invoke the program)97 361.2 R
F1(pbs_iff)3.402 E F0 .622(to generate a secure)3.402 F 1.027
(credential to authenticate the user)97 373.2 R 6.587(.I)-.74 G 1.026
(nstead, a clear text credential will be generated.)-6.587 F .022(This \
credential is completely subject to forgery and is useful only for debu\
gging the PBS)97 385.2 R 2.78(system. Y)97 397.2 R
(ou are strongly advised against using a clear text credential.)-1.11 E
(PBS_BA)72 412.8 Q(TCH_SER)-.55 E(VICE_PORT)-.37 E
(De\214nes the port number at which the server listens.)97 424.8 Q
(PBS_MOM_SER)72 440.4 Q(VICE_PORT)-.37 E
(De\214nes the port number at which MOM, the execution miniserver)97
452.4 Q 2.78(,l)-.74 G(istens.)-2.78 E(PBS_SCHEDULER_SER)72 468 Q
(VICE_PORT)-.37 E
(De\214nes the port number at which the scheduler listens.)97 480 Q F1
2.87(1.7.2. server_limits.h)72 507.6 R F0 1.582(This header \214le cont\
ains symbol de\214nitions used by the server and by MOM.)72 523.2 R
1.581(Only those)7.141 F(that)72 535.2 Q F2(might)4.095 E F0 1.315
(be changed are listed here.)5.761 F 1.316
(These should be changed with care.)6.876 F 1.316(It is strongly)6.876 F
.137(recommended that no other symbols in server_limits.h be changed.)72
547.2 R .137(If server_limits.h is to be)5.697 F 1.107
(changed, it may be copied into the include directory of the)72 559.2 R
F2(target)3.888 E F0 1.108(\(build\) tree and modi\214ed)5.554 F
(before compiling.)72 571.2 Q(NO_SPOOL_OUTPUT)72 586.8 Q .306(If de\214\
ned, directs MOM to not use a spool directory for the job output, but t\
o place it in)97 598.8 R .981(the user)97 610.8 R 1.721 -.37('s h).55 H
.981(ome directory while the job is running.).37 F .982
(This allows a site to invoke quota)6.541 F
(control over the output of running batch jobs.)97 622.8 Q(PBS_BA)72
638.4 Q(TCH_SER)-.55 E(VICE_NAME)-.37 E 2.218(This is the service name \
used by the server to determine to which port number it)97 650.4 R .2
(should listen.)97 662.4 R .2(It is set to)8.54 F/F3 10/Courier@0 SF
(15000)2.98 E F0 2.98(,i)C 2.981(nq)-2.98 G .201
(uotes as it is a character string.)-2.981 F .201(Should you wish)8.541
F .244(to assign PBS a service port in)97 674.4 R F3(/etc/services)3.024
E F0 3.024(,c)C .243(hange this string to the service name)-3.024 F 2.78
(assigned. Y)97 686.4 R(ou should also update PBS_SCHEDULER_SER)-1.11 E
(VICE_NAME as required.)-.37 E(PBS_DEF)72 702 Q(AUL)-.74 E(T_ADMIN)-.55
E 2.903(De\214ned to the name of the default administrator)97 714 R
5.683(,t)-.74 G 2.903(ypically `)-5.683 F(`root')-.18 E 5.683
('. Generally)-.18 F(only)5.683 E(changed to simplify debugging.)97 726
Q(Chapt Revision: 1.173)72 768 Q(13)319.37 E EP
%%Page: 14 18
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 255.31(Installation PBS)72 48 R
(Administrator Guide)2.78 E(PBS_DEF)72 84 Q(AUL)-.74 E(T_MAIL)-.55 E
.918(Set to user name from which mail will be sent by PBS.)97 96 R .918
(The default is "adm".)6.478 F .918(This is)6.478 F
(overridden if the server attribute)97 108 Q/F1 10
/NewCenturySchlbk-Italic@0 SF(mail_from)2.78 E F0(is set.)4.446 E
(PBS_JOBBASE)72 123.6 Q .016(The length of the job id string used as th\
e basename for job associated \214les stored in the)97 135.6 R 1.095
(spool directory)97 147.6 R 6.655(.I)-1.11 G 3.875(ti)-6.655 G 3.875(ss)
-3.875 G 1.095(et to 1)-3.875 F 1.095
(1, which is 14 minus the 3 characters of the suf\214xes like)-.55 F/F2
10/Courier@0 SF(.JB)97 159.6 Q F0(and)4.077 E F2(.OU)4.077 E F0 6.858
(.F)C 1.298
(ourteen is the guaranteed length for a \214le name under POSIX.)-6.858
F(The)9.638 E 1.452(actual length that a \214le name can be depends on \
the \214le system and must be deter)97 171.6 R(-)-.18 E .044
(mined at run time, but PBS is too lazy to go to that trouble.)97 183.6
R .045(If the server and MOM run)5.604 F 1.279(on a \214le system that \
support longer names \(most do\), then you may up this value so)97 195.6
R(that the names are more readable.)97 207.6 Q(PBS_MAX_HOPCOUNT)72 223.2
Q .793(Used to limit the number of hops taken when being routed from qu\
eue to queue.)97 235.2 R .794(It is)6.354 F(mainly to detect loops.)97
247.2 Q(PBS_NET_MAX_CONNECTIONS)72 262.8 Q(The maximum number of open \
\214le descriptors and sockets supported by the server)97 274.8 Q(.)-.74
E(PBS_NET_RETR)72 290.4 Q(Y_LIMIT)-.37 E
(The limit on retrying requests to remote servers.)97 302.4 Q
(PBS_NET_RETR)72 318 Q(Y_TIME)-.37 E 1.043(The time between network rou\
ting retries to remote queues and for requests between)97 330 R
(the server and MOM.)97 342 Q(PBS_REST)72 357.6 Q -.55(AT)-.55 G(_JOB)
.55 E 3.382 -.92(To r)97 369.6 T 1.543(efrain from over burdening any g\
iven MOM, the server will wait this amount of).92 F 1.762(time \(defaul\
t 30 seconds\) between asking her for updates on running jobs.)97 381.6
R 1.761(In other)7.321 F 1.074(words, if a user asks for status of a ru\
nning job more often than this value, the prior)97 393.6 R
(data will be returned.)97 405.6 Q(PBS_ROOT_AL)72 421.2 Q -.92(WAY)-.74
G(S_ADMIN).92 E .713(If de\214ned \(set to 1\), `)97 433.2 R(`root')-.18
E 3.493('i)-.18 G 3.493(sa)-3.493 G 3.493(na)-3.493 G .713
(dministrator of the batch system even if not listed in)-3.493 F(the)97
445.2 Q F2(managers)2.78 E F0(attribute.)2.78 E(PBS_SCHEDULE_CYCLE)72
460.8 Q .114(The default value for the elapsed time between scheduling \
cycles with no change in jobs)97 472.8 R 6.082(queued. This)97 484.8 R
3.301(is the initial value used by the server)6.082 F 6.081(,b)-.74 G
3.301(ut it can be changed via)-6.081 F/F3 10/NewCenturySchlbk-Bold@0 SF
(qmgr)97 496.8 Q F0(\(1B\).)A(NO_SPOOL_OUTPUT)72 512.4 Q .306(If de\214\
ned, directs MOM to not use a spool directory for the job output, but t\
o place it in)97 524.4 R .982(the user)97 536.4 R 1.722 -.37('s h).55 H
.982(ome directory while the job is running.).37 F .981
(This allows a site to invoke quota)6.541 F
(control over the output of running batch jobs.)97 548.4 Q F3 2.87
(1.8. Site)72 576 R(Modi\214able Source Files)2.87 E F0 .803(It is safe\
 to skip this section untill you have played with PBS for a while and w\
ant to start)72 591.6 R(tinkering.)72 603.6 Q .002(Dave T)72 619.2 R
.001(weten of NASA has said, "If it ain')-.71 F 2.781(ts)-.18 G .001
(ource, it ain')-2.781 F 2.781(ts)-.18 G 2.781(oftware." This)-2.781 F
.001(is part of PBS')2.781 F 2.781(sp)-.37 G(hi-)-2.781 E .55(losophy t\
hat source distribution should be a major part of any software product.)
72 631.2 R(Otherwise,)6.11 E .196(the product becomes `)72 643.2 R
(`hard')-.18 E 2.976('\255ware. The)-.18 F .196
(\214rst example of this philosophy is the PBS job sched-)2.976 F(uler)
72 655.2 Q 9.318(.T)-.74 G .978
(he implementation of the site policy is left to the site.)-9.318 F .978
(PBS provides three tools for)6.538 F
(that implementation, the BaSL scheduler)72 667.2 Q 2.78(,t)-.74 G(he T)
-2.78 E(cl scheduler)-.81 E 2.78(,a)-.74 G(nd the C scheduler)-2.78 E(.)
-.74 E .724(The philosophy does not stop with the scheduler)72 682.8 R
6.283(.W)-.74 G .723(ith distribution of the source, a site has)-6.653 F
.55(the ability to modify any part of PBS as they so choose.)72 694.8 R
.55(Of course, in indiscriminate modi\214-)6.11 F .585
(cation is not without dangers.)72 706.8 R .585
(Not the least of which is con\215icts with future releases by the)6.145
F(developers.)72 718.8 Q 316.59(14 Chapt)72 768 R(Revision: 1.173)2.78 E
EP
%%Page: 15 19
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Installation)258.09 E .327(Certain functions of PBS appear to be likel\
y targets of widespread modi\214cation by sites for a)72 84 R 1.007
(number of reasons.)72 96 R 1.006
(When identi\214ed, the developers of PBS have attempted to improve the)
6.566 F 2.832
(easy of modi\214cation in these areas by the inclusion of special)72
108 R/F1 10/NewCenturySchlbk-Italic@0 SF 2.833
(site speci\214c modi\214cation)5.613 F(routines)72 120 Q F0 5.594(.T)
1.666 G .033
(hese are identi\214ed in the IDS under chapter headings of `)-5.594 F
.033(`Site Modi\214able Files')-.18 F 2.813('i)-.18 G(n)-2.813 E 1.032
(the sections on the Server and MOM.)72 132 R 1.032
(The distributed default version of these \214les build a)6.592 F .97
(private library)72 144 R 3.75(,l)-1.11 G .97(ibsite.a, which is includ\
e in the linking phase for the server and for MOM.)-3.75 F .724
(They may be replace as needed by a site.)72 156 R .724
(The procedure is described in the IDS under `)6.284 F(`lib-)-.18 E
(site.a \255 Site Modi\214able Library')72 168 Q 2.78('i)-.18 G 2.78(nc)
-2.78 G(hapter 10.)-2.78 E(The \214les include:)72 183.6 Q(Server)72
199.2 Q(site_allow_u.c)97 214.8 Q 1.723(The routine in this \214le,)122
226.8 R F1(site_allow_u\(\))4.503 E F0 4.503(,p)1.666 G 1.723
(rovides an additional point at which a)-4.503 F .588
(user can be denied access to the batch system \(server\).)122 238.8 R
.588(It may be used instead of)6.148 F
(or in addition to the server Acl_User list.)122 250.8 Q(site_alt_rte.c)
97 266.4 Q .443(The function)122 278.4 R F1(site_alt_router\(\))3.223 E
F0 .443(allows a site to add decision capabilities to job rout-)4.889 F
3(ing. This)122 290.4 R .22(function is called on a per)3 F .22
(-queue basis if the queue attribute)-.18 F/F2 10
/NewCenturySchlbk-Bold@0 SF(alt_router)3 E F0 7.012(is true.)122 302.4 R
7.011(As provided, site_alt_router\(\) just invokes the default router)
12.571 F(,)-.74 E F1(default_router\(\))122 314.4 Q F0(.)1.666 E
(site_check_u.c)97 330 Q .054(The routine in this \214le,)122 342 R F1
(site_check_user_map\(\))2.834 E F0 2.834(,p)1.666 G .055
(rovides the service of authenticat-)-2.834 F .078(ing that the job own\
er is privileged to run the job under the user name speci\214ed or)122
354 R 1.605(selected for execution on the server system.)122 366 R 1.606
(Please see the IDS for the default)7.165 F(authentication method.)122
378 Q(site_map_usr)97 393.6 Q(.c)-.74 E .996
(For sites without a common user name/uid space, this function,)122
405.6 R F1(site_map_user\(\))3.776 E F0(,)1.666 E 1.461
(provides a place to add a user name mapping function.)122 417.6 R 1.462
(The mapping occurs at)7.022 F .861(two times.)122 429.6 R .861
(First to determine if a user making a request against a job is the job)
6.421 F(owner)122 441.6 Q 3.462(,s)-.74 G .682(ee `)-3.462 F .682
(`User Authorization')-.18 F 3.463('. Second,)-.18 F .683
(to map the submitting user \(job owner\))3.463 F
(to an execution uid on the local machine.)122 453.6 Q(site_*_attr_*.h)
97 469.2 Q 1.871(These \214les provide a site with the ability to add l\
ocal attributes to the server)122 481.2 R(,)-.74 E .115
(queues, and jobs.)122 493.2 R .115
(The \214les are installed into the target tree `)5.675 F(`include')-.18
E 2.895('s)-.18 G(ubdirectory)-2.895 E .393(during the \214rst make.)122
505.2 R .393(As delivered, they contain only comments.)5.953 F .393
(If a site wishes)5.953 F(to add attributes, these \214les can be)122
517.2 Q F1(carefully)2.78 E F0(modi\214ed.)4.446 E 2.786
(The \214les are in three groups, by server)122 532.8 R 5.566(,q)-.74 G
2.787(ueue, and job.)-5.566 F 2.787(In each group are)11.127 F F1
(site_*_attr_def.h)122 544.8 Q F0 1.109
(\214les which are used to de\214ned the name and support functions)
5.555 F 1.746(for the new attribute or attributes, and)122 556.8 R F1
(site_*_attr_enum.h)4.526 E F0 1.746(\214les which insert a)6.192 F
2.134
(enumerated label into the set for the corresponding parent object.)122
568.8 R 2.133(For server)7.693 F(,)-.74 E .633(queue, node)122 580.8 R
.633(attributes, there is also an additional \214le that de\214nes if t\
he qmgr\(1\))6.193 F 2.677
(command will include the new attribute in the set `)122 592.8 R
(`printed')-.18 E 5.456('w)-.18 G 2.676(ith the)-5.456 F/F3 10/Courier@0
SF(print)5.456 E(server)122 604.8 Q F0(,)A F3(print queue)2.78 E F0 2.78
(,o)C(r)-2.78 E F3(print node)2.78 E F0(sub-commands.)2.78 E .894(Detai\
led information on how to modify these \214les can be found in the IDS \
under)122 620.4 R 1.566(the `)122 632.4 R 1.566
(`Site Modi\214able Files')-.18 F 4.346('s)-.18 G 1.566
(ection of the Server chapter)-4.346 F 4.346(,c)-.74 G 1.566(hapter 5.)
-4.346 F -1.11(Yo)7.125 G 4.345(us)1.11 G(hould)-4.345 E 1.618(note tha\
t just adding attributes will have no effect on how PBS processes jobs.)
122 644.4 R .905(The main usage for new attributes would be in providin\
g new scheduler controls)122 656.4 R .64(and/or information.)122 668.4 R
.641(The scheduling algorithm will have to be modi\214ed to use the)6.2
F .735(new attributes.)122 680.4 R .735
(If you need MOM to do something different with a job, you will)11.855 F
(still need `)122 692.4 Q(`to get down and dirty')-.18 E 2.78('w)-.18 G
(ith her source code.)-2.78 E(MOM)72 708 Q(Chapt Revision: 1.173)72 768
Q(15)319.37 E EP
%%Page: 16 20
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 255.31(Installation PBS)72 48 R
(Administrator Guide)2.78 E(site_mom_chu.c)97 84 Q .896(If a server is \
feeding jobs to more than one MOM, additional checking for execu-)122 96
R 1.251(tion privilege may be required at MOM')122 108 R 4.031(sl)-.37 G
4.031(evel. It)-4.031 F 1.25(can be added in this function)4.031 F/F1 10
/NewCenturySchlbk-Italic@0 SF(site_mom_chkuser\(\))122 120 Q F0(.)1.666
E(site_mom_ckp.c)97 135.6 Q 2.855(Provide post-checkpoint,)122 147.6 R
F1(site_mom_postchk\(\))5.635 E F0 2.856(and pre-restart)7.302 F F1
(site_mom_prerst\(\))5.636 E F0 -.18(``)122 159.6 S(user exits').18 E
2.78('f)-.18 G(or the Cray)-2.78 E(.)-1.11 E(site_mom_jset.c)97 175.2 Q
.677(The function)122 187.2 R F1(site_job_setup\(\))3.457 E F0 .676
(allows a site to perform speci\214c actions once the job)5.122 F
(session has been created and before the job runs.)122 199.2 Q/F2 10
/NewCenturySchlbk-Bold@0 SF(2.)72 226.8 Q/F3 12/NewCenturySchlbk-Bold@0
SF(Batch System Con\214guration)5.74 E F0 .585(Now that the system has \
been built and installed, the work has just begun.)72 242.4 R .585
(The scheduling)6.145 F 1.035
(policy must be implemented and the Server and Moms con\214gured.)72
254.4 R 1.034(These items are closely)6.594 F 6.56(coupled. Managing)72
266.4 R 1
(which and how many jobs are scheduled into execution can be done in)
3.78 F .051(several methods.)72 278.4 R .051(Each method has an impact \
on the implementation of the scheduling policy)5.611 F .041
(and server attributes.)72 290.4 R .041(An example is the decision to s\
chedule jobs out of a single pool \(queue\))5.601 F .308(or divide jobs\
 into one of multiple queues each of which is managed differently)72
302.4 R 5.868(.M)-1.11 G .308(ore on this)-5.868 F 2.328
(type of discussion is covered under the sections)72 314.4 R F2 2.328
(Server Management)5.108 F F0(and)5.109 E F2(Scheduling)5.109 E
(Policies)72 326.4 Q F0(.)A F2 2.87(2.1. Nodes)72 350.4 R(2)387.37 E F0
.391(Before proceeding, you will need to make some decisions about how \
the overall batch system)72 366 R F2(2)10 E F0(is to be arranged.)72 378
Q 1.84 -.92(To d)5.56 H 2.78(ot).92 G
(hat, we need to de\214ne some terms:)-2.78 E F2(2)165.28 E F0(Node)72
393.6 Q F2(2)418.11 E F0 4.254(Ac)97 405.6 S 1.474(omputer system with \
a single Operating System image, a uni\214ed virtual memory)-4.254 F F2
(2)10 E F0 1.002(image, and one or more IP addresses.)97 417.6 R
(Frequently)6.562 E 3.782(,t)-1.11 G 1.002(he term)-3.782 F F1 1.001
(execution host)3.782 F F0 1.001(is used for)5.447 F F2(2)10 E F0 3.256
(node. A)97 429.6 R .477(box like the SGI Origin 2000, with contains mu\
ltiple processing units running)3.257 F F2(2)10 E F0 .311
(under a single OS copy is one node.)97 441.6 R 3.091(Ab)5.871 G .31
(ox like the IBM SP which contains many units,)-3.091 F F2(2)10 E F0
(each with their own copy of the OS, is a collection of many nodes.)97
453.6 Q F2(2)116.41 E F0(Under PBS, a node may be allocated)97 469.2 Q
F1(exclusively)2.78 E F0(,)1.666 E F1(shared)2.78 E F0 2.78(,o)1.666 G
(r)-2.78 E F1(timeshared)2.78 E F0(.)1.666 E F2(2)82.942 E F0(Cluster)72
484.8 Q F2(2)407.56 E F0 2.983(Ac)97 496.8 S .203
(ollection of nodes managed by one batch system.)-2.983 F 2.983(Ac)5.763
G .203(luster may be made up of nodes)-2.983 F F2(2)10 E F0 .087(that a\
re allocated to only one job at a time or of nodes that have many jobs \
executing on)97 508.8 R F2(2)10 E F0
(each at once or a combination of both.)97 520.8 Q F2(2)242.9 E F0
(Cluster Node)72 536.4 Q F2(2)380.89 E F0 2.796 -.92(To c)97 548.4 T
.956(onfuse the issue, we use the term).92 F F1 .957(cluster node)3.736
F F0 .957(to identify a node that is allocated)5.403 F F2(2)10 E F0 .069
(speci\214cally to one job \(see)97 560.4 R F1 .069(exclusive node)2.849
F F0 .069(\), or a few jobs \(see)1.666 F F1 .068(shared nodes)2.848 F
F0 2.848(\). This)1.666 F .068(type of)2.848 F F2(2)10 E F0 .272
(node may also be called)97 572.4 R F1 .272(space shared)3.052 F F0
5.832(.H)1.666 G .273(osts that are timeshared among many jobs are)
-5.832 F F2(2)10 E F0(called `)97 584.4 Q(`timeshared.')-.18 E(')-.18 E
F2(2)324.19 E F0(Exclusive Nodes)72 600 Q F2(2)366.26 E F0 .004(An excl\
usive node is one that is used by one and only one job at a time.)97 612
R 2.783(As)5.564 G .003(et of nodes is)-2.783 F F2(2)10 E F0 2.191
(assigned exclusively to a job for the duration of that job.)97 624 R
2.192(This is typically done to)7.752 F F2(2)10 E F0
(improve the performance of message passing programs.)97 636 Q F2(2)
160.33 E F0(Shared Nodes)72 651.6 Q F2(2)377.55 E F0(A)97 663.6 Q F1
.305(shared node)3.085 F F0 .305
(is one which is shared by multiple jobs.)4.751 F .305
(If several jobs which requested)8.645 F F2(2)10 E F0 .364(multiple sha\
red nodes are running, some nodes may be common to the subset allocated)
97 675.6 R F2(2)10 E F0 1.453(to each job and some may be unique.)97
687.6 R 1.453(When a node is allocated as a shared node, it)7.013 F F2
(2)10 E F0 .523(remains so until all jobs using it are terminated.)97
699.6 R .524(Then the node may be next allocated)6.083 F F2(2)10 E F0
(for shared or exclusive use.)97 711.6 Q F2(2)291.45 E F0 316.59
(16 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Page: 17 21
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Con\214guration)248.29 E -.25(Ti)72 84 S(meshare).25 E/F1 10
/NewCenturySchlbk-Bold@0 SF(2)392.8 E F0 .021(In our context, to always\
 allow multiple jobs to run concurrently on an execution host or)97 96 R
F1(2)10 E F0 2.8(node. Often)97 108 R .02(the term host rather than nod\
e is used in conjunction with timeshare, as in)2.8 F F1(2)10 E/F2 10
/NewCenturySchlbk-Italic@0 SF .269(timeshared host)97 120 R F0 5.829(.I)
1.666 G 3.049(ft)-5.829 G .269
(he term node is used without the timeshare pre\214x, the node is one)
-3.049 F F1(2)10 E F0(which is allocated either exclusively or shared.)
97 132 Q F1(2)201.43 E F0 .082(If a host, or node, is indicated to be t\
imeshared, it will never be allocated \(by the server\))97 147.6 R F1(2)
10 E F0(exclusively or shared.)97 159.6 Q F1(2)317 E F0(Load Balance)72
175.2 Q F1(2)379.21 E F0 3.544(Ap)97 187.2 S .764(olicy wherein jobs ar\
e distributed across multiple timeshared hosts to even out the)-3.544 F
F1(2)10 E F0 .216(work load on each host.)97 199.2 R .217
(Being a policy)5.776 F 2.997(,t)-1.11 G .217
(he distribution of jobs across execution hosts is)-2.997 F F1(2)10 E F0
(solely a function of the Job Scheduler)97 211.2 Q(.)-.74 E F1(2)242.54
E F0(Node Property)72 226.8 Q F1(2)374.78 E F0 1.195(In order to have a\
 means of grouping nodes for allocation, a set of zero or more node)97
238.8 R F1(2)10 E F0 1.02(properties may be given to each node.)97 250.8
R 1.02(The property is nothing more than a string of)9.36 F F1(2)10 E F0
2.095(printable characters without meaning to PBS.)97 262.8 R -1.11(Yo)
7.655 G 2.094(u, as the PBS administrator)1.11 F 4.874(,m)-.74 G(ay)
-4.874 E F1(2)10 E F0 1.138(chose whatever property names you wish.)97
274.8 R -1.11(Yo)6.698 G 1.139(ur choices for property names should be)
1.11 F F1(2)10 E F0(relayed to the users.)97 286.8 Q F1(2)322.92 E F0
(Batch System)72 302.4 Q F1(2)377.92 E F0 3.967(AP)97 314.4 S 1.186(BS \
Batch System consists of one Job Server \(pbs_server\), one or more Job\
 Sched-)-3.967 F F1(2)10 E F0 .183
(ulers \(pbs_sched\), and one or more execution servers \(pbs_mom\).)97
326.4 R -.37(Wi)5.744 G .184(th prior versions of).37 F F1(2)10 E F0
.649(PBS, a Batch System could be set up to support only a cluster of e\
xclusive nodes)97 338.4 R F1(or)3.428 E F0(to)3.428 E F1(2)10 E F0 1.036
(support one or more timeshared hosts.)97 350.4 R 1.036
(There was no support for shared nodes.)6.596 F -.37(Wi)6.597 G(th).37 E
F1(2)10 E F0 .896(this release, a PBS Batch System may be set up to fee\
d work to one large timeshared)97 362.4 R F1(2)10 E F0 2.402(system, mu\
ltiple time shared systems, a cluster of nodes to be used exclusively o\
r)97 374.4 R F1(2)10 E F0(shared, or any combination of the preceding.)
97 386.4 Q F1(2)211.62 E 2.87(2.1.1. De\214ning)72 414 R 328.68(Nodes 2)
2.87 F F0 .156(In prior PBS systems, nodes were only speci\214ed when t\
he system was built and con\214gured to)72 429.6 R F1(2)10 E F0 .216
(support exclusive nodes.)72 441.6 R 2.996(As)8.556 G .217
(ingle pbs_mom was given a list of nodes.)-2.996 F 2.997(When jobs)8.557
F .217(were run,)2.997 F F1(2)10 E F0 .262
(the top level shell for all jobs ran on the host where that Mom lived.)
72 453.6 R .262(Mom allocated nodes to)5.822 F F1(2)10 E F0 .004(the jo\
b and provided the job a \214le containing the list of nodes allocated \
to it.)72 465.6 R .005(If the PBS batch)5.565 F F1(2)10 E F0 .669(syste\
m was supporting one or more timeshared hosts, only the Job Scheduler k\
new of those)72 477.6 R F1(2)10 E F0 5.56(hosts. It)72 489.6 R
(directed where the server should send the job for execution.)2.78 E F1
(2)120.89 E F0 .979(In this version of PBS, allocation of nodes is hand\
led by the Server instead of Mom.)72 505.2 R(Each)9.319 E F1(2)10 E F0
.922
(node to be used by a job must have its own copy of Mom running on it.)
72 517.2 R .921(If only timeshared)6.481 F F1(2)10 E F0 1.776(hosts are\
 to be served by the PBS batch system, then as before, the Job Schedule\
r must)72 529.2 R F1(2)10 E F0 .215(direct where the job should be run.)
72 541.2 R .215
(If unspeci\214ed, the Server will execute the job on the host)5.775 F
F1(2)10 E F0(where it is running.)72 553.2 Q
(See the next section for full details.)5.56 E F1(2)181.79 E F0 .46
(If nodes are to be allocated)72 568.8 R F2(exclusively)3.24 E F0(or)
4.906 E F2(shared)3.24 E F0 3.24(,al)1.666 G .461
(ist of the nodes must be speci\214ed to the)-3.24 F F1(2)10 E F0
(server)72 580.8 Q 9.1(.T)-.74 G .76
(his list may also contain timeshared nodes.)-9.1 F .76
(Nodes marked as timeshared will be)9.1 F F1(2)10 E F0 .551(listed by t\
he server in a node status report along with the other nodes.)72 592.8 R
(However)6.112 E 3.332(,t)-.74 G .552(he server)-3.332 F F1(2)10 E F0
(will)72 604.8 Q F1 .574(not attempt to allocate them)3.354 F F0 .574
(to jobs.)3.354 F .574(The presence of timeshared nodes in the list is)
6.134 F F1(2)10 E F0(solely as a convenience to the Job Scheduler and o\
ther programs, such as xpbsmon.)72 616.8 Q F1(2)57.52 E F0 1.641
(The node list is given to the server in a \214le named)72 632.4 R/F3 10
/Courier@0 SF(nodes)4.421 E F0 1.641(in the server)4.421 F 2.382 -.37
('s h).55 H 1.642(ome directory).37 F F1(2)10 E F3(PBS_HOME/server_priv)
72 644.4 Q F0 6.878(.T)C 1.318
(his is a simple text \214le with the speci\214cation of a single node)
-6.878 F F1(2)10 E F0(per line in the \214le.)72 656.4 Q
(The format of each line in the \214le is:)5.56 E F1(2)184.37 E F3
(node_name[:ts] [property ...])108 668.4 Q F1(2)232 E F0 .397
(The node name is the network name of the node \(host name\).)72 680.4 R
.397(The optional)5.957 F F3(:ts)3.177 E F0 .397(appended to)3.177 F F1
(2)10 E F0 .123(the name indicates that the node is a timeshared node.)
72 692.4 R .122(Zero or more properties may be spec-)5.682 F F1(2)10 E
F0 7.515(i\214ed. Each)72 704.4 R 1.955
(item on the line must be separated by white space.)4.735 F 1.956
(Comment lines may be)7.516 F F1(2)10 E F0(included if the \214rst non-\
white space character is the pound sign '#'.)72 716.4 Q F1(2)132.54 E F0
(Chapt Revision: 1.173)72 768 Q(17)319.37 E EP
%%Page: 18 22
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 245.51(Con\214guration PBS)72 48 R
(Administrator Guide)2.78 E .877(This is the same format used by Mom in\
 earlier versions with the addition of the :ts suf\214x.)72 84 R/F1 10
/NewCenturySchlbk-Bold@0 SF(2)10 E F0
(The following is an example of a possible nodes \214le:)72 96 Q F1(2)
204.73 E/F2 10/Courier@0 SF 6(#T)108 108 S
(he first set of nodes are space shared \(cluster\) nodes.)-6 E F1(2)58
E F2 6(#N)108 120 S(ote that the properties are provided to group)-6 E
F1(2)118 E F2 6(#c)108 132 S(ertain nodes together.)-6 E F1(2)256 E F2
(curly stooge odd)108 144 Q F1(2)310 E F2 12(moe stooge)108 156 R(even)6
E F1(2)304 E F2(larry stooge even)108 168 Q F1(2)304 E F2
(harpo marx odd)108 180 Q F1(2)322 E F2(groucho marx odd)108 192 Q F1(2)
310 E F2(chico marx even)108 204 Q F1(2)316 E F2 6(#A)108 216 S
(nd for fun we throw in one timeshared node.)-6 E F1(2)130 E F2
(chaplin:ts)108 228 Q F1(2)346 E F0 .194(Unlike the prior NEEDNODE impl\
ementation where pbs_mom managed nodes, the node list)72 243.6 R F1(2)10
E F0 1.346
(used by the server cannot be modi\214ed while the server is up.)72
255.6 R 1.346(The actual node \214le is only)6.906 F F1(2)10 E F0 .07
(read by the server at start up.)72 267.6 R .07
(If you need to modify the list, edit it and shut down the server)5.63 F
F1(2)10 E F0(with)72 279.6 Q F2 1.125(qterm -t quick)3.905 F F0 6.685
(.A)C 1.125(ll running jobs will continue to run.)-6.685 F 1.124
(Then, immediately restart)9.464 F F1(2)10 E F0 1.198(the server)72
291.6 R 6.758(.T)-.74 G 1.199
(he server will read the modi\214ed \214le and have the new node list.)
-6.758 F 1.199(No running)6.759 F F1(2)10 E F0(jobs will be impacted.)72
303.6 Q F1(2)342.53 E 2.87(2.1.2. Where)72 327.6 R(Jobs May Be Run)2.87
E(2)284.42 E F0 .226(Where jobs may be or will be run is determined by \
an interaction between the Scheduler and)72 343.2 R F1(2)10 E F0
(the Server)72 355.2 Q 5.56(.T)-.74 G
(his interaction is effected by the existence of the)-5.56 E/F3 10
/NewCenturySchlbk-Italic@0 SF(nodes)2.78 E F0(\214le.)4.446 E F1(2)
106.804 E 2.87(2.1.2.1. No)72 379.2 R(Node File)2.87 E(2)334.97 E F0
1.933(If a nodes \214le does not exist, the server only directly knows \
about its own host.)72 394.8 R 1.934(It will)10.274 F F1(2)10 E F0 .54
(assume that jobs may be executed on it.)72 406.8 R .539
(When told to run a job without a speci\214c execution)6.099 F F1(2)10 E
F0 1.763(host named, it will default to its own host.)72 418.8 R 1.763
(Otherwise, it will attempt to execute the job)7.323 F F1(2)10 E F0
(where directed in the Run Job request.)72 430.8 Q F1(2)262.36 E 2.87
(2.1.2.2. Node)72 454.8 R(File Exists)2.87 E(2)317.75 E F0
(If a nodes \214le exists, then the following rules come into play)72
470.4 Q F1(2)165.49 E F0 8.88(1. If)97 486 R 3.735(as)3.735 G .954(peci\
\214c host is named in the Run Job request and the host is speci\214ed \
in the)-3.735 F F1(2)10 E F0 .238(nodes \214le as a)117 498 R F3
(timeshared)3.018 E F0 .239
(host, the Server will attempt to run the job on that host.)4.684 F F1
(2)10 E F0 8.88(2. If)97 513.6 R 3.043(as)3.043 G .263(peci\214c host i\
s named in the Run Job request and the named node is not in the)-3.043 F
F1(2)10 E F0 .122(nodes \214le as a timeshared host or if there are mul\
tiple nodes named in the Run Job)117 525.6 R F1(2)10 E F0 1.178
(request, then the Server attempts to allocate the named)117 537.6 R F3
(cluster)3.958 E F0 1.178(node or nodes to)5.624 F F1(2)10 E F0 .585
(the job.)117 549.6 R .586
(All of the named nodes must appear in the server)6.145 F 1.326 -.37
('s n).55 H .586(odes \214le.).37 F .586(If the allo-)6.146 F F1(2)10 E
F0(cation succeeds, the job is run directly on the \214rst of the nodes\
 allocated.)117 561.6 Q F1(2)62.54 E F0 8.88(3. If)97 577.2 R 1.701(no \
location was speci\214ed on the Run Job request, but the job requests n\
odes,)4.481 F F1(2)10 E F0 .578
(then cluster nodes which match the request are allocated if possible.)
117 589.2 R .579(If the alloca-)6.139 F F1(2)10 E F0 .243(tion succeeds\
, the job is run on the node allocated to match the \214rst speci\214ca\
tion in)117 601.2 R F1(2)10 E F0 .765(the node request.)117 613.2 R .765
(Note, the Scheduler may modify the job')6.325 F 3.545(so)-.37 G .765
(riginal node request,)-3.545 F F1(2)10 E F0(see the job attribute)117
625.2 Q F1(neednodes)2.78 E F0(.)A F1(2)243.09 E F0 8.88(4. Otherwise,)
97 640.8 R 8.159(as)10.939 G 5.378
(et of nodes to allocate is speci\214ed by a server attribute,)-8.159 F
F1(2)10 E(default_node)117 652.8 Q F0 5.627(.B)C 2.847(yd)-5.627 G .067
(efault, this is one shared node.)-2.847 F .068
(It may be set to any valid node)5.627 F F1(2)10 E F0
(request or any single timeshared node listed in the nodes \214le.)117
664.8 Q F1(2)113.08 E F0(What the above all means can be boiled down in\
to the following set of guidelines:)72 680.4 Q F1(2)68.04 E F0 13.94
<ad49>97 696 S 3.605(ft)-13.94 G .825(he batch system consists of a sin\
gle timeshared host, no problem \255 all the jobs)-3.605 F F1(2)10 E F0
(run there.)117 708 Q
(The scheduler only needs to say which job it wants run.)5.56 E F1(2)
88.46 E F0 316.59(18 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Page: 19 23
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Con\214guration)248.29 E .974(the various hosts is a matter of the sch\
eduler determining on which host to place)117 84 R/F1 10
/NewCenturySchlbk-Bold@0 SF(2)10 E F0 .631(the selected job.)117 96 R
.631(This is done by querying the resource monitor side of Mom using)
6.191 F F1(2)10 E F0 .295
(the resource monitor API - the addreq\(\) and getreq\(\) calls.)117 108
R .296(The Scheduler tells the)8.636 F F1(2)10 E F0
(server where to run each job.)117 120 Q F1(2)262.93 E F0 13.94<ad49>97
135.6 S 2.843(fy)-13.94 G .062(our cluster is running distributed jobs \
\(as well as serial jobs\), the Scheduler typ-)-2.843 F F1(2)10 E F0
.991(ically uses the)117 147.6 R/F2 10/NewCenturySchlbk-Italic@0 SF .991
(Query Resource)3.771 F F0(or)5.437 E F2 -.2(Av)3.771 G(ail).2 E F0 .992
(request to the server for each queued job)5.437 F F1(2)10 E F0 1.431
(under consideration.)117 159.6 R 1.431
(The Scheduler then selects one of the jobs that the Server)9.771 F F1
(2)10 E F0 .143
(replied could run, and directs that the job should be run.)117 171.6 R
.144(The Server will then allo-)5.704 F F1(2)10 E F0 .51
(cate the nodes to the job.)117 183.6 R .51
(By leaving the server attribute)6.07 F F1(default_node)3.29 E F0 .51
(set to one)3.29 F F1(2)10 E F0 .319(shared node,)117 195.6 R/F3 10
/Courier@0 SF(1#shared)3.099 E F0 3.099(,j)C .319
(obs which do not request nodes will be placed together on)-3.099 F F1
(2)10 E F0 2.78(af)117 207.6 S(ew nodes running shared jobs.)-2.78 E F1
(2)245.14 E F0 13.94<ad49>97 223.2 S 2.932(fy)-13.94 G .152(ou have a b\
atch system supporting both cluster nodes and one timeshared node,)
-2.932 F F1(2)10 E F0 .217
(the situation is like the above, only you may wish to change)117 235.2
R F1(default_node)2.997 E F0 .218(to point)2.998 F F1(2)10 E F0
(to the timeshared host.)117 247.2 Q F1(2)289.95 E F0 13.94<ad49>97
262.8 S 3.06(fy)-13.94 G .279(ou have a batch system supporting both cl\
uster nodes and multiple time shared)-3.06 F F1(2)10 E F0 3.839
(hosts, you)117 274.8 R 1.059
(have a complex system which requires a smart scheduler)3.839 F 6.62(.T)
-.74 G 1.06(he Sched-)-6.62 F F1(2)10 E F0 1.977
(uler must recognize which jobs request nodes and use the)117 286.8 R F2
-.2(Av)4.757 G(ail).2 E F0 1.977(request to the)6.423 F F1(2)10 E F0
(Server)117 298.8 Q 3.594(.I)-.74 G 3.594(tm)-3.594 G .814
(ust also recognize which jobs are to be load balanced among the time-)
-3.594 F F1(2)10 E F0 .63(shared hosts, and provide the host name to th\
e Server when directing that the job)117 310.8 R F1(2)10 E F0(be run.)
117 322.8 Q(The supplied)5.56 E F2(\214fo)2.78 E F0
(scheduler has this capability)4.446 E(.)-1.11 E F1(2)142.894 E 2.87
(2.1.3. Specifying)72 350.4 R 318.11(Nodes 2)2.87 F F0(The)72 366 Q F2
(nodes)4.011 E F0 1.232(resource is set by the user to declare the node\
 requirements for the job.)4.011 F 1.232(It is a)6.792 F F1(2)10 E F0
(string of the form)72 378 Q F1(2)361.08 E F3(node_spec[+node_spec...])
108 390 Q F1(2)262 E F0(where node_spec is)72 402 Q F1(2)353.67 E F3
(number | property[:property...] | number:property[:property...])108 414
Q F1(2)28 E F0 1.046(The node_spec may have an optional global modi\214\
er appended. This is of the form)72 426 R F3(#prop-)3.826 E F1(2)10 E F3
(erty)72 438 Q F0 5.56(.F)C(or example:)-5.56 E F1(2)349.28 E F3
(6+3:fat+2:fat:hippi+disk)108 450 Q F1(2)262 E F0(or)72 462 Q F1(2)
432.56 E F3(6+3:fat+2:fat:hippi+disk#prime.)108 474 Q F1(2)220 E F0 .523
(Where fat, hippi, and disk are examples of property names assigned by \
the administrator in)72 486 R F1(2)10 E F0 1.053(the `)72 498 R(`nodes')
-.18 E 3.833<278c>-.18 G 3.833(le. The)-3.833 F 1.053
(above example translates as the user requesting 6 plain nodes plus 3)
3.833 F F1(2)10 E F0 -.18(``)72 510 S(fat').18 E 4.136('n)-.18 G 1.356
(odes plus 2 nodes that are both `)-4.136 F(`fat')-.18 E 4.137('a)-.18 G
1.357(nd `)-4.137 F(`hippi')-.18 E 4.137('p)-.18 G 1.357(lus one `)
-4.137 F(`disk')-.18 E 4.137('n)-.18 G 1.357(ode, a total of 12)-4.137 F
F1(2)10 E F0 5.664(nodes. Where)72 522 R 2.883
(#prime is appended as a global modi\214er)5.663 F 5.663(,t)-.74 G 2.883
(he global property)-5.663 F 5.663(,`)-1.11 G(`prime')-5.843 E 5.663('i)
-.18 G(s)-5.663 E F1(2)10 E F0
(appended by the Server to each element of the spec.)72 534 Q
(It would be equivalent to)5.56 E F1(2)82.14 E F3
(6:prime+3:fat:prime+2:fat:hippi:prime+disk:prime.)108 546 Q F1(2)112 E
F0 3.469(Am)72 558 S .689
(ajor use of the global modi\214er is to provide the)-3.469 F F2(shared)
3.47 E F0 6.25(keyword. This)5.136 F .69(speci\214es that all)3.47 F F1
(2)10 E F0 .32(the nodes are to be shared nodes.)72 570 R .32
(The keyword shared is only recognized as such when used)5.88 F F1(2)10
E F0(as a global modi\214er)72 582 Q(.)-.74 E F1(2)349.75 E F0 -.71(Tw)
72 597.6 S 3.715(oa).71 G .935
(dditional Read-Only resources exist for jobs.)-3.715 F .935(They are)
6.495 F F2(nodect)3.715 E F0(and)3.715 E F2(neednodes)3.715 E F0 6.495
(.N)C(odect)-6.495 E F1(2)10 E F0 2.165(\(node count\) is set by the se\
rver to the integer number of nodes desired by the user as)72 609.6 R F1
(2)10 E F0 .98(declared in the `)72 621.6 R(`nodes')-.18 E 3.761('r)-.18
G .981(esource speci\214cation.)-3.761 F .981
(That declaration is parsed and the resulting)6.541 F F1(2)10 E F0 .434
(total number of nodes is set in nodect.)72 633.6 R .434
(This is useful when an administrator wishes to place)5.994 F F1(2)10 E
F0 1.93(an integer limit,)72 645.6 R F2(resources_min)4.71 E F0(or)6.376
E F2(resources_max)4.71 E F0 4.71(,o)1.666 G 4.711(nt)-4.71 G 1.931
(he number of nodes used by a job)-4.711 F F1(2)10 E F0
(entering a queue.)72 657.6 Q F1(2)361.25 E F0 .903
(Based on the above example, it would be set to 12 \(6+3+2+1\).)72 673.2
R .903(Neednodes is initially set by)6.463 F F1(2)10 E F0 .585
(the Server to the same value as nodes.)72 685.2 R .585
(Neednodes may be modi\214ed by the job scheduler for)6.145 F F1(2)10 E
F0 .535(special policies.)72 697.2 R .534(The contents of neednodes det\
ermines which nodes are actually assigned to)6.095 F F1(2)10 E F0
(the job.)72 709.2 Q
(Neednodes is visible to the administrator but not to the user)5.56 E(.)
-.74 E F1(2)121.39 E F0(Chapt Revision: 1.173)72 768 Q(19)319.37 E EP
%%Page: 20 24
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 245.51(Con\214guration PBS)72 48 R
(Administrator Guide)2.78 E .291
(If you wish to set up a queue default value for `)72 84 R(`nodes')-.18
E 3.072('\()-.18 G 3.072(av)-3.072 G .292
(alue to which the resource is set if)-3.072 F/F1 10
/NewCenturySchlbk-Bold@0 SF(2)10 E F0 1.86(the user does not supply one\
\), corresponding default values must be set for `)72 96 R(`nodect')-.18
E 4.64('a)-.18 G(nd)-4.64 E F1(2)10 E F0 -.18(``)72 108 S(neednodes').18
E 2.78('. For)-.18 F(example)2.78 E F1(2)319.93 E F0(Qmgr:)108 120 Q/F2
10/Courier@0 SF(set queue foo resources_default.nodes=1)6 E F1(2)136.74
E F0(Qmgr:)108 132 Q F2(set queue foo resources_default.nodect=1)6 E F1
(2)130.74 E F0(Qmgr:)108 144 Q F2
(set queue foo resources_default.neednodes=1)6 E F1(2)112.74 E F0
(Minimum and maximum limits are set for `)72 156 Q(`nodect')-.18 E 2.78
('o)-.18 G(nly)-2.78 E 5.56(.F)-1.11 G(or example:)-5.56 E F1(2)116.38 E
F0(Qmgr:)108 168 Q F2(set queue foo resources_min.nodect=1)6 E F1(2)
154.74 E F0(Qmgr:)108 180 Q F2(set queue foo resources_max.nodect=15)6 E
F1(2)148.74 E F0 .748(Minimum and maximum values must)72 192 R F1(not)
3.528 E F0 .748(be set for nodes or neednodes as those are string)3.528
F F1(2)10 E F0(values.)72 204 Q F1 2.87(2.2. Network)72 228 R(Addresses)
2.87 E F0 1.29(PBS makes use of fully quali\214ed host names for identi\
fying the jobs and their location.)72 243.6 R(A)6.85 E .307
(PBS batch system is known by the host name on which the server)72 255.6
R 3.088(,p)-.74 G(bs_server)-3.088 E 3.088(,i)-.74 G 3.088(sr)-3.088 G
3.088(unning. If)-3.088 F 1.24
(the server is started with an non-standard port number)72 267.6 R 4.019
(,s)-.74 G 1.239(ee -p option in the pbs_server\(8\))-4.019 F 1.745
(man page, the server `)72 279.6 R(`name')-.18 E 4.525('b)-.18 G(ecomes)
-4.525 E/F3 10/NewCenturySchlbk-Italic@0 SF(host_name.domain:port)4.525
E F0 4.525(,w)1.666 G 1.745(here port is the numeric)-4.525 F .088
(port number being used.)72 291.6 R .087(See the discussion of)5.647 F
F1 .087(Alternate T)2.867 F .087(est Systems)-.92 F F0 .087
(later in this section.)2.867 F .774(The three daemons and the commands\
 will attempt to use /etc/services to identify the stan-)72 307.2 R .094
(dard port numbers to use for communication.)72 319.2 R .094
(The port numbers need not be below the magic)5.654 F(1024 number)72
331.2 Q 5.56(.T)-.74 G
(he service names that should be added to /etc/services are)-5.56 E F2
60(pbs 15000/tcp)108 343.2 R(9)268 E 36(pbs_dis 15001/tcp)108 355.2 R(9)
268 E 36(pbs_mom 15002/tcp)108 367.2 R(15003/udp 15003/tcp)6 E(9)148 E
24(pbs_sched 15004/tcp)108 379.2 R(9)268 E F0 .215
(The numbers listed are the default number used by this version of PBS.)
72 391.2 R .215(If you change them,)5.775 F
(be careful to use the same numbers on all systems.)72 403.2 Q .353(If \
the services cannot be found in /etc/services, the PBS components will \
default to the above)72 418.8 R(listed numbers.)72 430.8 Q 1.696
(As of release 1.1.9, there is one additional port used.)72 446.4 R F3
(pbs_dis)7.257 E F0 1.697(is used for requests of the)6.143 F(2)10 E
1.187(server in the new)72 458.4 R F3 1.187(Data Is Strings)3.967 F F0
1.187(data encoding.)5.633 F 1.186
(When the ASN.1 encoding is completely)6.747 F(2)10 E 2.065
(removed, in release 2.0,)72 470.4 R 2.065
(port 15000 will no longer be needed.)7.625 F 2.066
(As of release 1.1.10, port)7.626 F(0)10 E .147(15003/tcp is used by pb\
s_mom for task management \(and alternately for scheduler communi-)72
482.4 R(0)10 E(cation\) as well as 15003/udp.)72 494.4 Q F1 2.87
(2.3. Starting)72 518.4 R(Daemons)2.87 E F0 .601
(All three of the daemon processes, Server)72 534 R 3.381(,S)-.74 G .602
(cheduler and MOM, must run with the real and)-3.381 F 2.055
(effective uid of root.)72 546 R -.52(Ty)7.615 G(pically).52 E 4.835(,t)
-1.11 G 2.055
(he daemons are started from the systems boot \214les, e.g.)-4.835 F
3.739(/etc/rc.local. However)72 558 R 3.739(,i)-.74 G 3.739(ti)-3.739 G
3.739(sr)-3.739 G .959(ecommended that the Server be brought up `)-3.739
F .96(`by hand')-.18 F 3.74('t)-.18 G .96(he \214rst)-3.74 F
(time and con\214gured before being run at boot time.)72 570 Q F1 2.87
(2.3.1. Starting)72 594 R(the Server)2.87 E F0 .379(The initial run of \
the Server or any \214rst time run after recreating the home directory \
should)72 609.6 R 2.568(be with the)72 621.6 R F2 2.568(-t create)5.348
F F0 8.128(option. This)5.348 F 2.568
(option directs the Server to create a new server)5.348 F 5.351
(database. If)72 633.6 R 2.571(one is already present, it is discarded \
after receiving a positive validation)5.351 F 3.391(response. At)72
645.6 R .611(this point it is necessary to con\214gure the Server)3.391
F 6.172(.S)-.74 G .612(ee the section 3.4.1)-6.172 F F1(Server)3.392 E
(Con\214guration)72 657.6 Q F0 5.652(.T)C .092
(he create option leaves the server in a `)-5.652 F(`idle')-.18 E 2.872
('s)-.18 G 2.872(tate. In)-2.872 F .092(this state the server)2.872 F
.959(will not contact the scheduler and jobs are not run, except manual\
ly via the qrun\(1B\) com-)72 669.6 R 4.582(mand. Once)72 681.6 R 1.802
(the server is up, it can be placed in the `)4.582 F(`active')-.18 E
4.582('s)-.18 G 1.801(tate by setting the server)-4.582 F(attribute)72
693.6 Q F2(scheduling)2.78 E F0(to a value of true:)2.78 E F2
(qmgr -c "set server scheduling=true")108 705.6 Q F0(The value of)72
717.6 Q F2(scheduling)2.78 E F0
(is retained across server terminations/starts.)2.78 E 316.59(20 Chapt)
72 768 R(Revision: 1.173)2.78 E EP
%%Page: 21 25
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Con\214guration)248.29 E .083
(After the server is con\214gured it may be placed into service.)72 84 R
.083(Normally it is started in the sys-)8.423 F .375(tem boot \214le.)72
96 R(The)5.935 E/F1 10/Courier@0 SF .375(-t start_type)3.155 F F0 .375
(option may be speci\214ed where)3.155 F F1(start_type)3.154 E F0 .374
(is one of the)3.154 F .886
(options speci\214ed in the ERS \(and the pbs_server man page\).)72 108
R .887(The default is)6.447 F F1(warm)3.667 E F0 6.447(.A)C(nother)
-6.447 E .416(useful option is the)72 120 R F1 .416(-a true|false)3.196
F F0 3.196(option. This)3.196 F .416
(turns on|off the invocation of the PBS job)3.196 F(scheduler)72 132 Q
(.)-.74 E/F2 10/NewCenturySchlbk-Bold@0 SF 2.87(2.3.2. Starting)72 156 R
(the Scheduler)2.87 E F0 .349
(The Scheduler should also be started at boot time.)72 171.6 R -.52(Ty)
5.909 G .35(pically the only required option for the).52 F .813
(BaSL based scheduler is the)72 183.6 R F1 .812(-r script_file)3.592 F
F0 .812(option specifying the script \214le.)3.592 F .812(For the T)
6.372 F(cl)-.81 E(based scheduler)72 195.6 Q 2.78(,t)-.74 G(he option)
-2.78 E F1(-b script_file)2.78 E F0(is used to specify the T)2.78 E
(cl script to be called.)-.81 E F2 2.87(2.3.3. Starting)72 219.6 R(MOM)
2.87 E F0 1.682(MOM should also be started at boot time.)72 235.2 R -.52
(Ty)7.243 G 1.683(pically there are no options unless MOM is).52 F .059
(being restarted on a running system or the pbs_sever or pbs_sched are \
running on a different)72 247.2 R(host.)72 259.2 Q .366(If MOM is taken\
 down and the host system continues to run, MOM should be restarted wit\
h)72 274.8 R(the)72 286.8 Q F1(-r)3.573 E F0 3.573(option. This)3.573 F
.793(directs MOM to kill off any jobs which were left running.)3.573 F
.793(See the ERS)6.353 F(for a full explanation.)72 298.8 Q 1.187(By de\
fault, MOM will only accept connections from a privileged port on her s\
ystem, either)72 314.4 R .677(the port associated with `)72 326.4 R
(`localhost')-.18 E 3.457('o)-.18 G 3.457(rt)-3.457 G .677
(he name returned by gethostname\(2\).)-3.457 F .677(If the server)
11.797 F 1.145(or scheduler are running on a different host, the host n\
ame\(s\) must be speci\214ed in MOM')72 338.4 R(s)-.37 E .427
(con\214guration \214le.)72 350.4 R .427(See the -c option on the pbs_m\
om\(8B\) man page and in the Admin Guide,)5.987 F .005(see sections)72
362.4 R F2 .005(2.5 3Con\214gurating the Execution Server)2.785 F 2.876
(,p)-.74 G(bs_mom)-2.876 E F0 .006(for more information on)2.786 F
(the con\214guration \214le.)72 374.4 Q .687(Should you wish to make us\
e of the prologue and/or epilogue script features, please see sec-)72
390 R(tion 6.2 `)72 402 Q(`Job Prologue/Epilogue Scripts".)-.18 E F2
2.87(2.4. Con\214guring)72 426 R(the Job Server)2.87 E 2.87(,p)-.74 G
(bs_server)-2.87 E F0 .415(Server management consist of con\214guring t\
he server attributes and establishing queues and)72 441.6 R 1.049
(their attributes.)72 453.6 R 1.049(Unlike Mom and the Job Scheduler)
6.609 F 3.828(,t)-.74 G 1.048(he Job Server \(pbs_server\) is con\214g-)
-3.828 F(2)10 E .922
(ured while it is running, except for the nodes \214le.)72 465.6 R .922
(Con\214guring server and queue attributes)6.482 F(9)10 E .093
(and creating queues is done with the qmgr\(1B\) command.)72 477.6 R
.092(This must be either as root or as a)5.652 F(9)10 E 1.059(User who \
has been granted PBS Manager privilege as shown in the last step in the)
72 489.6 R F2(Build)3.839 E F0(9)10 E F2(Overview)72 501.6 Q F0 1.173
(section of this guide.)3.953 F 1.173
(Exactly what needs to be set depends on your scheduling)6.733 F .634
(policy and how you chose to implement it.)72 513.6 R .635
(The system needs at least one queue established)6.195 F
(and certain server attributes initialized.)72 525.6 Q 1.006
(The server attributes are discussed in section 2.4 of the ERS.)72 541.2
R 1.006(The following are the `)6.566 F(`mini-)-.18 E .115
(mum required')72 553.2 R 2.895('s)-.18 G .116
(erver attributes and the recommended attributes.)-2.895 F .116
(For the sake of examples,)5.676 F .261
(we will assume that your site is a sub-domain of a large network.)72
565.2 R .26(All hosts at your site have)5.82 F(names of the form:)72
577.2 Q/F3 10/NewCenturySchlbk-Italic@0 SF(host)80.34 601.2 Q F2
(.foo.bar)A(.com)-.74 E F0
(and the batch system consists of a single large machine named)72 625.2
Q F2(big.foo.bar)2.78 E(.com)-.74 E F0(.)A F2 2.87(2.4.1. Server)72
649.2 R(Con\214guration)2.87 E F0 .836
(The following attributes are required or recommended.)72 664.8 R .836
(They are set via the)6.396 F F3 .837(set server)3.617 F F0 .837
(\(s s\))5.283 F(subcommand to the)72 676.8 Q F3(qmgr)2.78 E F0
(\(1B\) command.)1.666 E .781(Not all of the Server Attributes are disc\
ussed here, only what is needed to get a reasonable)72 692.4 R
(system up and running.)72 704.4 Q(See the)8.34 E F3
(pbs_server_attributes)2.78 E F0(man page for a complete list.)4.446 E
(Chapt Revision: 1.173)72 768 Q(21)319.37 E EP
%%Page: 22 26
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 245.51(Con\214guration PBS)72 48 R
(Administrator Guide)2.78 E/F1 10/NewCenturySchlbk-Bold@0 SF 2.87
(2.4.1.1. Required)72 84 R(Server Attributes)2.87 E/F2 9/Courier@0 SF
(default_queue)72 103.2 Q F0 .122(Declares the default queue to which j\
obs are submitted if a queue is not speci\214ed on the)97 115.2 R
(qsub\(1B\) command.)97 127.2 Q(The queue must be created \214rst.)5.56
E(Example:)5.56 E/F3 10/Courier@0 SF 6(cqd)133 139.2 S
(que queue_type=execution)-6 E 6(ssd)133 151.2 S(efault_queue=dque)-6 E
F1 2.87(2.4.1.2. Recommended)72 175.2 R(Server Attributes)2.87 E F2
(acl_hosts)72 194.4 Q F0 3.209(Al)97 206.4 S .429
(ist of hosts from which jobs may be submitted.)-3.209 F .429
(For example, if you wish to allow all)5.989 F 1.147(the systems on you\
r sub-domain plus one other host, boss, at headquarters to submit)97
218.4 R(jobs, then set:)97 230.4 Q F3 6(ssa)133 242.4 S
(cl_hosts=*.foo.bar.com,boss.hq.bar.com)-6 E F2(acl_host_enable)72 258 Q
F0(Enables the server host access control list, see above.)97 270 Q F3 6
(ssa)133 282 S(cl_host_enable=true)-6 E F2(managers)72 297.6 Q F0 .658(\
De\214nes which users, at a speci\214ed host, are granted batch system \
administrator privi-)97 309.6 R 4.582(lege. For)97 321.6 R 1.803
(example, to grant privilege to `)4.582 F(`me')-.18 E 4.583('a)-.18 G
4.583(ta)-4.583 G 1.803(ll systems on the sub-domain and)-4.583 F -.18
(``)97 333.6 S(sam').18 E 2.78('o)-.18 G
(nly from this system, big, then:)-2.78 E F3 6(ssm)133 345.6 S
(anagers=me@*.foo.bar.com,sam@big.foo.bar.com)-6 E F2(operators)72 361.2
Q F0 1.275(De\214nes which users, at a speci\214ed host, are granted ba\
tch system operator privilege.)97 373.2 R
(Speci\214ed as are the managers.)97 385.2 Q F2(resources_cost)72 400.8
Q F0 1.106(If you are planning to use the `)97 412.8 R 1.106
(`synchronous job starts')-.18 F 3.886('f)-.18 G 1.107
(eature across multiple execu-)-3.886 F .604(tion hosts, you may wish t\
o establish arbitrary costs for various resources on each sys-)97 424.8
R 2.78(tem. See)97 436.8 R(the ERS section on)2.78 E F1
(Synchronize Job Starts)2.78 E F0(\(section 3.2.2\).)2.78 E F2
(resources_defaults)72 452.4 Q F0 2.398(This attribute establishes the \
resource limits assigned to jobs that were submitted)97 464.4 R .63
(without a limit and for which there are no queue limits.)97 476.4 R .63
(It is important that a default)6.19 F(value be assigned for any resour\
ce requirement used in the scheduling policy)97 488.4 Q(.)-1.11 E F3 6
(ssr)133 500.4 S(esources_defaults.cput=5:00)-6 E 6(ssr)133 512.4 S
(esources_defaults.mem=4mb)-6 E F2(resources_max)72 528 Q F0 .155(This \
attribute sets the maximum amount of resources which can be used by a j\
ob enter)97 540 R(-)-.18 E .606(ing any queue on the server)97 552 R
8.945(.T)-.74 G .605
(his limit is checked only if there is not a queue speci\214c)-8.945 F
(resources_max attribute de\214ned for the speci\214c resource.)97 564 Q
F2(system_cost)72 579.6 Q F0(See resources_cost.)97 591.6 Q F1 2.87
(2.4.2. Queue)72 619.2 R(Con\214guration)2.87 E F0 1.04
(Each server must have at least one queue de\214ned.)72 634.8 R 1.041
(It may be either a routing queue or an)6.601 F(9)10 E .044
(execution queue.)72 646.8 R -.52(Ty)5.604 G .044(pically it will be an\
 execution queue; jobs cannot be executed while resid-).52 F(9)10 E
(ing in an routing queue.)72 658.8 Q(9)330.69 E .946(Queue attributes f\
all into three groups, those which are applicable to both types of queu\
es,)72 674.4 R(9)10 E .549(those applicable only to execution queues an\
d those applicable only to routing queues.)72 686.4 R .548(If an)6.108 F
(9)10 E -.18(``)72 698.4 S .421(execution queue only').18 F 3.202('a)
-.18 G .422(ttribute is set for a routing queue, or vice versa, it is s\
imply ignored)-3.202 F(9)10 E .39(by the system.)72 710.4 R(However)5.95
E 3.169(,a)-.74 G 3.169(st)-3.169 G .389
(his situation might indicate the administrator made a mistake,)-3.169 F
(9)10 E .202
(the Server will issue a warning message about the con\215ict.)72 722.4
R .202(The same message will be issued)5.762 F(9)10 E 316.59(22 Chapt)72
768 R(Revision: 1.173)2.78 E EP
%%Page: 23 27
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Con\214guration)248.29 E(if the queue type is changed and there are at\
tributes that do not apply to the new type.)72 84 Q(9)40.09 E .816(Not \
all of the Queue Attributes are discussed here, only what is needed to \
get a reasonable)72 99.6 R(9)10 E(system up and running.)72 111.6 Q
(See the)8.34 E/F1 10/NewCenturySchlbk-Italic@0 SF(pbs_queue_attributes)
2.78 E F0(man page for a complete list.)4.446 E/F2 10
/NewCenturySchlbk-Bold@0 SF 2.87(2.4.2.1. Required)72 135.6 R
(Attributes for All Queues)2.87 E/F3 9/Courier@0 SF(queue_type)72 154.8
Q F0 .644(Must be set to either)97 166.8 R/F4 10/Courier@0 SF(execution)
3.424 E F0(or)3.425 E F4(routing)3.425 E F0 .645(\(e or r will do\).)
3.425 F .645(The queue type must be)6.205 F .55
(set before the queue can be enabled.)97 178.8 R .55
(If the type con\215icts with certain attributes which)6.11 F
(are valid only for the other queue type,)97 190.8 Q
(the set request will be rejected by the server)5.56 E(.)-.74 E F4 6
(sqd)133 202.8 S(que queue_type=execution)-6 E F3(enabled)72 218.4 Q F0
(If set to true, jobs may be enqueued into the queue.)97 230.4 Q
(If false, jobs will not be accepted.)5.56 E F4 6(sqd)133 242.4 S
(que enabled=true)-6 E F3(started)72 258 Q F0 1.663(If set to true, job\
s in the queue will be processed, either routed by the server if the)97
270 R(queue is a routing queue or scheduled by the job scheduler if an \
execution queue.)97 282 Q F4 6(sqd)133 294 S(que started=true)-6 E F2
2.87(2.4.2.2. Required)72 321.6 R(Attributes for Routing Queues)2.87 E
F3(route_destinations)72 340.8 Q F0 .469(List the local queues or queue\
s at other server to which jobs in this routing queue may)97 352.8 R
(be sent.)97 364.8 Q(For example:)5.56 E F4 6(sqr)133 376.8 S
(outem route_destination=dque,overthere@another.foo.bar.com)-6 E F2 2.87
(2.4.2.3. Recommended)72 404.4 R(Attributes for All Queues)2.87 E F3
(resources_max)72 423.6 Q F0 .182(If you chose to have more than one ex\
ecution queue based on the size or type of job, you)97 435.6 R .269(may\
 wish to establish maximum and minimum values for various resource limi\
ts.)97 447.6 R(This)5.829 E 1.541
(will restrict which jobs may enter the queue.)97 459.6 R 4.322(Ar)7.101
G 1.542(outing queue can be established to)-4.322 F -.18(``)97 471.6 S
(feed').18 E 2.78('t)-.18 G(he execution queues and jobs will be distri\
buted by those limits automatically)-2.78 E(.)-1.11 E 4.017(Ar)97 487.2
S 1.236(esources_max value de\214ned for a speci\214c resource at the q\
ueue level will override)-4.017 F .124
(the same resource resources_max de\214ned at the server level.)97 499.2
R .124(Therefore, it is possible to)5.684 F .539(de\214ne a higher as w\
ell as a lower value for a queue limit than the server)97 511.2 R 1.279
-.37('s c).55 H(orrespond-).37 E .089(ing limit.)97 523.2 R .089(If the\
re is no maximum value declared for a resource type, there is no restri\
c-)5.649 F(tion on that resource.)97 535.2 Q(For example:)5.56 E F4 6
(sqd)133 547.2 S(que resource_max.cput=2:00:00)-6 E F0 .087(places a re\
striction that no job requesting more than 2 hours of cpu time will be \
allowed)97 559.2 R(in the queue.)97 571.2 Q
(There is no restriction on the memory)8.34 E(,)-1.11 E F2(mem)2.78 E F0
2.78(,l)C(imit a job may request.)-2.78 E F3(resources_min)72 586.8 Q F0
1.414(De\214nes the minimum value of resource limit speci\214ed by a jo\
b before the job will be)97 598.8 R(accepted into the queue.)97 610.8 Q
(If not set, there is no minimum restriction.)5.56 E F2 2.87
(2.4.2.4. Recommended)72 638.4 R(Attributes for Execution Queues)2.87 E
F3(resources_default)72 657.6 Q F0 .971(De\214nes a set of default valu\
es for jobs entering the queue that did not specify certain)97 669.6 R
.906(resource limits.)97 681.6 R .907(There is a)6.467 F .907
(corresponding server attribute which sets a default for all)6.467 F
(jobs.)97 693.6 Q .021(The limit for a speci\214c resource usage is est\
ablished by checking various job, queue, and)97 709.2 R .21
(server attributes.)97 721.2 R .211
(The following list shows the attributes and their order of precedence:)
5.77 F(Chapt Revision: 1.173)72 768 Q(23)319.37 E EP
%%Page: 24 28
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 245.51(Con\214guration PBS)72 48 R
(Administrator Guide)2.78 E 8.88(1. The)97 84 R
(job attribute Resource_List, i.e. what was requested by the user)2.78 E
(.)-.74 E 8.88(2. The)97 99.6 R(queue attribute resources_default.)2.78
E 8.88(3. The)97 115.2 R(server attribute resources_default.)2.78 E 8.88
(4. The)97 130.8 R(queue attribute resources_max.)2.78 E 8.88(5. The)97
146.4 R(server attribute resources_max.)2.78 E 15(*U)97 162 S .676
(nder Unicos, a user supplied value must be within the system')-15 F
3.456(sU)-.37 G .676(ser Data Base,)-3.456 F 2.229
(UDB, limit for the user)117 174 R 7.789(.I)-.74 G 5.009(ft)-7.789 G
2.23(he user does not supply a value, the lower of the)-5.009 F
(defaulted value from the above list and the UDB limit is used.)117 186
Q/F1 10/NewCenturySchlbk-Bold@0 SF(Please note, an)97 201.6 Q/F2 10
/NewCenturySchlbk-Italic@0 SF(unset)2.87 E F1
(resource limit for a job is treated as an)2.87 E F2(in\214nite)2.87 E
F1(limit)2.87 E F0(.)A F1 2.87(2.4.2.5. Selective)72 229.2 R
(Routing of Jobs into Queues)2.87 E F0(0)205.26 E 1.511
(Often it is desirable to route jobs to various queues on a server)72
244.8 R 4.291(,o)-.74 G 4.291(re)-4.291 G 1.511(ven between servers,)
-4.291 F(0)10 E .663(based on the resource requirements of the jobs.)72
256.8 R .663(The queue)6.223 F F2(resource_min)3.443 E F0(and)5.11 E F2
(resource_max)3.444 E F0(0)11.666 E 2.908
(attributes discussed above make this selective routing possible.)72
268.8 R 2.907(As an example, let us)8.467 F(0)10 E .677(assume you wish\
 to establish two execution queues, one for short jobs of less than 1 m\
inute)72 280.8 R(0)10 E 1.281
(cpu time, and the other for long running jobs of 1 minute or longer)72
292.8 R 6.841(.C)-.74 G 1.281(all them)-6.841 F F1(short)4.061 E F0 7.22
(and 0)4.061 F F1(long)72 304.8 Q F0 5.56(.A)C
(pply the resources_min and resources_max attribute as follows:)-5.56 E
(0)110.13 E/F3 10/Courier@0 SF(set queue short resources_max.cput=59)108
316.8 Q F0(0)184 E F3(set queue long)108 328.8 Q(resources_min.cput=60)
12 E F0(0)184 E .573(When a job is being enqueued, it')72 344.4 R 3.353
(sr)-.37 G .574
(equested resource list is tested against the queue limits:)-3.353 F(0)
10 E F3 1.129(resource_min <= job_requirement <= resource_max)72 356.4 R
F0 6.689(.I)C 3.909(ft)-6.689 G 1.129(he resource test fails, the)-3.909
F(0)10 E .807(job is not accepted into the queue.)72 368.4 R .808
(Hence, a job asking for 20 seconds of cpu time would be)6.368 F(0)10 E
1.637(accepted into queue)72 380.4 R F1(short)4.417 E F0 1.637
(but not into queue)4.417 F F1(long)4.417 E F0 7.197(.N)C 1.637
(ote, if the min and max limits are)-7.197 F(0)10 E
(equal, only that exact value will pass the test.)72 392.4 Q(0)230.09 E
-1.11(Yo)72 408 S 4.147(um)1.11 G 1.367(ay wish to set up a routing que\
ue to feed jobs into the queues with resource limits.)-4.147 F(0)10 E
(That will place the job into the appropriate queue.)72 420 Q
(For example:)5.56 E(0)143.98 E F3(create queue feed queue_type=routing)
108 432 Q F0(0)190 E F3(set queue feed route_destination="short,long")
108 444 Q F0(0)136 E F3(set server default_queue=feed)108 456 Q F0(0)232
E 2.78(Aj)72 468 S(ob will end up in either)-2.78 E F1(short)2.78 E F0
(or)2.78 E F1(long)2.78 E F0(depending on its cpu time request.)2.78 E
(0)91.97 E -1.11(Yo)72 483.6 S 2.96(us)1.11 G .18(hould always list the\
 destination queues in order of the most restrictive \214rst as the \
\214rst)-2.96 F(0)10 E 1.658(queue which meets the job')72 495.6 R 4.438
(sr)-.37 G 1.659
(equirements will be its destination \(assuming that queue is)-4.438 F
(0)10 E 2.78(enabled\). Extending)72 507.6 R
(the above example to three queues:)2.78 E(0)180.85 E F3
(set queue short resource_max.cput=59)108 519.6 Q F0(0)190 E F3
(set queue long)108 531.6 Q
(resource_min.cput=1:00,resource_max.cput=1:00:00)12 E F0(0)22 E F3
(create queue verylong queue_type=execution)108 543.6 Q F0(0)154 E F3
(set queue feed route_destination="short,long,verylong")108 555.6 Q F0
(0)82 E 3.257(Aj)72 567.6 S .477(ob asking for 20 minutes \(20:00\) of \
cpu time will be placed into queue)-3.257 F F1(long)3.256 E F0 6.036(.A)
C .476(job asking)-2.78 F(0)10 E
(for 1 hour and 10 minutes \(1:10:00\) will end up in queue)72 579.6 Q
F1(verylong)2.78 E F0(by default.)2.78 E(0)81.56 E .15
(One word of caution is required.)72 595.2 R .15
(If a job does not specify a resource list \(requirement\) for the)5.71
F(0)10 E .858(tested resource.)72 607.2 R .858(No test is made.)9.198 F
.857(In the above case, a job without a cpu time limit will be)6.417 F
(0)10 E .514(allowed into queue)72 619.2 R F1(short)3.294 E F0 6.074(.F)
C .514
(or this reason, together with the fact that an unset limit is con-)
-6.074 F(0)10 E(sidered to be an in\214nite limit, you may wish to add \
a default value to the queues.)72 631.2 Q(0)67.66 E F3
(set queue short resource_default.cput=40)108 643.2 Q F0(0)166 E 1.208(\
will see that a job without a cpu time speci\214cation is limited to 40\
 seconds if it enters the)72 655.2 R(0)10 E(short queue.)72 667.2 Q
(Be aware of two facts:)5.56 E(0)277.72 E 13.88(1. If)97 682.8 R 2.78
(ad)2.78 G(efault value is assigned, it is done so after the tests agai\
nst min and max.)-2.78 E(0)27.85 E 13.88(2. Default)97 698.4 R .172
(values assigned to a job from a queue)2.952 F F3(resource_default)2.953
E F0 .173(are not carried)2.953 F(0)10 E 1.718
(with the job if the job moves to another queue.)122 710.4 R 1.717
(Those resource limits becomes)7.277 F(0)10 E 1.532
(unset as when the job was speci\214ed.)122 722.4 R 1.533
(If the new queue speci\214es default values,)7.092 F(0)10 E 316.59
(24 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Page: 25 29
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Con\214guration)248.29 E
(those values are assigned to the job while it is in the new queue.)122
84 Q(0)95.09 E .38(Minimum and maximum queue limits work with numerical\
 valued resources, including time)72 99.6 R(0)10 E .127
(and size values.)72 111.6 R(Generally)8.467 E 2.907(,t)-1.11 G .127
(hey do not work with string valued resources because of charac-)-2.907
F(0)10 E .389(ter comparison order)72 123.6 R 5.949(.H)-.74 G(owever)
-5.949 E 3.169(,s)-.74 G .389
(etting the min and max to the same value to force an exact)-3.169 F(0)
10 E(match will work even for string valued resources.)72 135.6 Q
(For example,)5.56 E(0)148.09 E/F1 10/Courier@0 SF
(set queue big resource_max.arch=unicos8)108 147.6 Q F0(0)172 E F1
(set queue big resource_min.arch=unicos8)108 159.6 Q F0(0)172 E 2.134
(can be used to limit jobs entering queue)72 171.6 R/F2 10
/NewCenturySchlbk-Bold@0 SF(big)4.914 E F0 2.134(to those specifying)
4.914 F F1(arch=unicos8)4.914 E F0 7.694(.A)C 7.22(gain, 0)-7.694 F .072
(remember that if)72 183.6 R F1(arch)2.851 E F0 .071(is not speci\214ed\
 by the job, no test is performed and it will be accepted.)2.851 F F2
2.87(2.4.3. Recording)72 211.2 R(Server Con\214guration)2.87 E F0 1.144
(Should you wish to record the con\214guration of a server for re-use, \
you may used the)72 226.8 R/F3 10/NewCenturySchlbk-Italic@0 SF(print)
3.924 E F0(subcommand of)72 238.8 Q F2(qmgr)2.78 E F0 2.78(\(8B\). For)B
(example,)2.78 E F1(qmgr -c "print server" > /tmp/server.con)108 250.8 Q
F0 .184(will record in the \214le server)72 262.8 R .183
(.con the qmgr subcommands required to recreate the current con-)-.74 F
1.004(\214guration including the queues.)72 274.8 R 1.005
(The commands could be feed back into qmgr via standard)6.564 F(input:)
72 286.8 Q F1(qmgr < /tmp/server.con)108 298.8 Q F2 2.87
(2.5. Con\214guring)72 326.4 R(the Execution Server)2.87 E 2.87(,p)-.74
G(bs_mom)-2.87 E F0(2)190.52 E 1.224(Mom is con\214gured via a con\214g\
uration \214le which she reads at initialization time and when)72 342 R
(2)10 E .167(sent the SIGHUP signal.)72 354 R .167(This \214le is descr\
ibed in the pbs_mom\(8\) man page as well as in the)5.727 F(2)10 E
(following section.)72 366 Q(2)362.18 E .414
(If the -c option is not speci\214ed when mom is run, she will open)72
381.6 R F3(PBS_HOME/mom_priv/con-)3.194 E F0(2)10 E F3<8c67>72 393.6 Q
F0 .374(if it exists.)4.82 F .374
(If it does not, mom will continue anyway)8.714 F 5.934(.T)-1.11 G .374
(his \214le may be placed else where)-5.934 F(2)10 E(or given a differe\
nt name. In which case, pbs_mom must be started with the -c option.)72
405.6 Q(2)45.48 E 1.248(The \214le provides several types of run time i\
nformation to pbs_mom: static resource names)72 421.2 R(2)10 E .157(and\
 values, external resources provided by a program to be run on request \
via a shell escape,)72 433.2 R(2)10 E(and values to pass to internal se\
t up functions at initialization \(and re-initialization\).)72 445.2 Q
(2)48.79 E .299(Each item type is on a single line with the component p\
arts separated by white space.)72 460.8 R .299(If the)5.859 F(2)10 E
.899(line starts with a hash mark \(pound sign, #\), the line is consid\
ered to be a comment and is)72 472.8 R(2)10 E 400.51(skipped. 2)72 484.8
R F2 2.87(2.5.1. "Access)72 508.8 R(Control and Initialization V)2.87 E
(alues")-.92 E F0(2)196.09 E .653(An initialization value directive has\
 a name which starts with a dollar sign \($\) and must be)72 524.4 R(2)
10 E(known to MOM via an internal table.)72 536.4 Q
(Currently the entries in this table are:)5.56 E(2)86.57 E 393.85
(clienthost 2)72 552 R(A)97 564 Q F3($clienthost)4.027 E F0 1.248(entry\
 causes a host name to be added to the list of hosts which will be)5.693
F(2)10 E 1.056
(allowed to connect to MOM as long as they are using a privileged port.)
97 576 R 1.056(For example,)6.616 F(2)10 E 1.475(here are two con\214gu\
ration \214le lines which will allow the hosts "fred" and "wilma" to)97
588 R(2)10 E 376.45(connect: 2)97 600 R F1 30($clienthost fred)133 612 R
F0(2)255 E F1 30($clienthost wilma)133 624 R F0(2)249 E -.71(Tw)97 636 S
3.852(oh).71 G 1.072(ost names are always allowed to connect to pbs_mom\
, "localhost" and the name)-3.852 F(2)10 E .236
(returned to pbs_mom by the system call gethostname\(\).)97 648 R .236
(These names need not be spec-)5.796 F(2)10 E .874
(i\214ed in the con\214guration \214le.)97 660 R .873
(The hosts listed as "clienthosts" comprise a "sisterhood")6.433 F(2)10
E .753(of hosts.)97 672 R .753(Any one of the sisterhood will accept co\
nnections from a scheduler [Resource)6.313 F(2)10 E .055(Monitor \(RM\)\
 requests] or server [jobs to execute] from within the sisterhood.)97
684 R .054(They will)5.614 F(2)10 E .675
(also accept Internal MOM \(IM\) messages from within the sisterhood.)97
696 R .675(For a sisterhood)6.235 F(2)10 E .156
(to be able to communicate IM messages to each other)97 708 R 2.936(,t)
-.74 G .156(hey must all share the same RM)-2.936 F(2)10 E 392.37
(port. 2)97 720 R(Chapt Revision: 1.173)72 768 Q(25)319.37 E EP
%%Page: 26 30
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 245.51(Con\214guration PBS)72 48 R
(Administrator Guide)2.78 E 1.015(For a scheduler to be able to query r\
esource information from a Mom, the scheduler)97 84 R 7.96 -.37('s 2).55
H(host must be listed as a)97 96 Q/F1 10/NewCenturySchlbk-Italic@0 SF
(clienthost)2.78 E F0 256.614(.2)1.666 G .585
(If the Server is provided with a nodes \214le,)97 111.6 R .584
(the IP addresses of the hosts \(nodes\) in the)6.145 F(2)10 E 1.553(\
\214le will be forwarded by the Server to the Mom on each host listed i\
n the node \214le.)97 123.6 R(2)10 E 1.093
(These hosts need not be in the various Mom')97 135.6 R 3.873(sc)-.37 G
1.092(on\214guration \214le as they will be added)-3.873 F(2)10 E .921
(internally when the list is received from the Server)97 147.6 R 6.482
(.T)-.74 G .922(he Server)-6.482 F 1.662 -.37('s h).55 H .922
(ost must be either).37 F(2)10 E(the same host as the Mom or be listed \
as a clienthost entry in each Mom')97 159.6 Q 2.78(sc)-.37 G
(on\214g \214le.)-2.78 E(2)26.95 E 394.6(restricted 2)72 175.2 R(A)97
187.2 Q F1($restricted)3.561 E F0 .78(host entry causes a host name to \
be added to the list of hosts which will)5.227 F(2)10 E .801
(be allowed to connect to MOM without needing to use a privilaged port.)
97 199.2 R .801(These names)6.361 F(2)10 E 1.162
(allow for wildcard matching.)97 211.2 R 1.161
(For example, here is a con\214guration \214le line which will)6.722 F
(2)10 E(allow queries from any host from the domain "ibm.com".)97 223.2
Q(2)157.52 E/F2 10/Courier@0 SF 30($restricted *.ibm.com)133 235.2 R F0
(2)225 E .295(Connections from the speci\214ed hosts are restricted in \
that only internal queries may be)97 247.2 R(2)10 E 3.826(made. No)97
259.2 R 1.045(resources from a con\214g \214le will be reported and no \
control requests can be)3.826 F(2)10 E 2.78(issued. This)97 271.2 R
(is to prevent any shell commands from being run by a non-root process.)
2.78 E(2)26.6 E .516(This type of entry is typically used to specify ho\
sts on which a monitoring tool, such as)97 286.8 R(2)10 E
(xpbsmon, can be run.)97 298.8 Q
(Xpbsmon will query Mom for general resource information.)8.34 E(2)36.79
E 400.33(logevent 2)72 314.4 R(A)97 326.4 Q F1($logevent)5.211 E F0 2.43
(entry sets the mask that determines which event types are logged by)
6.877 F(2)10 E 2.78(pbs_mom. For)97 338.4 R 301.79(example: 2)2.78 F F2
($logevent 0x1ff)133 350.4 Q F0(2)291 E F2($logevent 255)133 374.4 Q F0
(2)303 E .684
(The \214rst example would set the log event mask to 0x1ff \(51)97 390 R
.684(1\) which enables logging of)-.55 F(2)10 E 1.66
(all events including debug events.)97 402 R 1.659
(The second example would set the mask to 0x0ff)7.219 F(2)10 E .839
(\(255\) which enables all events except debug events.)97 414 R .84
(The values of events are listed in)6.399 F(2)10 E(chapter 6.3 `)97 426
Q(`Use and Maintenace of Logs')-.18 E 223.99('2)-.18 G(of this guide.)
99.78 438 Q(2)354.4 E 397(cputmult 2)72 453.6 R(A)97 465.6 Q F1
($cputmult)3.157 E F0 .377
(entry sets a factor used to adjust cpu time used by a job.)4.823 F .376
(This is provided)5.936 F(2)10 E 1.464(to allow adjustment of time char\
ged and limits enforced where the job might run on)97 477.6 R(2)10 E
1.032(systems with different cpu performance.)97 489.6 R 1.032(If Mom')
6.592 F 3.812(ss)-.37 G 1.031(ystem is faster than the reference)-3.812
F(2)10 E 1.051
(system, set cputmult to a decimal value greater than 1.0.)97 501.6 R
1.051(If Mom')9.391 F 3.831(ss)-.37 G 1.051(ystem is slower)-3.831 F 10
(,2)-.74 G(set cputmult to a value between 1.0 and 0.0.)97 513.6 Q
(The value is given by)5.56 E(2)109.69 E F2
(value = speed_of_this_system / speed_of_reference_system)133 525.6 Q F0
(2)45 E(For example:)97 537.6 Q(2)356.62 E F2($cputmult 1.5)133 549.6 Q
F0(2)303 E F2($cputmult 0.75)133 573.6 Q F0(2)297 E 397.54(wallmult 2)72
589.2 R 3.809(A$)97 601.2 S 1.028(wallmult entry sets a factor used to \
adjust wall time usage by to job to a common)-3.809 F(2)10 E 1.176
(reference system.)97 613.2 R 1.176
(The factor is used for walltime calculations and limits in the same)
6.736 F(2)10 E(way as cputmult is used for cpu time.)97 625.2 Q(2)244.39
E/F3 10/NewCenturySchlbk-Bold@0 SF 2.87(2.5.2. "Static)72 649.2 R
(Resources")2.87 E F0(2)317.27 E 2.902(For static resource names and va\
lues, the con\214guration \214le contains a list of resource)72 664.8 R
(2)10 E 1.712
(name/value pairs, one pair per line and separated by white space.)72
676.8 R 1.713(An Example of static)10.052 F(2)10 E .17(resource names a\
nd values could be the number of tape drives of different types and cou\
ld be)72 688.8 R(2)10 E(speci\214ed by)72 700.8 Q(2)388.48 E F2 30
(tape3480 4)108 712.8 R F0(2)316 E 316.59(26 Chapt)72 768 R
(Revision: 1.173)2.78 E EP
%%Page: 27 31
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Con\214guration)248.29 E/F1 10/Courier@0 SF 30(tape3420 2)108 84 R F0
(2)316 E F1 36(tapedat 1)108 108 R F0(2)316 E F1 36(tape8mm 1)108 132 R
F0(2)316 E 1.938
(The names can be anything and are not restricted to actual hardware.)72
144 R 1.938(For example the)7.498 F(2)10 E(entry)72 156 Q F1 6.772
(pong 1)3.552 F F0 .772(could be used to indicate to the scheduler that\
 a certain piece of software is)3.552 F(2)10 E
(available on this system.)72 168 Q(2)327.52 E/F2 10
/NewCenturySchlbk-Bold@0 SF 2.87(2.5.3. "Shell)72 192 R(Commands")2.87 E
F0(2)317.09 E .006(If the \214rst character of the value portion of a n\
ame/value pair is the exclamation mark \(!\), the)72 207.6 R(2)10 E .344
(entire rest of the line is saved to be executed through the services o\
f the)72 219.6 R F2(system)3.123 E F0 .343(\(3\) standard)B(2)10 E .564
(library routine.)72 231.6 R .564(The \214rst line of output from the s\
hell command is returned as the response)6.124 F(2)10 E
(to the resource query)72 243.6 Q 342.56(.2)-1.11 G .538(The shell esca\
pe provides a means for the resource monitor to yield arbitrary informa\
tion to)72 259.2 R(2)10 E .535(the scheduler)72 271.2 R 6.095(.P)-.74 G
.536(arameter substitution is done such that the value of any quali\214\
er sent with)-6.095 F(2)10 E .723(the resource query)72 283.2 R 3.503
(,a)-1.11 G 3.503(se)-3.503 G .723(xplained below)-3.503 F 3.503(,r)-.92
G .722(eplaces a token with a percent sign \(%\) followed by)-3.503 F(2)
10 E 2.759(the name of the quali\214er)72 295.2 R 8.319(.F)-.74 G 2.759
(or example, here is a con\214guration \214le line which gives a)-8.319
F(2)10 E(resource name of "escape":)72 307.2 Q(2)319.78 E F1 24
(escape !echo)108 319.2 R(%xxx %yyy)6 E F0(2)250 E .239(If a query for \
"escape" is sent with no quali\214ers, the command executed would be "e\
cho %xxx)72 331.2 R(2)10 E 2.993(%yyy". If)72 343.2 R .213(one quali\
\214er is sent, "escape[xxx=hi there]", the command executed would be "\
echo)2.993 F(2)10 E 1.639(hi there %yyy".)72 355.2 R 1.638(If two quali\
\214ers are sent, "escape[xxx=hi][yyy=there]", the command exe-)7.198 F
(2)10 E .223(cuted would be "echo hi there".)72 367.2 R .224
(If a quali\214er is sent with no matching token in the command)5.783 F
(2)10 E(line, "escape[zzz=snafu]", an error is reported.)72 379.2 Q(2)
229.29 E 3.482(Ap)72 394.8 S .701(ossible use of the shell command con\
\214guration entry is to provide a means by which the)-3.482 F(2)10 E
1.117(use of \215oating software licenses may be tracked.)72 406.8 R
1.118(If a program can be written to query the)6.677 F(2)10 E .424
(license server)72 418.8 R 3.204(,t)-.74 G .424(he number of available \
licenses could be returned to tell the scheduler if it is)-3.204 F(2)10
E 1.083(possible to run a job that needs a certain licensed package.)72
430.8 R([Y)6.644 E 1.084(ou get the fun and games of)-1.11 F(2)10 E
(writing this program.])72 442.8 Q(2)339.22 E F2 2.87
(2.6. Con\214gurating)72 470.4 R(the Scheduler)2.87 E 2.87(,p)-.74 G
(bs_sched)-2.87 E F0(2)213.19 E .686(The con\214guration required for a\
 scheduler depends on the scheduler itself.)72 486 R .685
(If you are start-)6.245 F(2)10 E .283(ing with the delivered)72 498 R
/F3 10/NewCenturySchlbk-Italic@0 SF(\214fo)3.064 E F0(scheduler)4.73 E
3.064(,p)-.74 G .284(lease jump ahead to section 4.5.1 `)-3.064 F .284
(`FIFO Scheduler)-.18 F .644 -.18('' i).55 H 10(n2).18 G(this guide.)72
510 Q(2)393.29 E F2 2.87(2.7. Alternate)72 534 R -.92(Te)2.87 G
(st Systems).92 E F0(2)300.51 E .448(Alternate or test copies of the va\
rious daemons may be run through the use of the command)72 549.6 R(2)10
E .115(line options which set their home directory and service port.)72
561.6 R .115(For example, the following com-)5.675 F(2)10 E .308
(mands would start the three daemons with a home directory of)72 573.6 R
F1(/tmp/altpbs)3.088 E F0 .307(and four ports)3.088 F(2)10 E
(around 13000.)72 585.6 Q(2)375.68 E F1
(pbs_server -t create -d /tmp/altpbs -p 13000 -M 13002)108 601.2 Q
(-S 13004)12 E F0(2)28 E F1
(pbs_mom -d /tmp/altpbs -M 13002 -R 13003 -T 13005)108 613.2 Q F0(2)112
E F1(pbs_sched -d /tmp/altpbs -S 13004 -r script_file)108 625.2 Q F0(2)
118 E 7.416(The home directories must be pre-built.)72 640.8 R 7.416
(The easiest method is to alter the)12.976 F(2)10 E F2(PBS_SER)72 652.8
Q(VER_HOME)-.37 E F0 2.468(variable by use of the)5.248 F F1
(--set-server-home)5.248 E F0 2.467(option to con\214gure,)5.248 F(2)10
E(rerun con\214gure and remake PBS.)72 664.8 Q(2)287 E .649
(Jobs may be directed to the test system by using the)72 680.4 R F1
(server:port)3.429 E F0 .649(syntax on the -q option.)3.429 F(2)10 E
.779(Status is also obtained using the)72 692.4 R F1(:port)3.559 E F0
.779(syntax: For example, to submit a job to the default)3.559 F(2)10 E
.114(queue on the above test server)72 704.4 R 2.895(,r)-.74 G .115
(equest the status of the test server)-2.895 F 2.895(,a)-.74 G .115
(nd request the status of)-2.895 F(2)10 E(jobs at the test server:)72
716.4 Q(2)339.21 E F1(qsub -q @)108 728.4 Q F0(host)A F1(:13000 job)A F0
(2)272.37 E(Chapt Revision: 1.173)72 768 Q(27)319.37 E EP
%%Page: 28 32
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 245.51(Con\214guration PBS)72 48 R
(Administrator Guide)2.78 E/F1 10/Courier@0 SF(qstat -Bf)108 84 Q F0
(host)6 E F1(:13000)A F0(2)290.37 E F1(qstat @)108 96 Q F0(host)A F1
(:13000)A F0(2)308.37 E .414(If you or users are using job dependencies\
 on or between test systems, there are minor prob-)72 111.6 R(2)10 E
1.72(lems of which you \(and the users\) need to be aware.)72 123.6 R
1.72(The syntax of both the dependency)7.28 F(2)10 E(string,)72 135.6 Q
F1(depend_type:job_id:job_id)4.093 E F0 1.313(and the job id)4.093 F F1
(seq_number.host:port)4.092 E F0 1.312(use colons)4.092 F(2)10 E .728
(in an indistinguishable manner)72 147.6 R 6.288(.T)-.74 G .728
(he way to work around this is covered in the)-6.288 F/F2 10
/NewCenturySchlbk-Bold@0 SF .728(Advice for)3.508 F F0(2)10 E F2(Users)
72 159.6 Q F0(section at the end of this guide.)2.78 E(2)265.5 E F2 2.87
(2.8. Installing)72 183.6 R(an Updated Batch System)2.87 E F0(2)232 E
.242(Once you have a running batch system, there will come a time when \
you wish to update it or)72 199.2 R(2)10 E 1.485(install a new version.)
72 211.2 R 1.485
(It is assumed that you will wish to build and test the new version)
7.045 F(2)10 E 1.198
(using alternative directories and port numbers described above.)72
223.2 R -1.11(Yo)6.757 G 3.977(um)1.11 G 1.197(ay change the loca-)
-3.977 F(2)10 E .019(tion of PBS_SER)72 235.2 R .019
(VER_HOME for the test version, see con\214gure option)-.37 F F1
(--set-server-home)2.799 E F0 10(.2)C .781
(Once you are satis\214ed with the new system, it is suggested that you)
72 247.2 R .781(rebuild the three dae-)6.341 F(2)10 E 1.522
(mons with PBS_SER)72 259.2 R 1.523
(VER_HOME set to directory which will be used in normal operation.)-.37
F(2)10 E(Otherwise you will always have to use the -d option when start\
ing the daemons.)72 271.2 Q(2)71.94 E 1.367(When the new batch system i\
s ready to be placed into service, you will wish to move jobs)72 286.8 R
(2)10 E .933(from the old system to the new)72 298.8 R 6.493(.T)-.92 G
.933(he following procedure is suggested.)-6.493 F .934
(All servers must be)6.494 F(2)10 E 2.322(run by root.)72 310.8 R 2.321
(The qmgr and qmove commands should be run by an batch administrator)
7.882 F(2)10 E(\(likely)72 322.8 Q 2.78(,r)-1.11 G(oot is good\).)-2.78
E(2)349.58 E 13.88(1. W)72 338.4 R .891(ith the old batch system runnin\
g, disable the queues and stop scheduling by setting)-.37 F(2)10 E -.18
(``)97 350.4 S(scheduling=false').18 E 326.1('. 2)-.18 F 13.88
(2. Backup)72 366 R 1.401(the pool of jobs in PBS_SER)4.182 F 4.181
(VER_HOME\(old\)/server_priv/jobs. T)-.37 F 1.401(ar may used)-.62 F(2)
10 E(for this.)97 378 Q(2)380.89 E .305(Assuming the change is a minor \
update \(change in third digit of the release version number\))72 393.6
R(2)10 E .24(or a local change where the job structure did not change f\
rom the old version to the new)72 405.6 R 3.02(,i)-.92 G 3.02(ti)-3.02 G
10(s2)-3.02 G .354(likely that you could start the new system in the ol\
d HOME and all jobs would be recovered.)72 417.6 R(2)10 E .323
(However if the job structure has changed you will need to)72 429.6 R/F3
10/NewCenturySchlbk-Italic@0 SF(move)3.103 E F0 .323
(the jobs from the old system)4.769 F(2)10 E .561(to the new)72 441.6 R
6.121(.T)-.92 G .561(he release notes will contain a warning if the job\
 structure has changed or the)-6.121 F(2)10 E
(move is required for other reasons.)72 453.6 Q(2)281.26 E 1.84 -.92
(To m)72 469.2 T(ove the jobs, continue with the following steps:).92 E
(2)204.37 E 13.88(3. It)72 484.8 R 1.074(is likely that PBS_SER)3.854 F
1.073(VER_HOME will have changed and have been made during)-.37 F(2)10 E
11.813(testing. If)97 496.8 R 9.033
(not, build a \(temporary\) server directory tree by changing)11.813 F
(2)10 E(PBS_SER)97 508.8 Q 1.832(VER_HOME using --set-server)-.37 F
1.832(-home and typing)-.18 F F1(buildutils/pbs_mkdirs)4.612 E F0(2)10 E
F1(server)97 520.8 Q F0(in the top of the object tree.)2.78 E(2)251.36 E
13.88(4. Start)72 536.4 R .323(the new PBS server in its new home.)3.103
F .324(If the new home is different from the direc-)5.884 F(2)10 E 1.314
(tory when it was compiled, use the -d option.)97 548.4 R 1.313
(Use the -t option if the server has not)6.874 F(2)10 E .776
(been con\214gured for the new directory)97 560.4 R 6.336(.A)-1.11 G
.777(lso start with an alternative port using the -p)-6.336 F(2)10 E
2.78(option. T)97 572.4 R
(urn off attempts to schedule with the -a option:)-.71 E(2)156.2 E F1
(pbs_server -t create -d)133 584.4 Q F0(new_home)6 E F1
(-p 13000 -a false)6 E F0(2)80.11 E(Remember)97 596.4 Q 2.78(,y)-.74 G
(ou will need to use the)-2.78 E F1(:port)2.78 E F0
(syntax when commanding the new server)2.78 E 23.63(.2)-.74 G 13.88
(5. Duplicate)72 612 R 1.369(on the new server the current queues and s\
erver attributes \(assuming you)4.15 F(2)10 E(wish to do so\).)97 624 Q
(Enable each queue which will receive jobs at the new server)5.56 E
67.14(.2)-.74 G F1(qmgr -c "print server" >)133 636 Q F0 177.11
(/tmp/con\214g 2)6 F F1(qmgr)133 648 Q F0(host)6 E F1 6(:13000 <)B F0
217.48(/tmp/con\214g 2)6 F F1(qenable)133 660 Q F0(queue1)6 E F1(@)A F0
(host)A F1(:13000)A F0(2)238.03 E F1(qenable)133 672 Q F0(queue2)6 E F1
(@)A F0(host)A F1(:13000)A F0(2)238.03 E 13.88(6. Now)72 687.6 R .013(l\
ist the jobs at the original server and move a few jobs one at a time f\
rom the old to)2.793 F(2)10 E(the new server:)97 699.6 Q(2)345.89 E F1
(qstat)133 711.6 Q F0(2)351 E F1(qmove)133 723.6 Q F0(queue)6 E F1(@)A
F0(host)A F1(:13000)A F0 233.29(job 2)6 F 316.59(28 Chapt)72 768 R
(Revision: 1.173)2.78 E EP
%%Page: 29 33
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Con\214guration)248.29 E/F1 10/Courier@0 SF(qstat @)133 84 Q F0(host)A
F1(:13000)A F0(2)283.37 E
(If all is going well, move the remaining jobs a queue at a time:)97 96
Q(2)129.71 E F1(qmove)133 108 Q F0(queue1)6 E F1(@)A F0(host)A F1
(:13000 `qselect -q)A F0(queue1)A F1(`)A F0(2)138.69 E F1(qstat)133 120
Q F0(queue1)6 E F1(@)A F0(host)A F1(:13000)A F0(2)250.03 E F1(qmove)133
132 Q F0(queue2)6 E F1(@)A F0(host)A F1(:13000 `qselect -q)A F0(queue2)A
F1(`)A F0(2)138.69 E F1(qstat)133 144 Q F0(queue2)6 E F1(@)A F0(host)A
F1(:13000)A F0(2)250.03 E 13.88(7. At)72 159.6 R .099(this point, all o\
f the jobs should be under control of the new server and located in the)
2.879 F(2)10 E .515(new server home.)97 171.6 R .515
(If the new server home is a temporary directory)6.075 F 3.296(,s)-1.11
G .516(hut down the new)-3.296 F(2)10 E
(server and move everything to the real home using)97 183.6 Q(2)181.99 E
F1(cp -R)133 195.6 Q F0(new_home real_home)6 E(2)245.18 E(or)97 207.6 Q
2.78(,i)-.74 G 2.78(ft)-2.78 G(he real \(new\) home is already set up,)
-2.78 E(2)219.57 E F1(cd)133 219.6 Q F0(new_home)6 E F1
(/server_priv/jobs)A F0(2)212.11 E F1(cp *)133 231.6 Q F0(real_home)6 E
F1(/server_priv/jobs)A F0(2)200.85 E(to copy just the jobs.)97 243.6 Q
(2)322.92 E(At this point, you are ready to bring up and enable the new\
 batch system.)72 259.2 Q(2)102.13 E -1.11(Yo)72 274.8 S 2.805(us)1.11 G
.024(hould be aware of one quirk when using qmove.)-2.805 F .024
(If you wish to move a job from a server)8.364 F(2)10 E .956(running on\
 a test port to the server running on the normal port \(15000\), you ma\
y attempt,)72 286.8 R(2)10 E/F2 10/NewCenturySchlbk-Italic@0 SF
(unsuccessfully)72 298.8 Q F0 2.78(,t)1.666 G 2.78(ou)-2.78 G
(se the following command:)-2.78 E(2)228.504 E F1(qmove)108 310.8 Q F0
(queue@host)6 E F1(123.job.)6 E F0(host)A F1(:13000)A F0(2)205.59 E
(However)72 322.8 Q 4.277(,t)-.74 G 1.497
(hat will only move the job to the end of the queue it is already in.)
-4.277 F 1.496(The server)7.056 F(2)10 E .534(receiving the move reques\
t \(13000\), will compare the destination server name, host, with its)72
334.8 R(2)10 E 1.738(own name only)72 346.8 R 4.517(,n)-1.11 G 1.737
(ot including the port.)-4.517 F 1.737
(Hence it will match and it will not send the job)10.077 F(2)10 E 1.292
(where you intended.)72 358.8 R 3.132 -.92(To g)6.852 H 1.292
(et the job to move to the server running on the normal port you).92 F
(2)10 E(have to specify that port in the destination:)72 370.8 Q(2)
242.16 E F1(qmove)108 382.8 Q F0(queue@host)6 E F1(:15000 123.job.)A F0
(host)A F1(:13000)A F0(2)169.59 E/F3 10/NewCenturySchlbk-Bold@0 SF(3.)72
410.4 Q/F4 12/NewCenturySchlbk-Bold@0 SF(Scheduling Policies)5.74 E F0
(2)304.968 E .034(PBS provides a separate process to schedule which job\
s should be placed into execution.)72 426 R 7.22(This 2)5.594 F 1.339(i\
s a \215exible mechanism by which you may implement a very wide variety\
 of policies.)72 438 R 7.22(The 2)6.899 F .166(scheduler uses the stand\
ard PBS API to communicate with the Server and an additional API)72 450
R(2)10 E .584(to communicate with the PBS resource monitor)72 462 R(,)
-.74 E F3(pbs_mom)3.365 E F0 6.145(.S)C .585
(hould the provided schedulers)-6.145 F(2)10 E .563
(be insuf\214cient to meet your site')72 474 R 3.343(sn)-.37 G .563
(eeds, it is possible to implement a replacement scheduler)-3.343 F(2)10
E(using the APIs to accomplish your heart')72 486 Q 2.78(sd)-.37 G
209.21(esires. 2)-2.78 F 1.224(The \214rst generation batch system, NQS\
, and many of the other batch systems use various)72 501.6 R(2)10 E .424
(queue based controls to limit or schedule jobs.)72 513.6 R .424
(Queues would be turned on and off to control)5.984 F(2)10 E(job orderi\
ng over time or have a limit of the number of running jobs in the queue\
.)72 525.6 Q(2)66.6 E 2.457
(While PBS supports multiple queues and the queues have some of the `)72
541.2 R 2.457(`job scheduling')-.18 F 10('2)-.18 G .401(attributes used\
 by other batch systems, the PBS Server does not by itself run jobs or \
enforce)72 553.2 R(2)10 E .192
(any of the restrictions implied by these queue attributes.)72 565.2 R
.192(In fact, the Server will happily run)5.752 F(2)10 E(a)72 577.2 Q F2
(held)3.361 E F0 .581(job that resides in a)5.027 F F2(stopped)3.361 E
F0 .581(queue with a zero limit on running jobs, if it is directed)5.027
F(2)10 E .242(to do so.)72 589.2 R .243
(The direction may come from the operator)5.802 F 3.023(,a)-.74 G
(dministrator)-3.023 E 3.023(,o)-.74 G 3.023(rt)-3.023 G .243
(he Scheduler)-3.023 F 5.803(.I)-.74 G 3.023(nf)-5.803 G 7.22(act, 2)
-3.023 F(the Scheduler is nothing more than a client with administratio\
n privilege.)72 601.2 Q(2)99.74 E .308(If you chose to implement your s\
ite scheduling policy using a multiple queue \255 queue control)72 616.8
R(2)10 E .068(based scheme, you may do so.)72 628.8 R .069
(The server and queue attributes used to control job scheduling)5.629 F
(2)10 E .137(may be adjusted by a client with privilege, such as)72
640.8 R F3(qmgr)2.916 E F0 .136(\(8B\), or by one of your own creation.)
B(2)10 E(However)72 652.8 Q 4.684(,t)-.74 G 1.904
(he controls actually reside in the Scheduler)-4.684 F 4.685(,n)-.74 G
1.905(ot in the Server)-4.685 F 7.465(.T)-.74 G 1.905(he Scheduler)
-7.465 F(2)10 E .538(must check the status of the Server and queues, as\
 well as the jobs, determining the setting)72 664.8 R(2)10 E .759
(of the server and queue controls.)72 676.8 R .76
(It then must use the settings of those controls in its deci-)6.319 F(2)
10 E(sion making.)72 688.8 Q(2)382.54 E .907(Another approach is the `)
72 704.4 R .907(`whole pool')-.18 F 3.687('a)-.18 G .906
(pproach, wherein all jobs are in a single pool \(single)-3.687 F(2)10 E
4.305(queue\). The)72 716.4 R 1.525
(Scheduler evaluates each job on its merits and decides which, if any)
4.305 F 4.306(,t)-1.11 G 4.306(or)-4.306 G 7.22(un. 2)-4.306 F 2.68
(The policy can easily include factors such as time of day)72 728.4 R
5.46(,s)-1.11 G 2.68(ystem load, size of job, etc.)-5.46 F(2)10 E
(Chapt Revision: 1.173)72 768 Q(29)319.37 E EP
%%Page: 30 34
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 258.1(Scheduling PBS)72 48 R
(Administrator Guide)2.78 E 2.142
(Ordering of jobs in the queue need not be considered.)72 84 R 2.142
(The PBS team believes that this)7.702 F(2)10 E
(approach is superior for two reasons:)72 96 Q(2)271.63 E 13.88
(1. Users)97 111.6 R 2.258
(are not tempted to lie about their requirements in order to `)5.038 F
(`game')-.18 E 5.037('t)-.18 G 7.22(he 2)-5.037 F(queue policy)122 123.6
Q 332.92(.2)-1.11 G 13.88(2. The)97 139.2 R .012(scheduling can be perf\
ormed against the complete set of current jobs resulting)2.791 F(2)10 E
(in better \214ts against the available resources.)122 151.2 Q(2)185.85
E/F1 10/NewCenturySchlbk-Bold@0 SF 2.87(3.1. Scheduler)72 178.8 R 2.87
<ad53>2.87 G(erver Interaction)-2.87 E F0(2)258.05 E 1.913
(In developing a scheduling policy)72 194.4 R 4.692(,i)-1.11 G 4.692(tm)
-4.692 G 1.912(ay be important to understand when and how the)-4.692 F
(2)10 E 1.908(server and the scheduler interact.)72 206.4 R 1.908
(The server always initiates the scheduling cycle.)7.468 F 7.22(The 2)
7.469 F 1.108(server opens a connection to the scheduler and sends a co\
mmand indicating the reason for)72 218.4 R(2)10 E(the scheduling cycle.)
72 230.4 Q(The reason or event that triggers a cycle are:)5.56 E(2)
133.84 E 21.67(-A)72 246 S 1.775(job newly becomes eligible to execute.)
-17.115 F 1.776(The job may be a new job in an execution)7.336 F(2)10 E
1.083(queue, or a job in an execution queue that just changed state fro\
m held or waiting to)97 258 R(2)10 E 2.78(queued. [)97 270 R/F2 9
/NewCenturySchlbk-Roman@0 SF(SCH_SCHEDULE_NEW)2.78 E F0 258.592(]2)2.78
G 21.67(-A)72 285.6 S 2.78(ne)-21.67 G(xecuting job terminates.)-2.78 E
([)5.56 E F2(SCH_SCHEDULE_TERM)2.78 E F0 157.089(]2)2.78 G 21.67(-T)72
301.2 S .473(he time interval since the prior cycle speci\214ed by the \
server attribute)-21.67 F F1(schedule_iter)3.254 E(-)-.18 E F0(2)10 E F1
(ation)97 313.2 Q F0(is reached.)2.78 E([)5.56 E F2(SCH_SCHEDULE_TIME)
2.78 E F0 213.454(]2)2.78 G 21.67(-T)72 328.8 S 1.269
(he server attribute)-21.67 F F1(scheduling)4.049 E F0 1.269
(is set or reset to true.)4.049 F 1.268(If set true, even if it')6.829 F
4.048(sv)-.37 G 7.22(alue 2)-4.048 F 2.602
(was true, the scheduler will be cycled.)97 340.8 R 2.603
(This provides the administrator/operator a)8.163 F(2)10 E
(means on forcing a scheduling cycle.)97 352.8 Q([)5.56 E F2
(SCH_SCHEDULE_CMD)2.78 E F0 127.968(]2)2.78 G 21.67(-I)72 368.4 S 3.899
(ft)-21.67 G 1.118(he scheduler was cycled and it requested one and onl\
y one job to be run, then the)-3.899 F(2)10 E .34
(scheduler will be recycled by the server)97 380.4 R 5.901(.T)-.74 G
.341(his event is a bit abstruse.)-5.901 F .341(It exists to `)8.681 F
7.22(`sim- 2)-.18 F(plify')97 392.4 Q 3.49('as)-.18 G(cheduler)-3.49 E
9.05(.T)-.74 G .709
(he scheduler only need worry about choosing the one best job per)-9.05
F(2)10 E 7.232(cycle. If)97 404.4 R 1.673(other jobs can also be run, i\
t will get another chance to pick the next job.)4.453 F(2)10 E .562(Sho\
uld a scheduler run none or more than one job in a cycle it is clear th\
at it need not)97 416.4 R(2)10 E 3.542(be recalled until conditions cha\
nge and one of the above trigger the next cycle.)97 428.4 R(2)10 E([)97
440.4 Q F2(SCH_SCHEDULE_RECYC)2.78 E F0 290.786(]2)2.78 G 21.67(-I)72
456 S 4.475(ft)-21.67 G 1.695(he server recently recovered, the \214rst\
 scheduling cycle, resulting from any of the)-4.475 F(2)10 E
(above, will be indicated uniquely)97 468 Q 5.56(.[)-1.11 G F2
(SCH_SCHEDULE_FIRST)-2.78 E F0 136.527(]2)2.78 G .813(Once the server h\
as contacted the scheduler and sent the reason for the contact, the sch\
ed-)72 483.6 R(2)10 E .911
(uler then becomes a privileged client of the server)72 495.6 R 6.471
(.A)-.74 G 3.691(ss)-6.471 G .91(uch, it may command the server to)
-3.691 F(2)10 E(perform any action allowed to a manager)72 507.6 Q
250.49(.2)-.74 G .053(When the scheduler has completed all activities i\
t wishes to perform in this cycle, it will close)72 523.2 R(2)10 E .471
(the connection to the server)72 535.2 R 6.031(.W)-.74 G .47
(hile a connection is open, the server will not attempt to open)-6.031 F
(2)10 E 2.78(an)72 547.2 S(ew connection.)-2.78 E(2)359.96 E
(One point should be clari\214ed about job ordering:)72 562.8 Q(2)219.2
E(Queues `)97 578.4 Q(`are')-.18 E 2.78('a)-.18 G(nd `)-2.78 E
(`are not')-.18 E 2.78('F)-.18 G 230.08(IFOs. 2)-2.78 F 1.383(What is m\
eant is that while jobs are ordered \214rst in \255 \214rst out in the \
server and in each)72 594 R(2)10 E .735(queue, that fact does NOT imply\
 that running them in that order is mandated, required, or)72 606 R(2)10
E .534(even desirable.)72 618 R .534(That is a decision left completely\
 up to site policy and implementation.)6.094 F 7.22(The 2)6.095 F .302(\
server will maintain the order across restarts solely as a aid to sites\
 that wish to use a FIFO)72 630 R(2)10 E(ordering in some fashion.)72
642 Q(2)324.96 E F1 2.87(3.2. BaSL)72 666 R(Scheduling)2.87 E F0(2)
330.05 E .394(The provided BaSL Scheduler uses a C-like procedural lang\
uage to write the scheduling pol-)72 681.6 R(2)10 E(icy)72 693.6 Q 4.257
(.T)-1.11 G 1.477(he language provides a number of constructs and prede\
\214ned functions that facilitate)-4.257 F(2)10 E .045
(dealing with scheduling issues. Information about a PBS server)72 705.6
R 2.826(,t)-.74 G .046(he queues that it owns, jobs)-2.826 F(2)10 E .415
(residing on each queue, and the computational nodes where jobs can be \
run are accessed via)72 717.6 R(2)10 E 1.146(the BaSL data types)72
729.6 R F1(Server)3.926 E 3.926(,Q)-.74 G 1.057(ue, Job, CNode, Set)
-3.926 F(Server)4.017 E F0(,)A F1 1.147(Set Que)3.927 F F0(,)A F1 1.147
(Set Job)3.927 F F0 3.927(,a)C(nd)-3.927 E F1(Set)3.927 E F0(2)10 E
316.59(30 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Page: 31 35
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Scheduling)260.88 E/F1 10/NewCenturySchlbk-Bold@0 SF(CNode)72 84 Q F0
404.59(.2)C .007(The idea is that a site must \214rst write a function \
\(containing the scheduling algorithm\) called)72 108 R(2)10 E/F2 10
/NewCenturySchlbk-Italic@0 SF(sched_main\(\))72 120 Q F0 .213(\(and all\
 functions supporting it\) using BaSL constructs, and then translate th\
e)4.658 F(2)10 E .019(functions into C using the BaSL compiler)72 132 R
F1(basl2c)2.799 E F0 2.799(,w)C .018
(hich would also attach a main program to)-2.799 F(2)10 E 2.141
(the resulting code.)72 144 R 2.141
(This main program performs general initialization and housekeeping)
7.701 F(2)10 E .823(chores such as setting up local socket to communica\
te with the server running on the same)72 156 R(2)10 E .261
(machine, cd-ing to the priv directory)72 168 R 3.041(,o)-1.11 G .262
(pening log \214les, opening con\214guration \214le \(if any\), set-)
-3.041 F(2)10 E .871(ting up locks, forking the child to become a daemo\
n, initializing a scheduling cycle \(i.e.)72 180 R 7.22(get 2)6.43 F
.019(node attributes that are static in nature\), setting up the signal\
 handlers, executing global ini-)72 192 R(2)10 E .964
(tialization assignment statements speci\214ed by the scheduler writer)
72 204 R 3.744(,a)-.74 G .964(nd \214nally sitting on a)-3.744 F(2)10 E
1.304(loop waiting for a scheduling command from the server)72 216 R
4.085(.T)-.74 G 1.305(he name of the resulting code is)-4.085 F(2)10 E
F2(pbs_sched.c)72 228 Q F0 384.054(.2)1.666 G 9.997
(When the server sends the scheduler an appropriate scheduling command)
72 252 R(2)10 E({)72 264 Q/F3 9/NewCenturySchlbk-Roman@0 SF
(SCH_SCHEDULE_NEW)2.78 E F0(,)2.78 E F3(SCH_SCHEDULE_TERM)44.697 E F0(,)
2.78 E F3(SCH_SCHEDULE_TIME)44.698 E F0 10(,2)2.78 G F3
(SCH_SCHEDULE_RECYC)74.78 276 Q F0(,)2.78 E F3(SCH_SCHEDULE_CMD)6.998 E
F0(,)2.78 E F3(SCH_SCHEDULE_FIRST)6.998 E F0 1.438(}, the scheduler)2.78
F(2)10 E 1.181(wakes up and obtains information about server\(s\), jobs\
, queues, and execution host\(s\), and)72 288 R(2)10 E 1.133
(then it calls)72 300 R F2(sched_main\(\).)3.913 E F0 1.132
(The list of servers, execution hosts, and host queries to send to)5.579
F(2)10 E(the hosts' MOMs are speci\214ed in the scheduler con\214gurati\
on \214le.)72 312 Q(2)142.37 E .376(Global variables de\214ned in the B\
aSL program will retain their values in between scheduling)72 336 R(2)10
E(cycles while locally-de\214ned variables do not.)72 348 Q(2)238.09 E
F1 2.87(3.3. T)72 375.6 R(cl Based Scheduling)-.81 E F0(2)308.17 E .804
(The provided T)72 391.2 R .803(cl based Scheduler uses the basic T)-.81
F .803(cl interpreter with some extra commands)-.81 F(2)10 E 2.064
(for communicating with the PBS Server and Resource Monitor)72 403.2 R
7.624(.T)-.74 G 2.065(he scheduling policy is)-7.624 F(2)10 E 1.494
(de\214ned by a script written in T)72 415.2 R 4.274(cl. A)-.81 F 1.494
(number of sample scripts are provided in the source)4.274 F(2)10 E
(directory)72 427.2 Q F2(src/scheduler)2.78 E(.tcl/sample_scripts)-1.29
E F0 243.294(.2)1.666 G(The T)72 442.8 Q
(cl based Scheduler works, very generally)-.81 E 2.78(,i)-1.11 G 2.78
(nt)-2.78 G(he following way:)-2.78 E(2)126.84 E 13.88(1. On)72 458.4 R
1.132(start up, the Scheduler reads the initialization script \(if it e\
xists\) and executes it.)3.912 F(2)10 E 1.105
(Then, the body script is read into memory)97 470.4 R 6.665(.T)-1.11 G
1.105(his is the \214le that will be executed each)-6.665 F(2)10 E .879
(time a `)97 482.4 R(`schedule')-.18 E 3.659('c)-.18 G .879
(ommand is received from the server)-3.659 F 6.439(.I)-.74 G 3.659(tt)
-6.439 G .88(hen waits for a `)-3.659 F(`schedule')-.18 E 10('2)-.18 G
(command from the server)97 494.4 Q 296.45(.2)-.74 G 13.88(2. When)72
510 R 3.233(as)3.233 G .452
(chedule command is received, the body script is executed.)-3.233 F .452
(No special process-)6.012 F(2)10 E .784(ing is done for the script exc\
ept to provide a connection to the Server)97 522 R 6.345(.A)-.74 G .785
(typical script)-2.78 F(2)10 E .063(will need to retrieve information f\
or candidate jobs to run from the server using)97 534 R F1(pbssel-)2.842
E F0(2)10 E F1(stat)97 546 Q F0(or)4.273 E F1(pbsstatjob)4.273 E F0
7.053(.O)C 1.493
(ther information from the Resource Monitor\(s\) will need to be)-7.053
F(2)10 E 1.492(retrieved by opening connections with)97 558 R F1(openrm)
4.272 E F0 1.492(and submitting queries with)4.272 F F1(addreq)4.272 E
F0(2)10 E .335(and getting the results with)97 570 R F1(getreq)3.115 E
F0 5.895(.T)C .335(he Resource Monitor connections must be closed)-5.895
F(2)10 E 2.063(explicitly with)97 582 R F1(closerm)4.843 E F0 2.062
(or the Scheduler will eventually run out of \214le descriptors.)4.843 F
(2)10 E(When a decision is made to run a job, a call to)97 594 Q F1
(pbsrunjob)2.78 E F0(must be made.)2.78 E(2)79.16 E 13.88(3. When)72
609.6 R .473(the script evaluation is complete, the Scheduler will clos\
e the TCP/IP connection)3.253 F(2)10 E(to the Server)97 621.6 Q 354.96
(.2)-.74 G F1 2.87(3.3.1. T)72 645.6 R(cl Based Scheduling Advice)-.81 E
F0(2)261.41 E 1.322(The Scheduler does not restart the T)72 661.2 R
1.321(cl interpreter for each cycle.)-.81 F 1.321
(This gives the ability to)6.881 F(2)10 E .574
(carry information from one cycle to the next.)72 673.2 R .575
(It also can cause problems if variables are not)6.134 F(2)10 E .123(in\
itialized or "unset" at the beginning of the script when they are not e\
xpected to contain any)72 685.2 R(2)10 E(information later on.)72 697.2
Q(2)345.88 E .092(System load average is frequently used by a script.)72
712.8 R .092(This number is obtained from the system)5.652 F(2)10 E
1.039(kernel by pbs_mom.)72 724.8 R 1.039
(Most systems smooth the load average number over a time period.)6.599 F
7.22(If 2)6.598 F(Chapt Revision: 1.173)72 768 Q(31)319.37 E EP
%%Page: 32 36
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 258.1(Scheduling PBS)72 48 R
(Administrator Guide)2.78 E .615(one scheduling cycle runs one or more \
jobs and the next scheduling cycle occurs quickly)72 84 R 3.396(,t)-1.11
G 7.22(he 2)-3.396 F .67(impact of the newly run jobs will likely not b\
e re\215ected in the load average.)72 96 R .669(This can cause)6.229 F
(2)10 E .376(the load average to shoot way up especially when \214rst s\
tarting the batch system.)72 108 R .376(Also when)5.936 F(2)10 E .111(j\
obs terminate, the delay in lowering the load average may delay the sch\
eduling of additional)72 120 R(2)10 E 418.29(jobs. 2)72 132 R .189
(The Scheduler redirects the output from `)72 147.6 R(`stdout')-.18 E
2.969('a)-.18 G .189(nd `)-2.969 F -2.23(`stderr ')-.18 F 2.969('t)-.18
G -5.748 2.969(oa \214)-2.969 H 2.97(le. This)-2.969 F .19
(makes it easy to)2.97 F(2)10 E .585
(generate debug output to check what your script is doing.)72 159.6 R
.585(It is advisable to use this feature)6.145 F(2)10 E
(heavily until you are fairly sure that your script is working well.)72
171.6 Q(2)144.56 E/F1 10/NewCenturySchlbk-Bold@0 SF 2.87(3.4. C)72 195.6
R(Based Scheduling)2.87 E F0(2)315.88 E .605
(The C based scheduler is similar in structure and operation to the T)72
211.2 R .606(cl scheduler except that)-.81 F(2)10 E 2.78(Cf)72 223.2 S
(unctions are used rather than T)-2.78 E(cl scripts.)-.81 E(2)237.81 E
13.88(1. On)72 238.8 R .676(start up, the scheduler calls)3.457 F/F2 10
/NewCenturySchlbk-Italic@0 SF .676(schedinit\(argc, argv\))3.456 F F0
.676(to initialize whatever is required)5.122 F(2)10 E
(to be initialized.)97 250.8 Q(This is called one time only)5.56 E
209.17(.2)-1.11 G 13.88(2. When)72 266.4 R 6.651(as)6.651 G 3.871
(chedule command is received, the function)-6.651 F F2 3.872
(schedule\(cmd, connector\))6.652 F F0 7.22(is 2)8.318 F 2.78
(invoked. All)97 278.4 R
(scheduling activities occur within that function.)2.78 E(2)135.13 E
13.88(3. Upon)72 294 R
(return to the main loop, the connection to the server is closed.)2.78 E
(2)103.84 E(Several working scheduler code examples are provided in the\
 sample.scheds subdirectory)72 309.6 Q 28.28(.2)-1.11 G F1 2.87(3.5. C)
72 333.6 R(Based Sample Schedulers)2.87 E F0(2)275.4 E 1.536(The follow\
ing sections discuss simple C based sample schedulers supplied with PBS\
.)72 349.2 R 7.22(The 2)7.095 F 2.352
(sources for the samples are found in)72 361.2 R F2(src/scheduler)5.132
E(.cc/samples)-1.29 E F0 2.353(under the scheduler type)6.798 F(2)10 E
(name, for example)72 373.2 Q F2(src/scheduler)2.78 E
(.cc/samples/\214fo)-1.29 E F0 212.204(.2)1.666 G F1 2.87(3.5.1. FIFO)72
397.2 R(Scheduler)2.87 E F0(2)327.83 E .536
(This scheduler will provide several simple scheduling policies.)72
412.8 R .535(It provides the ability to sort)6.095 F(2)10 E .407
(the jobs in several different ways, in addition to FIFO order)72 424.8
R 5.968(.T)-.74 G .408(here is also the ability to sort)-5.968 F(2)10 E
.52(on user and group priority)72 436.8 R 6.08(.M)-1.11 G .519
(ainly this scheduler is intended to be a jumping off point for a)-6.08
F(2)10 E 1.181(real scheduler to be written.)72 448.8 R 3.962(Ag)6.742 G
1.182(ood amount of code has been written to make it easier to)-3.962 F
(2)10 E(change and add to this scheduler)72 460.8 Q 5.56(.C)-.74 G
(heck the IDS for a more detailed view of the code.)-5.56 E(2)46.04 E
(As distributed, the \214fo scheduler is con\214gured to:)72 476.4 Q(2)
214.78 E 21.67(-A)72 492 S 1.688(ll jobs in a queue will considered for\
 execution before the next queue is examined.)-21.67 F(2)10 E
(\(See \214le)97 504 Q/F3 10/Courier@0 SF
(PBS_HOME/sched_priv/sched_config)2.78 E F0 182.22(\)2)C 21.67(-T)72
519.6 S 22.33(he queues are sorted by queue priority)-21.67 F 27.89(.\()
-1.11 G 22.33(See \214le)-27.89 F(2)10 E F3
(PBS_HOME/sched_priv/sched_config\))97 531.6 Q F0(2)219 E 21.67(-T)72
547.2 S .267
(he jobs within each queue are sorted by requested cpu time \(cput\).)
-21.67 F .266(The shortest job is)5.826 F(2)10 E(places \214rst.)97
559.2 Q(\(See \214le)5.56 E F3(PBS_HOME/sched_priv/sched_config\))2.78 E
F0(2)120.84 E 21.67(-J)72 574.8 S 2.11(obs which have been queued for m\
ore than a day will be considered starving and)-21.67 F(2)10 E
(heroic measures will be taken to attempt to run them.)97 586.8 Q(2)
167.33 E 21.67(-A)72 602.4 S .46(ny queue whose name starts with `)
-21.67 F(`ded')-.18 E 3.24('i)-.18 G 3.24(st)-3.24 G .46
(reated as a dedicated time queue.)-3.24 F .46(Jobs in)6.02 F(2)10 E
1.217(that queue will only be considered for execution if the system is\
 in dedicated time as)97 614.4 R(2)10 E .387(speci\214ed in the)97 626.4
R F3(dedicated_time)3.167 E F0 .387(con\214guration \214le.)3.167 F .386
(If the system is in dedicated time,)5.947 F(2)10 E 15.824
(jobs not in a `)97 638.4 R(`ded')-.18 E 18.604('q)-.18 G 15.824
(ueue will not considered.)-18.604 F 15.824(\(See \214le)21.384 F(2)10 E
F3 191(PBS_HOME/sched_priv/dedicated_time &)97 650.4 R F0(2)10 E F3
(PBS_HOME/sched_priv/sched_config\))97 662.4 Q F0(2)219 E 21.67(-P)72
678 S 1.078(rime time is from 4:00 AM to 5:30 PM.)-21.67 F 1.078
(Any holiday is considered non-prime.)6.638 F 7.22(Stan- 2)6.638 F
12.252(dard federal holidays for the year 1998 are included.)97 690 R
12.252(\(See \214le)17.812 F(2)10 E F3(PBS_HOME/sched_priv/holidays\))97
702 Q F0(2)243 E 21.67(-A)72 717.6 S(sample)-18.89 E F3(dedicated_time)
2.78 E F0(and resource group \214le are also included.)2.78 E(2)94.84 E
316.59(32 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Page: 33 37
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Scheduling)260.88 E 21.67(-T)72 84 S 1.919(he system resources which a\
re checked to make sure they are not exceeded:)-21.67 F/F1 10
/NewCenturySchlbk-Italic@0 SF(mem)4.7 E F0(2)11.666 E
(\(memory requested\) and)97 96 Q F1(ncpus)2.78 E F0
(\(number of CPUs requested\).)4.446 E(2)136.084 E/F2 10
/NewCenturySchlbk-Bold@0 SF 2.87(3.5.1.1. Installing)72 123.6 R
(the FIFO scheduler)2.87 E F0(2)248.03 E 13.88(1. As)72 139.2 R 1.439
(discussed in the build overview)4.22 F 4.219(,r)-.92 G 1.439
(un con\214gure with the following options:)-4.219 F/F3 10/Courier@0 SF
(--set-)4.219 E F0(2)10 E F3(sched=c)97 151.2 Q F0(and)2.78 E F3
(--set-sched-code=fifo)2.78 E F0 2.78(,w)C(hich are the default.)-2.78 E
(2)118.98 E 13.88(2. Y)72 166.8 R 1.403
(ou may wish to read through the src/scheduler)-1.11 F 1.403
(.cc/samples/\214fo/con\214g.h \214le.)-.74 F 1.403(Most de-)6.963 F(2)
10 E(fault values will be \214ne.)97 178.8 Q(2)306.23 E 13.88(3. Build)
72 194.4 R(and install PBS)2.78 E(2)316.05 E 13.88(4. Change)72 210 R
.207(directory into)2.987 F F3(PBS_HOME/sched_priv)2.987 E F0 .207
(and edit the scheduling policy con\214g \214le)2.987 F(2)10 E F3
(sched_config)97 222 Q F0 5.521(,o)C 5.521(ru)-5.521 G 2.742
(se the default values.)-5.521 F 2.742
(This \214le controls the scheduling policy)8.302 F(2)10 E .012
(\(which jobs are run when\).)97 234 R .011(The default name of)5.572 F
F3(sched_config)2.791 E F0 .011(may be changed in con-)2.791 F(2)10 E
2.78(\214g.h. The)97 246 R(format of the sched_con\214g \214le is:)2.78
E(2)216.62 E F2(name: value [prime | non_prime | all])97 261.6 Q F0(2)
220.62 E(name and value may not contain any white space)97 277.2 Q(2)
189.18 E(value can be:)97 289.2 Q(true | false | number | string)5.56 E
(2)211.57 E(any line starting with a '#' is a comment.)97 301.2 Q(2)
228.8 E 2.78(ab)97 313.2 S(lank third word is equivalent to `)-2.78 E
(`all')-.18 E 2.78('w)-.18 G(hich is both prime and non-prime)-2.78 E(2)
69.14 E
(the associated values as shipped as defaults are shown in braces {}:)97
328.8 Q(2)107.14 E 357.56(round_robin 2)97 344.4 R .242(boolean: If tru\
e \255 run jobs one from each queue in a circular fashion; if false \
\255 run)122 356.4 R(2)10 E .493(as many jobs as possible up to queue/s\
erver limits from one queue before process-)122 368.4 R(2)10 E .377
(ing the next queue.)122 380.4 R .378
(The following server and queue attributes, if set,)5.937 F .378
(will control)5.938 F(2)10 E 3.529(if a job `)122 392.4 R 3.529
(`can be')-.18 F 6.309('r)-.18 G(un:)-6.309 E F2(resources_max)6.309 E
F0(,)A F2(max_running)6.309 E F0(,)A F2(max_user_run)6.309 E F0 6.308
(,a)C 7.22(nd 2)-6.308 F F2(max_group_run)122 404.4 Q F0 7.32(.S)C 1.76
(ee the man pages pbs_server_attributes and pbs_queue_at-)-7.32 F(2)10 E
349.77(tributes. 2)122 416.4 R({false all})122 428.4 Q(2)349.03 E 370.51
(by_queue 2)97 456 R .96(boolean: If true \255 the jobs will be run fro\
m their queues; if false \255 the entire job)122 468 R(2)10 E
(pool in the server is looked at as one large queue.)122 480 Q(2)164.74
E({true all})122 492 Q(2)351.26 E 370.34(strict_\214fo 2)97 519.6 R .553
(boolean: If true \255 will run jobs in a strict FIFO order)122 531.6 R
6.113(.T)-.74 G .553(his means if a job fails to)-6.113 F(2)10 E .737(r\
un for any reason, no more jobs will run from that queue/server that sc\
heduling)122 543.6 R(2)10 E 3.169(cycle. If)122 555.6 R F1
(strict_\214fo)3.169 E F0 .389
(is not set, large jobs can be starved, i.e., not allowed to run be-)
4.835 F(2)10 E .087
(cause a never ending series of small jobs use the available resources.)
122 567.6 R .086(Also see the)8.426 F(2)10 E 5.876(server attribute)122
579.6 R F2(resources_max)8.656 E F0 5.877
(in chapter 3.4, and the \214fo parameter)8.656 F(2)10 E F1
(help_starving_jobs)122 591.6 Q F0(below)4.446 E 273.294(.2)-.92 G
({false all})122 603.6 Q(2)349.03 E 367(fair_share 2)97 631.2 R .438
(boolean: This will turn on the fair share algorithm.)122 643.2 R .438
(It will also turn on usage col-)5.998 F(2)10 E 3.172(lecting and jobs \
will be selected using a function of their usage and priori-)122 655.2 R
(2)10 E 340.15(ty\(shares\). 2)122 667.2 R({false all})122 679.2 Q(2)
349.03 E 344.76(load_balancing 2)97 706.8 R 1.585(boolean: If this is s\
et the scheduler will load balance the jobs between a list of)122 718.8
R(2)10 E 1.329
(time-shared hosts \(:ts\) obtained from the Server \(pbs_server\).)122
730.8 R 1.329(The Server reads)6.889 F(2)10 E(Chapt Revision: 1.173)72
768 Q(33)319.37 E EP
%%Page: 34 38
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 258.1(Scheduling PBS)72 48 R
(Administrator Guide)2.78 E
(the list from its nodes \214le, see chapter 3.1.)122 84 Q(2)196.6 E
({false all})122 96 Q(2)349.03 E 327.55(help_starving_jobs 2)97 123.6 R
.208(boolean: This bit will have the scheduler turn on its rudimentry s\
tarving jobs sup-)122 135.6 R(2)10 E 3.012(port. Once)122 147.6 R .232
(jobs have waited for the amount of time give by)3.012 F/F1 10/Courier@0
SF(starve_max)3.012 E F0 3.013(,t)C .233(hey are)-3.013 F(2)10 E .234
(considered starving.)122 159.6 R .234
(If a job is considered starving, then no jobs will run until the)5.794
F(2)10 E(starving job can be run.)122 171.6 Q F1(Starve_max)5.56 E F0
(needs to be set also.)2.78 E(2)122.7 E 380.33(sort_by 2)97 199.2 R .341
(string: have the jobs sorted.)122 211.2 R .341
(sort_by can be set to a single sort type or)5.901 F/F2 10
/NewCenturySchlbk-Italic@0 SF(multi_sort.)3.121 E F0(2)11.666 E .679
(If set to)122 223.2 R F2(multi_sort,)3.459 E F0(multiple)5.125 E F2
(key)3.458 E F0 .678(\214elds are used.)5.124 F(Each)6.238 E F2(key)
3.458 E F0 .678(\214eld will be a key for)5.124 F(2)10 E
(the multi sort.)122 235.2 Q
(The order of the key \214elds decides which sort type is used \214rst.)
5.56 E(2)29.57 E 9.292(Sorts: no_sort, shortest_job_\214rst, longest_jo\
b_\214rst, smallest_memory_\214rst,)122 259.2 R(2)10 E 16.84(largest_me\
mory_\214rst, high_priority_\214rst, low_priority_\214rst, multi_sort,)
122 271.2 R(2)10 E
(fair_share, large_walltime_\214rst, short_walltime_\214rst)122 283.2 Q
(2)146.79 E 302.38({shortest_job_\214rst} 2)122 295.2 R 355.15
(no_sort 2)122 310.8 R(do not sort the jobs)147 322.8 Q(2)279.03 E
309.04(shortest_job_\214rst 2)122 338.4 R
(ascending by the cput attribute)147 350.4 Q(2)222.17 E 313.48
(longest_job_\214rst 2)122 366 R(descending by the cput attribute)147
378 Q(2)216.99 E 283.66(smallest_memory_\214rst 2)122 393.6 R
(ascending by the mem attribute)147 405.6 Q(2)219.57 E 290.52
(largest_memory_\214rst 2)122 421.2 R(descending by the mem attribute)
147 433.2 Q(2)214.39 E 304.23(high_priority_\214rst 2)122 448.8 R
(descending by the job priority attribute)147 460.8 Q(2)185.69 E 309.04
(low_priority_\214rst 2)122 476.4 R
(ascending by the job priority attribute)147 488.4 Q(2)190.87 E 296.06
(large_walltime_\214rst 2)122 504 R
(descending by job walltime attribute)147 516 Q(2)198.08 E 286.43
(cmp_job_walltime_asc 2)122 531.6 R(ascending by job walltime attribute)
147 543.6 Q(2)203.26 E 341.07(multi_sort 2)122 559.2 R
(sort on multiple keys.)147 571.2 Q(2)266.8 E 342(fair_share 2)122 586.8
R(If)147 598.8 Q F1(fair_share)3.342 E F0 .562(if given as the sort key)
3.342 F 3.343(,t)-1.11 G .563(he jobs are sorted based on the val-)
-3.343 F(2)10 E 1.187(ues in the resource group \214le.)147 610.8 R
1.187(This is only used if strict priority sorting is)6.747 F(2)10 E
328.85(needed. 2)147 622.8 R 5.92(key Sort)97 638.4 R .068
(type as de\214ned above for multiple sorts.)2.848 F .068
(Each sorting key is listed on a sepa-)8.408 F(2)10 E
(rate line starting with the word)122 650.4 Q F2(key)2.78 E F0 5.56(.F)
1.666 G(or example:)-5.56 E(2)157.704 E F1(sort_by: multi_sort)158 662.4
Q F0(2)242 E F1(key: sortest_job_first)158 674.4 Q F0(2)224 E F1
(key: smallest_memory_first)158 686.4 Q F0(2)200 E F1
(key: high_priority_first)158 698.4 Q F0(2)212 E 373.11(log_\214lter 2)
97 714 R .241(What event types not to log.)122 726 R .24
(The value should be the addition of the event classes)5.801 F(2)10 E
316.59(34 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Page: 35 39
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Scheduling)260.88 E 1.324
(which should be \214ltered\(i.e. ORing them together\).)122 84 R 1.325
(The numbers are de\214ned in)6.885 F(2)10 E/F1 10
/NewCenturySchlbk-Italic@0 SF(src/include/log.h.)122 96 Q F0
(NOTE: those numbers are in hex and log_\214lter is in base 10.)4.446 E
(2)23.374 E 365.88({256} 2)122 108 R 340.88(Examples: 2)122 132 R
(\214lter PBSEVENT_DEBUG2 PBSEVENT_DEBUGnPBSEVENT_ADMIN)122 144 Q(2)
54.21 E(0x100: 256)152.56 156 Q(0x080: 128)8.34 E(0x004: 4= 388)11.12 E
(2)178.03 E 83.65(PBSEVENT_JOBPBSEVENT_DEBUGPBSEVENT_SCHED 2)147 180 R
(0x008: 8)155.34 192 Q(0x080: 128)8.34 E(0x040: 64= 200)5.56 E(2)186.37
E 338.3(dedicated_pre\214x 2)97 219.6 R .718
(The queues with this pre\214x will be considered dedicated queues.)122
231.6 R .718(Example: if the)6.278 F(2)10 E(dedicated pre\214x is "ded")
122 243.6 Q(2)280.7 E
(then dedicated, ded1, ded5 etc would be dedicated queues)122 255.6 Q(2)
126.41 E 366.08({ded} 2)122 279.6 R 360.51(starve_max 2)97 307.2 R .271
(The amount of time before a job is considered starving.)122 319.2 R
.272(This con\214g variable is not)5.832 F(2)10 E(used if)122 331.2 Q/F2
10/Courier@0 SF(help_starving_jobs)2.78 E F0(is not set.)2.78 E(2)203.06
E(The following do not matter if fair share is not turned on \(which is\
 is not by default\).)97 358.8 Q(2)27.33 E 376.44(half_life 2)97 386.4 R
(The half life of the fair share usage)122 398.4 Q(2)229.76 E 343.64
({24:00:00} 2)122 410.4 R 335.7(unknown_shares 2)97 438 R
(The amount of shares for the "unknown" group.)122 450 Q(2)172.36 E
371.44({10} 2)122 462 R 367.74(sync_time 2)97 477.6 R
(The amount of time between writing the fair share usage data to disk.)
122 489.6 Q(2)68.05 E 349.2({1:00:00} 2)122 501.6 R
(The policy set by the supplied values in sched_con\214g is:)97 517.2 Q
(2)161.05 E(Jobs are run on the basis of queue priority)97 529.2 Q 2.78
(,b)-1.11 G(oth in prime and non-prime time.)-2.78 E(2)57.14 E(Jobs wit\
h in each queue are sorted on the basis of smallest \(memory\) \214rst.)
97 541.2 Q(2)74.36 E
(Help for starving jobs will take effect after a job is 24 hours old.)97
553.2 Q(2)123.44 E 13.88(5. If)72 580.8 R .46(fair share or strict prio\
rity is going to be used, the resource group \214le will need to be)3.24
F(2)10 E 2.78(created. Use)97 592.8 R(the following format:)2.78 E(2)
257.54 E F2 6(#c)133 604.8 S(omment)-6 E F0(2)327 E F2
(username cresgrp resgrp shares)133 616.8 Q F0(2)201 E 368.48
(username 2)97 632.4 R(string: the username of the user or the group)122
644.4 Q(2)184.04 E 380.16(cresgrp 2)97 660 R 1.416
(numeric: an id for the group or user)122 672 R 4.197(,s)-.74 G 1.417
(hould be unique for each.)-4.197 F 1.417(For users, the)6.977 F(2)10 E
(UID works well.)122 684 Q(2)316.8 E 384.6(resgrp 2)97 699.6 R .009
(string: the name of the parent resource group this user/group is in.)
122 711.6 R .009(The root of the)5.569 F(2)10 E(entire tree is called)
122 723.6 Q F2(root)2.78 E F0
(and is added automatically to the tree by the scheduler)2.78 E 16.84
(.2)-.74 G(Chapt Revision: 1.173)72 768 Q(35)319.37 E EP
%%Page: 36 40
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 258.1(Scheduling PBS)72 48 R
(Administrator Guide)2.78 E 383.85(shares 2)97 84 R .267(numeric: The a\
mount of shares\(priority\) the user/group has in the resource group.)
122 96 R(2)10 E 13.88(6. If)72 123.6 R .05
(strict priority is wanted, a fair share tree will be needed.)2.83 F
2.829(Ar)5.609 G .049(eally simple one will suf-)-2.829 F(2)10 E 2.861
(\214ce. Every)97 135.6 R -2.23(user ')2.861 F 2.861(sr)-.37 G .081
(esgrp will be root.)-2.861 F .082
(The amount of shares will be their priority)5.641 F 5.642(.N)-1.11 G
7.22(ext, 2)-5.642 F(set)97 147.6 Q/F1 10/Courier@0 SF(unknown_shares)
3.422 E F0 .642(to one.)3.422 F .642
(Everyone who is not in the tree will share the one share)6.202 F(2)10 E
.919(between them to make sure everyone in the tree will have priority \
over them.)97 159.6 R(Lastly)6.48 E 10(,2)-1.11 G .432
(the main sort must be set to)97 171.6 R/F2 10/NewCenturySchlbk-Italic@0
SF(fair_share.)3.212 E F0 .431
(This will sort by the fair share tree which was)4.877 F(2)10 E
(just set up.)97 183.6 Q(2)365.7 E 13.88(7. Create)72 211.2 R .098
(the holidays \214le to handle prime time and holidays.)2.878 F .099
(The holidays \214le should use)5.659 F(2)10 E .668
(the UNICOS 8 holiday format.)97 223.2 R .667(The ordering does matter)
6.227 F 6.227(.A)-.74 G .667(ny line that begins with a)-6.227 F(2)10 E
("*" is considered a comment.)97 235.2 Q(2)285.51 E(YEAR YYYY)97 250.8 Q
(2)357.36 E(This is the current year)122 262.8 Q 280.7(.2)-.74 G
(<day> <prime> <nonprime>)97 278.4 Q(2)286.75 E
(Day can be weekday | saturday | sunday)122 290.4 Q(2)199.84 E .551
(prime and nonprime are times when prime or non-prime time start.)122
302.4 R .551(They can ei-)6.111 F(2)10 E
(ther be HHMM with no colons\(:\) or the word "all" or "none")122 314.4
Q(2)119.59 E(<day> <date> <holiday>)97 330 Q(2)304.14 E .558(day is the\
 day of the year between 1 and 365 date is the calendar date.)122 342 R
.558(Ex Jan 1)6.118 F(2)10 E .894(holiday is the name of the holiday)122
354 R 6.455(.E)-1.11 G 3.675(xN)-6.455 G .895(ew Y)-3.675 F -2.23(ear ')
-1.11 F 3.675(sD)-.37 G .895(ay This is repeated for each)-3.675 F(2)10
E(company holiday)122 366 Q(2)314.03 E 13.88(8. T)97 393.6 R 3.09(ol)
-.92 G .31
(oad balance between timesharing nodes, several things need to happen.)
-3.09 F 7.22(First, 2)5.87 F 3.118(an)122 405.6 S .339(odes \214le need\
s to be set up in the PBSHOME/server_priv \(See section 3.1\).)-3.118 F
7.22(All 2)5.899 F 1.618(timesharing nodes need to be denoted with :ts.)
122 417.6 R 1.617(These are the nodes which the)7.178 F(2)10 E 1.431
(scheduler will load balance between.)122 429.6 R(Secondly)6.991 E 4.211
(,o)-1.11 G 4.212(ne)-4.211 G 1.432(very node there has to be a)-4.212 F
(2)10 E 3.944(mom. In)122 441.6 R 1.164(each of mom')3.944 F 3.944(sc)
-.37 G 1.164(on\214g \214les two static values need to be set up.)-3.944
F 1.163(One for)6.723 F(2)10 E .038
(ideal load and the other is maximum load.)122 453.6 R .039
(This is done by putting two lines in the)5.599 F(2)10 E .136
(con\214g \214le like the following format: name value.)122 465.6 R .135
(The name will be)5.696 F F2(ideal_load)2.915 E F0 7.22(and 2)4.581 F F2
(max_load.)122 477.6 Q F0(Lastly)5.769 E 4.103(,t)-1.11 G 1.323
(urn the load_balancing bit on in the scheduling policy con\214g)-4.103
F(2)10 E 3.687(\214le. Load)122 489.6 R .906
(balancing will have the job comment changed on running of the job to)
3.687 F(2)10 E(show where the job was run.)122 501.6 Q(2)260.32 E
(Example of mom con\214g \214le:\(64 processor machine\))122 525.6 Q(2)
158.85 E(ideal_load 60)122 537.6 Q(2)331.05 E(max_load 64)122 549.6 Q(2)
333.83 E 13.88(9. Space)97 577.2 R .871(sharing is done automatically i\
f there are both a nodes \214le and the job re-)3.65 F(2)10 E 1.551
(quests nodes.)122 589.2 R 1.551
(Make sure to set up a resources_default.nodes and resources_de-)7.111 F
(2)10 E 331.44(fault.nodect. 2)122 601.2 R 8.32(10. The)97 628.8 R
(scheduler honors the following attributes/node resources:)2.78 E(2)
107.37 E 12.77(Queue :)147 646.8 R 342.74(started 22)15 F 12.77(Queue :)
147 658.8 R 323.11(queue_type 22)15 F 12.77(Queue :)147 670.8 R 313.67
(max_running 22)15 F 12.77(Queue :)147 682.8 R 309.23(max_user_run 22)15
F 12.77(Queue :)147 694.8 R 302.75(max_group_run 22)15 F 26.65(Job :)147
706.8 R(job state)15 E(22)339.4 E 12.22(Server : max_running)147 718.8 R
(22)316.45 E 316.59(36 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Page: 37 41
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Scheduling)260.88 E 12.22(Server : max_user_run)147 84 R(22)312.01 E
12.22(Server : max_group_run)147 96 R(22)305.53 E 12.22
(Server : resources_available)147 108 R(22)287.92 E 12.22
(Server : resources_max)147 120 R(22)310.16 E 18.88(Node :)147 132 R
340.51(loadave 22)15 F 18.88(Node :)147 144 R 355.34(arch 22)15 F 18.88
(Node :)147 156 R 348.86(ncpus 22)15 F 18.88(Node :)147 168 R 331.26
(physmem 22)15 F 1.339(NOTE: if resources_available.res is set, it will\
 be used, if not resources_max.res)122 198 R(2)10 E(will be used.)122
210 Q(If neither are set in\214nity is assumed.)5.56 E(2)157.52 E/F1 10
/NewCenturySchlbk-Bold@0 SF 2.87(3.5.1.2. Examples)72 237.6 R
(FIFO Con\214guration Files)2.87 E F0(2)218.04 E
(The following are just examples and may or may not be what is shipped.)
72 253.2 Q(2)108.05 E .4 LW 77 286.9 72 286.9 DL 81.82 286.9 76.82 286.9
DL 86.82 286.9 81.82 286.9 DL 91.82 286.9 86.82 286.9 DL 96.82 286.9
91.82 286.9 DL 101.82 286.9 96.82 286.9 DL 106.82 286.9 101.82 286.9 DL
111.82 286.9 106.82 286.9 DL 116.82 286.9 111.82 286.9 DL 121.82 286.9
116.82 286.9 DL 126.82 286.9 121.82 286.9 DL 131.82 286.9 126.82 286.9
DL 136.82 286.9 131.82 286.9 DL 141.82 286.9 136.82 286.9 DL 146.82
286.9 141.82 286.9 DL 151.82 286.9 146.82 286.9 DL 156.82 286.9 151.82
286.9 DL 161.82 286.9 156.82 286.9 DL 166.82 286.9 161.82 286.9 DL
171.82 286.9 166.82 286.9 DL 176.82 286.9 171.82 286.9 DL 181.82 286.9
176.82 286.9 DL 186.82 286.9 181.82 286.9 DL 191.82 286.9 186.82 286.9
DL 196.82 286.9 191.82 286.9 DL 201.82 286.9 196.82 286.9 DL 206.82
286.9 201.82 286.9 DL 211.82 286.9 206.82 286.9 DL 216.82 286.9 211.82
286.9 DL 221.82 286.9 216.82 286.9 DL 226.82 286.9 221.82 286.9 DL
231.82 286.9 226.82 286.9 DL(Example of a scheduling con\214g \214le)72
284.4 Q(2)282.18 E/F2 10/NewCenturySchlbk-Italic@0 SF 19.44(#S)72 308.4
S
(et the boolean values which de\214ne how the scheduling policy \214nds)
-19.44 E F0(2)108.73 E F2 19.44(#t)72 320.4 S
(he next job to consider to run.)-19.44 E F0(2)278.68 E/F3 10/Courier@0
SF(round_robin: False)72 332.4 Q(ALL)17 E F0(2)299 E F3(by_queue: True)
72 344.4 Q(prime)41 E F0(2)287 E F3(by_queue: false)72 356.4 Q
(non-prime)35 E F0(2)263 E F3(strict_fifo: true)72 368.4 Q(ALL)23 E F0
(2)299 E F3(fair_share: True)72 380.4 Q(prime)4 E F0(2)312 E F3
(fair_share: false)72 392.4 Q(non-prime)23 E F0(2)263 E F2 2.78(#h)72
416.4 S(elp jobs which have been waiting too long)-2.78 E F0(2)238.12 E
F3(help_starving_jobs: true prime)72 428.4 Q F0(2)262 E F3
(help_starving_jobs: false)72 440.4 Q(non-prime)25 E F0(2)213 E F2 2.78
(#S)72 464.4 S(et a multi_sort)-2.78 E F0(2)360.15 E F2 2.78(#T)72 476.4
S(his example will sort jobs \214rst by ascending cpu time requested, a\
nd then)-2.78 E F0(2)92.62 E F2 2.78(#b)72 488.4 S 2.78(ya)-2.78 G(scen\
ding memory requested, and then \214nally by descending job priority)
-2.78 E F0(2)88.54 E F2(#)72 500.4 Q F0(2)436.44 E F3
(sort_by: multi_sort)72 512.4 Q F0(2)328 E F3(key: shortest_job_first)72
524.4 Q F0(2)304 E F3(key: smallest_memory_first)72 536.4 Q F0(2)286 E
F3(key: high_priority_first)72 548.4 Q F0(2)298 E F2 2.78(#S)72 572.4 S
(et the debug level to only show high level messages.)-2.78 E F0(2)193.7
E F2 2.78(#C)72 584.4 S(urrently this only shows jobs being run)-2.78 E
F0(2)248.14 E F3(debug_level: high_mess)72 596.4 Q F0(2)310 E F2 2.78
(#aj)72 620.4 S
(ob is considered starving if it has waited for this long)-2.78 E F0(2)
178.16 E F3 3(max_starve: 24:00:00)72 632.4 R F0(2)319 E F2 2.78(#I)72
656.4 S 2.78(ft)-2.78 G(he scheduler comes by a user which is not curre\
ntly in the resource group)-2.78 E F0(2)86.55 E F2 2.78(#t)72 668.4 S
(ree, they get added to the "unknown" group.)-2.78 E
(The "unknown" group is in roots)5.56 E F0(2)76.95 E F2 2.78(#r)72 680.4
S(esource group.)-2.78 E(This says how many shares it gets.)5.56 E F0(2)
199.46 E F3(unknown_shares: 10)72 692.4 Q F0(2)334 E F2 2.78(#T)72 716.4
S
(he usage information needs to be written to disk in case the scheduler)
-2.78 E F0(2)110.41 E F2 2.78(#g)72 728.4 S(oes down for any reason.)
-2.78 E(This is the amount of time between when the)5.56 E F0(2)106.67 E
(Chapt Revision: 1.173)72 768 Q(37)319.37 E EP
%%Page: 38 42
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 258.1(Scheduling PBS)72 48 R
(Administrator Guide)2.78 E/F1 10/NewCenturySchlbk-Italic@0 SF 2.78(#u)
72 84 S(sage information in memory is written to disk.)-2.78 E
(The example syncs the)5.56 E F0(2)108.17 E F1 2.78(#i)72 96 S
(nformation ever hour)-2.78 E(.)-1.29 E F0(2)331.64 E/F2 10/Courier@0 SF
(sync_time: 1:00:00)72 108 Q F0(2)334 E F1 2.78(#W)72 132 S
(hat events do you not want to log.)-2.78 E
(The event numbers are de\214ned in)5.56 E F0(2)113.5 E F1 2.78(#s)72
144 S 2.78(rc/include/log.h. NOTE:)-2.78 F
(the numbers are in hex, and log_\214lter is in)2.78 E F0(2)113.46 E F1
2.78(#b)72 156 S(ase 10.)-2.78 E F0(2)396.8 E F1 2.78(#T)72 168 S
(he example is not to log DEBUG2 events, which are the most proli\214c)
-2.78 E F0(2)115.37 E F2(log_filter: 256)72 180 Q F0(2)352 E .4 LW 77
213.7 72 213.7 DL 78.69 213.7 73.69 213.7 DL 83.69 213.7 78.69 213.7 DL
88.69 213.7 83.69 213.7 DL 93.69 213.7 88.69 213.7 DL 98.69 213.7 93.69
213.7 DL 103.69 213.7 98.69 213.7 DL 108.69 213.7 103.69 213.7 DL 113.69
213.7 108.69 213.7 DL 118.69 213.7 113.69 213.7 DL 123.69 213.7 118.69
213.7 DL 128.69 213.7 123.69 213.7 DL 133.69 213.7 128.69 213.7 DL
138.69 213.7 133.69 213.7 DL 143.69 213.7 138.69 213.7 DL 148.69 213.7
143.69 213.7 DL 153.69 213.7 148.69 213.7 DL 158.69 213.7 153.69 213.7
DL 163.69 213.7 158.69 213.7 DL 168.69 213.7 163.69 213.7 DL 173.69
213.7 168.69 213.7 DL 178.69 213.7 173.69 213.7 DL 183.69 213.7 178.69
213.7 DL 188.69 213.7 183.69 213.7 DL 193.69 213.7 188.69 213.7 DL
198.69 213.7 193.69 213.7 DL 203.69 213.7 198.69 213.7 DL 208.69 213.7
203.69 213.7 DL 213.69 213.7 208.69 213.7 DL 218.69 213.7 213.69 213.7
DL 223.69 213.7 218.69 213.7 DL 228.69 213.7 223.69 213.7 DL 233.69
213.7 228.69 213.7 DL 238.69 213.7 233.69 213.7 DL 243.69 213.7 238.69
213.7 DL 248.69 213.7 243.69 213.7 DL
(Here is an example of the holidays \214le)72 211.2 Q(2)265.31 E F1 2.78
(*t)72 235.2 S(he current year)-2.78 E F0(2)361.47 E F2 18(YEAR 1998)72
247.2 R F0(2)370 E F1(*)72 271.2 Q F0(2)437 E F1 2.78(*S)72 283.2 S
(tart and end of prime time)-2.78 E F0(2)306.46 E F1(*)72 295.2 Q F0(2)
437 E F1 41.7(*P)72 307.2 S 5.56(rime Non-Prime)-41.7 F F0(2)308.83 E F1
2.78(*D)72 319.2 S 27.8(ay Start)-2.78 F(Start)8.34 E F0(2)329 E F2 30
(weekday 0400)72 337.2 R(1130)15 E F0(22)301 E F2 24(saturday none)72
349.2 R(all)15 E F0(22)307 E F2 36(sunday none)72 361.2 R(all)15 E F0
(22)307 E F1(*)72 391.2 Q F0(2)437 E F1 2.78(*T)72 403.2 S(he holidays)
-2.78 E F0(2)374.98 E F1(*)72 415.2 Q F0(2)437 E F1 2.78(*D)72 427.2 S
(ay of)-2.78 E 19.46(Calendar Company)22.24 F F0(2)273.28 E F1 2.78(*Y)
72 439.2 S 25.02(ear Date)-4.07 F(Holiday)33.36 E F0(2)294.56 E F1(*)72
451.2 Q F0(2)437 E F1 71.12(1J)72 469.2 S(an 1)-71.12 E(New Y)67.78 E
-2.23(ear ')-1.29 F 2.78(sD)-.37 G(ay)-2.78 E F0(22)199.95 E F1 62.78
(20 Jan)72 481.2 R 59.44(20 Martin)2.78 F(Luther King Day)2.78 E F0(22)
158.29 E F1 62.78(48 Feb)72 493.2 R 60.73(17 President')2.78 F 2.78(sD)
-.37 G(ay)-2.78 E F0(22)200.33 E F1 57.22(146 May)72 505.2 R 57.22
(26 Memorial)2.78 F(Day)2.78 E F0(22)205.33 E F1 57.22(185 Jul)72 517.2
R 70.19(4I)2.78 G(ndependence Day)-70.19 E F0(22)187.38 E F1 57.22
(244 Sep)72 529.2 R 68.89(1L)2.78 G(abor Day)-68.89 E F0(22)222.53 E F1
57.22(286 Oct)72 541.2 R 61.66(13 Columbus)2.78 F(Day)2.78 E F0(22)
203.28 E F1 57.22(315 Nov)72 553.2 R 61.28 -.74(11 V)2.78 H(eteran')-.55
E 2.78(sD)-.37 G(ay)-2.78 E F0(22)209.39 E F1 57.22(331 Nov)72 565.2 R
59.06(27 Thanksgiving)2.78 F F0(22)207.73 E F1 57.22(359 Dec)72 577.2 R
60.74(25 Christmas)2.78 F(Day)2.78 E F0(22)201.81 E 77 616.9 72 616.9 DL
78.47 616.9 73.47 616.9 DL 83.47 616.9 78.47 616.9 DL 88.47 616.9 83.47
616.9 DL 93.47 616.9 88.47 616.9 DL 98.47 616.9 93.47 616.9 DL 103.47
616.9 98.47 616.9 DL 108.47 616.9 103.47 616.9 DL 113.47 616.9 108.47
616.9 DL 118.47 616.9 113.47 616.9 DL 123.47 616.9 118.47 616.9 DL
128.47 616.9 123.47 616.9 DL 133.47 616.9 128.47 616.9 DL 138.47 616.9
133.47 616.9 DL 143.47 616.9 138.47 616.9 DL 148.47 616.9 143.47 616.9
DL 153.47 616.9 148.47 616.9 DL 158.47 616.9 153.47 616.9 DL 163.47
616.9 158.47 616.9 DL 168.47 616.9 163.47 616.9 DL 173.47 616.9 168.47
616.9 DL 178.47 616.9 173.47 616.9 DL 183.47 616.9 178.47 616.9 DL
188.47 616.9 183.47 616.9 DL 193.47 616.9 188.47 616.9 DL 198.47 616.9
193.47 616.9 DL 203.47 616.9 198.47 616.9 DL 208.47 616.9 203.47 616.9
DL 213.47 616.9 208.47 616.9 DL 218.47 616.9 213.47 616.9 DL 223.47
616.9 218.47 616.9 DL 228.47 616.9 223.47 616.9 DL 233.47 616.9 228.47
616.9 DL 238.47 616.9 233.47 616.9 DL 243.47 616.9 238.47 616.9 DL
248.47 616.9 243.47 616.9 DL 253.47 616.9 248.47 616.9 DL 258.47 616.9
253.47 616.9 DL 263.47 616.9 258.47 616.9 DL 268.47 616.9 263.47 616.9
DL 273.47 616.9 268.47 616.9 DL 278.47 616.9 273.47 616.9 DL 283.47
616.9 278.47 616.9 DL 288.47 616.9 283.47 616.9 DL 293.47 616.9 288.47
616.9 DL(Example of the resource group \214le for fair share)72 614.4 Q
(2)220.53 E F1(#)72 638.4 Q F0(2)436.44 E F1 2.78(#t)72 650.4 S
(he groups "root" and "unknown" are added by the scheduler)-2.78 E F0(2)
157.15 E F1 2.78(#A)72 662.4 S
(ll the parents must be added for the children.)-2.78 E
(This is why all the groups)5.56 E F0(2)95.4 E F1 2.78(#a)72 674.4 S
(re added \214rst.)-2.78 E
(The cresgrp numbers the users have are their UIDs)5.56 E F0(2)124.86 E
F1(#)72 686.4 Q F0(2)436.44 E F1 2.78(#n)72 710.4 S 38.7(ame resgrp)
-2.78 F(child resgrp)46.13 E(shares)20.03 E F0(2)187.39 E 316.59
(38 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Page: 39 43
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Scheduling)260.88 E/F1 10/Courier@0 SF 50(grp1 50)72 84 R 64(root 10)50
F F0(22)194 E F1 50(grp2 51)72 96 R 64(root 20)50 F F0(22)194 E F1 50
(grp3 52)72 108 R 64(root 10)50 F F0(22)194 E F1 50(grp4 53)72 120 R 64
(grp1 20)50 F F0(22)194 E F1 50(grp5 54)72 132 R 64(grp1 10)50 F F0(22)
194 E F1 50(grp6 55)72 144 R 64(grp2 20)50 F F0(22)194 E F1 50(usr1 60)
72 156 R 64(root 5)50 F F0(22)200 E F1 50(usr2 61)72 168 R 64(grp1 10)50
F F0(22)194 E F1 50(usr3 62)72 180 R 64(grp2 10)50 F F0(22)194 E F1 50
(usr4 63)72 192 R 64(grp6 10)50 F F0(22)194 E F1 50(usr5 64)72 204 R 64
(grp6 10)50 F F0(22)194 E F1 50(usr6 65)72 216 R 64(grp6 20)50 F F0(22)
194 E F1 50(usr7 66)72 228 R 64(grp3 10)50 F F0(22)194 E F1 50(usr8 67)
72 240 R 64(grp4 10)50 F F0(22)194 E F1 50(usr9 68)72 252 R 64(grp4 10)
50 F F0(22)194 E F1 44(usr10 69 grp5)72 264 R(10)70 E F0(22)194 E .4 LW
77 303.7 72 303.7 DL 77.54 303.7 72.54 303.7 DL 82.54 303.7 77.54 303.7
DL 87.54 303.7 82.54 303.7 DL 92.54 303.7 87.54 303.7 DL 97.54 303.7
92.54 303.7 DL 102.54 303.7 97.54 303.7 DL 107.54 303.7 102.54 303.7 DL
112.54 303.7 107.54 303.7 DL 117.54 303.7 112.54 303.7 DL 122.54 303.7
117.54 303.7 DL 127.54 303.7 122.54 303.7 DL 132.54 303.7 127.54 303.7
DL 137.54 303.7 132.54 303.7 DL 142.54 303.7 137.54 303.7 DL 147.54
303.7 142.54 303.7 DL 152.54 303.7 147.54 303.7 DL 157.54 303.7 152.54
303.7 DL 162.54 303.7 157.54 303.7 DL 167.54 303.7 162.54 303.7 DL
172.54 303.7 167.54 303.7 DL 177.54 303.7 172.54 303.7 DL 182.54 303.7
177.54 303.7 DL 187.54 303.7 182.54 303.7 DL 192.54 303.7 187.54 303.7
DL 197.54 303.7 192.54 303.7 DL 202.54 303.7 197.54 303.7 DL 207.54
303.7 202.54 303.7 DL 212.54 303.7 207.54 303.7 DL 217.54 303.7 212.54
303.7 DL 222.54 303.7 217.54 303.7 DL 227.54 303.7 222.54 303.7 DL
232.54 303.7 227.54 303.7 DL 237.54 303.7 232.54 303.7 DL 242.54 303.7
237.54 303.7 DL 247.54 303.7 242.54 303.7 DL 252.54 303.7 247.54 303.7
DL 257.54 303.7 252.54 303.7 DL 262.54 303.7 257.54 303.7 DL 267.54
303.7 262.54 303.7 DL 272.54 303.7 267.54 303.7 DL 277.54 303.7 272.54
303.7 DL(Example of strict priority resource group \214le)72 301.2 Q(2)
236.46 E/F2 10/NewCenturySchlbk-Italic@0 SF 2.78(#t)72 325.2 S
(his is a strict priority resource group \214le.)-2.78 E
(These are people who should)5.56 E F0(2)107.47 E F2 2.78(#g)72 337.2 S
(et priority over everyone else.)-2.78 E
(The amount of shares is the priority of)5.56 E F0(2)116.15 E F2 2.78
(#t)72 349.2 S(he user)-2.78 E(.)-1.29 E F0(2)395.89 E F1 56(sally 1000)
72 379.2 R 64(root 4)50 F F0(22)176 E F1 56(larry 1001)72 391.2 R 64
(root 6)50 F F0(22)176 E F1 44(manager 1010 root)72 403.2 R(100)70 E F0
(22)164 E F1 74(vp 1016)72 415.2 R 64(root 500)50 F F0(22)164 E F1 68
(ceo 2000)72 427.2 R 64(root 10000)50 F F0(22)152 E 77 466.9 72 466.9 DL
78.12 466.9 73.12 466.9 DL 83.12 466.9 78.12 466.9 DL 88.12 466.9 83.12
466.9 DL 93.12 466.9 88.12 466.9 DL 98.12 466.9 93.12 466.9 DL 103.12
466.9 98.12 466.9 DL 108.12 466.9 103.12 466.9 DL 113.12 466.9 108.12
466.9 DL 118.12 466.9 113.12 466.9 DL 123.12 466.9 118.12 466.9 DL
128.12 466.9 123.12 466.9 DL 133.12 466.9 128.12 466.9 DL 138.12 466.9
133.12 466.9 DL 143.12 466.9 138.12 466.9 DL 148.12 466.9 143.12 466.9
DL 153.12 466.9 148.12 466.9 DL 158.12 466.9 153.12 466.9 DL 163.12
466.9 158.12 466.9 DL 168.12 466.9 163.12 466.9 DL 173.12 466.9 168.12
466.9 DL 178.12 466.9 173.12 466.9 DL 183.12 466.9 178.12 466.9 DL
188.12 466.9 183.12 466.9 DL(Example of dedicated \214le)72 464.4 Q(2)
325.88 E F2 2.78(#F)72 488.4 S(ormat:)-2.78 E F0(2)396.62 E F2 19.44(#F)
72 500.4 S 85.38(ROM TO)-19.44 F F0(2)282.91 E F2 2.78(#M)72 512.4 S
(M/DD/YYYY HH:MM)-2.78 E(MM/DD/YYYY HH:MM)22.24 E F0(2)181.3 E F1 24
(04/10/1998 15:30 04/11/1998 23:50)72 530.4 R F0(22)172 E F1 24
(05/15/1998 05:15 05/15/1998 08:30)72 542.4 R F0(22)172 E F1 24
(06/10/1998 23:25 06/10/1998 23:50)72 554.4 R F0(22)172 E/F3 10
/NewCenturySchlbk-Bold@0 SF 2.87(3.6. Scheduling)72 588 R
(and File Staging)2.87 E F0(2)272.47 E 4.012(Ad)72 603.6 S 1.232(ecisio\
n must be made about when to begin to stage in \214les for a job. The \
\214les must be)-4.012 F(9)10 E .025(available before the job executes.)
72 615.6 R .026
(The amount of time that will be required to copy the \214les is)5.586 F
(9)10 E .169(unknown to PBS, that being a function of \214le size and n\
etwork speed.)72 627.6 R .168(If \214le in-staging is not)5.729 F(9)10 E
1.144(started until the job has been selected to run when the other req\
uired resources are avail-)72 639.6 R(9)10 E .747
(able, either those resources are `)72 651.6 R(`wasted')-.18 E 3.527('w)
-.18 G .746(hile the stage in occurs, or another job is started)-3.527 F
(9)10 E .344(which takes the resources away from the \214rst job, and m\
ight prevent it from running.)72 663.6 R .344(If the)5.904 F(9)10 E .004
(\214les are staged in well before the job is otherwise ready to run, t\
he \214les may take up valuable)72 675.6 R(9)10 E
(disk space need by running jobs.)72 687.6 Q(9)292.17 E .766(PBS provid\
es two ways that \214le in-staging can be initiated for a job.)72 703.2
R .766(If a run request is re-)6.326 F(9)10 E .388(ceived for a job wit\
h a requirement for staging-in \214les, the staging in operation is beg\
un and)72 715.2 R(9)10 E .518(when completed, the job is run.)72 727.2 R
(Or)6.078 E 3.298(,as)-.74 G .518
(peci\214c stage-in request may be received for a job, see)-3.298 F(9)10
E(Chapt Revision: 1.173)72 768 Q(39)319.37 E EP
%%Page: 40 44
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 258.1(Scheduling PBS)72 48 R
(Administrator Guide)2.78 E .437(pbs_stagein\(3B\), in which case the \
\214les are staged in but the job is not run.)72 84 R .437
(When the job is)5.997 F(9)10 E(run, it begins execution immediately be\
cause the \214les are already there.)72 96 Q(9)108.81 E .658(In either \
case, if the \214les could not be staged-in for any reason, the job is \
placed into a wait)72 111.6 R(9)10 E .805(state with a `)72 123.6 R .805
(`execute at')-.18 F 3.585('t)-.18 G .805
(ime 30 minutes, in the future.)-3.585 F 3.584(Am)9.144 G .804
(ail message is sent to the job)-3.584 F(9)10 E 1.166
(owner requesting that s/he look into the problem.)72 135.6 R 1.166
(The reason the job is changed into wait)6.726 F(9)10 E 1.212(state is \
to prevent the scheduler from constantly retrying the same job which li\
kely would)72 147.6 R(9)10 E(keep on failing.)72 159.6 Q(9)371.06 E .746
(Figure 5.0 in appendix B of the ERS shows the \(sub\)state changes for\
 a job involving \214le in)72 175.2 R(9)10 E 2.936(staging. The)72 187.2
R .155(scheduler may note the substate of the job and chose to perform \
pre-staging via)2.936 F(9)10 E 1.075(the pbs_stagein\(\) call.)72 199.2
R 1.075
(The substate will also indicate completeness or failure of the opera-)
6.635 F(9)10 E 4.172(tion. The)72 211.2 R 1.391(scheduler developer sho\
uld carefully chose a stage in approach based on factors)4.172 F(9)10 E
(such as the likely source of the \214les, network speed, and disk capa\
city)72 223.2 Q(.)-1.11 E/F1 10/NewCenturySchlbk-Bold@0 SF(4.)72 262.8 Q
/F2 12/NewCenturySchlbk-Bold@0 SF(GUI System Administrator Notes)5.74 E
F0(Currently)72 278.4 Q 2.78(,P)-1.11 G
(BS provides two GUIs: xpbs and xpbsmon.)-2.78 E F1 2.87(4.1. xpbs)72
302.4 R(xpbs)72 318 Q F0(provides a user)2.78 E
(-friendly point-and-click interface to the PBS commands.)-.18 E 3.277
(The system administrator can specify a global resources \214le,)72 330
R/F3 10/NewCenturySchlbk-Italic@0 SF(${PBS_LIB}/xpbs/xpbsrc)6.057 E F0
(,)A .797(which is read by the GUI if a personal)72 342 R F3(.xpbsrc)
3.577 E F0 .797(\214le is missing.)3.577 F .796
(Keep in mind that within an)6.356 F .295(Xresources \214le \(Tk only\)\
, later entries take precedence. For example, suppose in your)72 354 R
F3(.xpbsrc)3.076 E F0(\214le, the following entries appear in order:)72
366 Q(xpbsrc*backgroundColor: blue)72 390 Q(*backgroundColor: green)72
402 Q 1.219(The later entry "green" will take precedence even though th\
e \214rst one is more precise and)72 426 R(longer matching.)72 438 Q
.216(The things that can be set in the personal preferences \214le are \
fonts, colors, and favorite serv-)72 453.6 R(er host\(s\) to query)72
465.6 Q(.)-1.11 E F1 2.87(4.2. xpbsmon)72 489.6 R(xpbsmon)72 505.2 Q F0
.353(is the node monitoring GUI for PBS. It is used for displaying grap\
hically informa-)3.133 F .041(tion about execution hosts in a PBS envir\
onment. Its view of a PBS environment consists of a)72 517.2 R 1.191(li\
st of sites where each site runs one or more servers, and each server r\
uns jobs on one or)72 529.2 R(more execution hosts \(nodes\).)72 541.2 Q
.986(The system administrator needs to de\214ne the sites information i\
n a global X resources \214le,)72 556.8 R F3($PBS_LIB/xpbsmon/xpbsmonrc)
72 568.8 Q F0 4.126(,w)C 1.346(hich is read by the GUI if a personal)
-4.126 F F3(.xpbsmonrc)4.126 E F0 1.345(\214le is)4.125 F 2.137(missing\
. A default xpbsmonrc \214le usually would have been created already up\
on install,)72 580.8 R .39(de\214ning \(under *sitesInfo resource\) a d\
efault site name, list of servers that run on a site, set)72 592.8 R
1.305(of nodes \(or execution hosts\) where jobs on a particular server\
 run, and the list of queries)72 604.8 R 1.348
(that are communicated to each node')72 616.8 R(s)-.37 E F1(pbs_mom)
4.128 E F0 6.908(.I)C 4.128(fn)-6.908 G 1.347
(ode queries have been speci\214ed, the)-4.128 F .778(host where xpbsmo\
n is running must have been given explicit permission by the)72 628.8 R
F1(pbs_mom)3.558 E F0 .812(daemon to post queries to it.)72 640.8 R .811
(This is done by including a)6.371 F/F4 10/Courier@0 SF($restricted)
3.591 E F0 .811(entry in the Mom')3.591 F(s)-.37 E(con\214g \214le.)72
652.8 Q(See chapter 2.5 for more information on the restricted entry)
5.56 E(.)-1.11 E .995(It is not recommended to manually update the *sit\
esInfo value in the xpbsmonrc \214le as its)72 668.4 R 1.178(syntax is \
quite cumbersome. The recommended procedure is to bring up xpbsmon, cli\
ck on)72 680.4 R 1.206
("Pref.." button, manipulate the widgets in the Sites, Server)72 692.4 R
3.986(,a)-.74 G 1.206(nd Query T)-3.986 F 1.207(able dialog boxes,)-.62
F .028(then click "Close" button and save the settings to a)72 704.4 R
F3(.xpbsmonrc)2.808 E F0 .027(\214le. Then copy this \214le over to)
2.808 F F3($PBS_LIB/xpbsmon)72 716.4 Q F0(.)A 316.59(40 Chapt)72 768 R
(Revision: 1.173)2.78 E EP
%%Page: 41 45
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Operation)265.69 E/F1 10/NewCenturySchlbk-Bold@0 SF(5.)72 84 Q/F2 12
/NewCenturySchlbk-Bold@0 SF(Operational Issues)5.74 E F0
(This chapter addresses a few of the `)72 99.6 Q(`day to day')-.18 E
2.78('o)-.18 G(perational issues which will arise.)-2.78 E F1 2.87
(5.1. Security)72 123.6 R F0
(There are three parts to security in the batch system:)72 139.2 Q
(Internal security)72 154.8 Q(Can the daemons be trusted?)97 166.8 Q
(Authentication)72 182.4 Q(How do we believe a client about who it is.)
97 194.4 Q(Authorization)72 210 Q
(Is the client entitled to have the requested action performed.)97 222 Q
F1 2.87(5.1.1. Internal)72 249.6 R(Security)2.87 E F0 .411(An effort ha\
s been made to insure the various PBS daemon themselves cannot be a tar\
get of)72 265.2 R .66(opportunity in an attack on the system.)72 277.2 R
.66(The two major parts of this effort is the security of)6.22 F(\214le\
s used by the daemons and the security of the daemons environment.)72
289.2 Q .576(Any \214le used by PBS, especially \214les that specify co\
n\214guration or other programs to be run,)72 304.8 R .016
(must be secure.)72 316.8 R .015(The \214les must be owned by root and \
in general cannot be writable by anyone)5.576 F 1.044(other than root.)
72 328.8 R 1.044(When PBS directories are installed, the make \214le ru\
ns a program to vali-)6.604 F 2.575
(date ownership and access to the \214les.)72 340.8 R 2.574
(This can be rechecked at any time by running)8.135 F/F3 10/Courier@0 SF
(check-tree)72 352.8 Q F0 .353(in the top level make \214le.)3.133 F
.354(check-tree is located in the directory give by the val-)5.914 F
.948(ue of bindir in con\214gure.)72 364.8 R .947
(Each daemon also validates the most critical \214les and directories)
6.507 F(each time it is started.)72 376.8 Q 3.111(Ac)72 392.4 S .332
(orrupted environment is another source of attach on a system.)-3.111 F
2.172 -.92(To p)5.892 H .332(revent this type of at-).92 F .088
(tach, each daemon resets its own environment when it starts.)72 404.4 R
.088(The source of the environment)5.648 F .354(is a \214le named by PB\
S_ENVIRON set by the con\214gure option --set-environ.)72 416.4 R .355
(If it does not al-)5.915 F .481
(ready exists, this \214le is created during the install process.)72
428.4 R .481(It should be edited to include the)6.041 F 1.616
(minimum set of variables required on your system.)72 440.4 R 1.616
(Please note that one variable,)7.176 F F1 -1.94 -.74(PA T)4.397 H(H).74
E F0 2.123(must be included.)72 452.4 R 2.122(The value of P)7.682 F
-.55(AT)-.74 G 4.902(Hi).55 G 4.902(np)-4.902 G(bs_mom')-4.902 E 4.902
(se)-.37 G 2.122(nvironment, from this \214le, will be)-4.902 F 1.312
(passed on to batch jobs.)72 464.4 R 3.153 -.92(To m)6.872 H 1.313
(aintain security).92 F 4.093(,i)-1.11 G 4.093(ti)-4.093 G 4.093(si)
-4.093 G 1.313(mportant that $P)-4.093 F -.55(AT)-.74 G 4.093(Hb).55 G
4.093(er)-4.093 G 1.313(estricted to)-4.093 F .483
(known, safe directories.)72 476.4 R .483(Do not include "." in P)6.043
F -.55(AT)-.74 G 3.263(H. Another).55 F .483
(variable which can be danger)3.263 F(-)-.18 E
(ous and should not be set is IFS.)72 488.4 Q
(The syntax of the PBS_ENVIRON \214le is either)72 504 Q F3
(variable_name=value)108 516 Q F0(or)72 528 Q F3(variable_name)108 540 Q
F0 .143(In the later case, the value for the variable is obtained from \
the daemons environment before)72 552 R(it is reset.)72 564 Q 1.429
(Other variables for the job')72 579.6 R 4.208(se)-.37 G 1.428
(nvironment may also be obtained from MOM')-4.208 F 4.208(se)-.37 G
(nvironment,)-4.208 E .179(this list varies by system.)72 591.6 R .179
(If you are interested, see the list in the variable)5.739 F/F4 10
/NewCenturySchlbk-Italic@0 SF(obtain_vnames)2.959 E F0(in)4.625 E
(the source code of src/resmom/*/mom_start.c.)72 603.6 Q F1 2.87
(5.1.2. Host)72 627.6 R(Authentication)2.87 E F0 .418
(PBS uses a combination of a information to authenticate a host.)72
643.2 R .418(If a request is made from a)5.978 F .957(client whose sock\
et is bound to a privileged port \(less than 1024, which requires root \
privi-)72 655.2 R .589(lege\), PBS \(right or wrong\) believes the IP \
\(Internet Protocol\) network layer as to whom the)72 667.2 R .006
(host is.)72 679.2 R .006(If the client request is from a non-privilege\
d port, the name of the host which is mak-)5.566 F .296(ing a client re\
quest must be included in the credential included with the request and \
it must)72 691.2 R(match the IP network layer opinion as to the host')72
703.2 Q 2.78(si)-.37 G(dentity)-2.78 E(.)-1.11 E(Chapt Revision: 1.173)
72 768 Q(41)319.37 E EP
%%Page: 42 46
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 262.91(Operation PBS)72 48 R
(Administrator Guide)2.78 E/F1 10/NewCenturySchlbk-Bold@0 SF 2.87
(5.1.3. Host)72 84 R(Authorization)2.87 E F0 1.742(Access to the pbs_se\
rver from another system may be controlled by an access control list)72
99.6 R 5.56(\(ACL\). See)72 111.6 R
(section 10.1.1 of the ERS for details.)2.78 E .843(Access to pbs_mom i\
s controlled through a list of hosts speci\214ed in their con\214gurati\
on \214les.)72 127.2 R .831(By default, only `)72 139.2 R(`localhost')
-.18 E 3.611('a)-.18 G .832
(nd the name returned by gethostname\(2\) are allowed.)-3.611 F .832
(See the)6.392 F(man pages pbs_mom\(8B\) for more information on the co\
n\214guration \214le.)72 151.2 Q(Access to the pbs_sched is not limited\
 other than it must be from a privileged port.)72 166.8 Q F1 2.87
(5.1.4. User)72 190.8 R(Authentication)2.87 E/F2 10
/NewCenturySchlbk-Italic@0 SF(Is the user who he/she claims to be?)72
206.4 Q F0 1.277(The PBS server authenticates the user name included in\
 a request with the supplied PBS)72 222 R 2.78(credential. This)72 234 R
(credential is supplied by)2.78 E F1(pbs_iff)2.78 E F0
(\(1B\), see section 10.2 of the ERS.)A F1 2.87(5.1.5. User)72 258 R
(Authorization)2.87 E F2(Is the user entitled to make the request of th\
e server job under that name?)72 273.6 Q F0 .253(PBS as shipped assumes\
 a consistent user name space within the set of systems which make)72
289.2 R .926(up a PBS cluster)72 301.2 R 6.486(.T)-.74 G .926
(hus if a job is submitted by)-6.486 F F2(UserA@hostA)3.706 E F0 3.706
(,P)1.666 G .925(BS will allow the job to be)-3.706 F 1.689
(deleted or altered by)72 313.2 R F2(UserA@hostB)4.47 E F0 7.25(.T)1.666
G 1.69(he routine)-7.25 F F2(site_map_user)4.47 E F0 1.69
(\(\) is called twice.)1.666 F 1.69(Once to)7.25 F .278(map the name of\
 the requester and again to map the job owner to a name on the server)72
325.2 R 1.017 -.37('s \().55 H(lo-).37 E .118(cal\) system.)72 337.2 R
.119
(If the two mapping agree, the requester is considered the job owner)
5.678 F 5.679(.S)-.74 G .119(ee section)-5.679 F 1.394
(10.1.3 of the ERS.)72 349.2 R 1.393
(This behavior may be changed by a site by altering the server routine)
6.953 F(site_map_user\(\) found in the \214le src/server/site_map_user)
72 361.2 Q(.c, see the Internal Design Spec.)-.74 E F2
(Is the user entitled to execute the job under that name?)72 376.8 Q F0
3.351(Au)72 392.4 S .571(ser may supply a name under which the job is t\
o executed on a certain system.)-3.351 F .571(If one is)6.131 F .881(no\
t supplied, the name of the job owner is chosen to be the execution nam\
e.)72 404.4 R .88(See the)6.44 F F2 .88(-u us-)3.66 F(er_list)72 416.4 Q
F0 .668(option of the)5.114 F F1(qsub)3.448 E F0 .668(\(1B\) command.)B
.668(Authorization to execute the job under the chosen)6.228 F
(name is granted under the following conditions:)72 428.4 Q 13.88
(1. The)72 444 R .167(job was submitted on the server)2.947 F .907 -.37
('s \().55 H .167(local\) host and the submitter).37 F .906 -.37('s n)
.55 H .166(ame is the same).37 F(as the selected execution name.)97 456
Q 13.88(2. The)72 471.6 R .762(host from which the job was submitted ar\
e declared trusted by the execution host)3.542 F .392(in the /etc/hosts\
.equiv \214le or the submitting host and submitting user)97 483.6 R
1.131 -.37('s n).55 H .391(ame are listed).37 F .983
(in the execution users' .rhosts \214le.)97 495.6 R .984
(The system supplied library function,)6.544 F F2(ruserok)3.764 E F0
.984(\(\), is)1.666 F(used to make these checks.)97 507.6 Q 2.524
(If the above are not satisfactory to a site, the routine)72 523.2 R F2
(site_check_user_map)5.304 E F0 2.523(\(\) in the \214le)1.666 F
(src/server/site_check_u.c may be modi\214ed.)72 535.2 Q
(See the IDS for more information.)5.56 E .092(In addition to the above\
 checks, access to a PBS server and queues within that server may be)72
550.8 R .228(controlled by)72 562.8 R .228(access control lists.)5.788 F
.228(See section 10.1.1 and 10.1.2 of the ERS for more informa-)5.788 F
(tion.)72 574.8 Q F1 2.87(5.1.6. Group)72 598.8 R(Authorization)2.87 E
F0 .574(PBS allows a user to submit jobs and specify under which group \
the job should be executed.)72 614.4 R .925(The user speci\214es a)72
626.4 R F2(group_list)3.705 E F0 .924
(attribute for the job which contains a list of)5.371 F/F3 10/Courier@0
SF(groups@hosts)3.704 E F0 .685(similar to the user list.)72 638.4 R
.685(See the)6.245 F F1(group_list)3.465 E F0 .686
(attribute under the -W option of qsub\(1B\).)3.465 F(The)6.246 E(PBS S\
erver will ensure that the user is a member of the speci\214ed group by)
72 650.4 Q 13.88(1. Checking)72 666 R 1.01(if the group is the user)3.79
F 1.749 -.37('s p).55 H 1.009(rimary group in the password entry).37 F
6.569(.I)-1.11 G 3.789(nt)-6.569 G 1.009(his case)-3.789 F(the user)97
678 Q .74 -.37('s n).55 H
(ame does not have to appear in the group entry for his primary group.)
.37 E 13.88(2. Checking)72 693.6 R(for the user)2.78 E .74 -.37('s n).55
H(ame in the speci\214ed group entry in /etc/group.).37 E .128
(The job will be aborted if both checks fail.)72 709.2 R .129
(The checks are skipped if the user does not supply)5.688 F 3.864(ag)72
721.2 S 1.084(roup list attribute.)-3.864 F 1.083(In this case the user)
6.643 F 1.823 -.37('s p).55 H 1.083
(rimary group from the password \214le will be).37 F 316.59(42 Chapt)72
768 R(Revision: 1.173)2.78 E EP
%%Page: 43 47
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Operation)265.69 E(used.)72 84 Q .761(When staging \214les in or out, \
PBS also uses the selected execution group for the copy opera-)72 99.6 R
3.568(tion. This)72 111.6 R .788
(provides normal Unix access security to the \214les.)3.568 F .788
(Since all group information is)9.128 F .039(passed as a string of char\
acters, PBS cannot determine if a numeric string is intended to be a)72
123.6 R(group name or gid.)72 135.6 Q 1.934
(Therefore when a group list is speci\214ed by the user)72 151.2 R 4.714
(,P)-.74 G 1.934(BS places one requirement on the)-4.714 F(0)10 E .967
(groups within a system.)72 163.2 R .968
(Each and every group in which a user might execute a job MUST)6.527 F
(0)10 E .613(have a group name and an entry in /etc/group.)72 175.2 R
.613(If no group lists are ever used, PBS will use)6.173 F(0)10 E 1.075
(the login group and will accept it even if the group is not listed in \
/etc/group.)72 187.2 R 1.076(Note in this)6.636 F(0)10 E .498(case, the)
72 199.2 R/F1 10/NewCenturySchlbk-Bold@0 SF(egroup)3.278 E F0 .498
(attribute value is a numeric string representing the user)3.278 F 1.238
-.37('s g).55 H .497(id rather than).37 F(0)10 E(the group `)72 211.2 Q
(`name')-.18 E('.)-.18 E F1 2.87(5.1.7. Root)72 235.2 R(Owned Jobs)2.87
E F0 .183(The server will reject any job which would execute under the \
UID of zero unless the owner of)72 250.8 R(the job, typically root this\
 or some other system, is listed in the server attribute)72 262.8 Q F1
(acl_roots)2.78 E F0(.)A F1 2.87(5.2. Job)72 286.8 R
(Prologue/Epilogue Scripts)2.87 E F0 .493(PBS provides the ability to r\
un a site supplied script before and/or after each job runs.)72 302.4 R
(This)6.052 E 1.107(provides the capability to perform initialization o\
r cleanup of resources, such as temporary)72 314.4 R .608
(directories or scratch \214les.)72 326.4 R .608
(The scripts may also be used to write `)6.168 F(`banners')-.18 E 3.387
('o)-.18 G 3.387(nt)-3.387 G .607(he job')-3.387 F 3.387(so)-.37 G(ut-)
-3.387 E(put \214les.)72 338.4 Q .847
(If a script is not present, MOM continues in a normal manner)72 354 R
6.407(.I)-.74 G 3.627(fp)-6.407 G .847(resent, the script is run)-3.627
F(with root privilege.)72 366 Q
(In order to be run, the script must adhere to the following rules:)5.56
E 8.94<8354>72 381.6 S .972(he script must be in the)-8.94 F/F2 10
/NewCenturySchlbk-Italic@0 SF(\(pbs_home\))3.752 E/F3 10/Courier@0 SF
(/mom_priv)A F0 .971(directory with the name)3.752 F F3(prologue)3.751 E
F0(for)3.751 E .797(the script to be run before the job and the name)87
393.6 R F3(epilogue)3.577 E F0 .798(for the script to be run after)3.577
F(the job.)87 405.6 Q 8.94<8354>72 421.2 S
(he script must be owned by root.)-8.94 E 8.94<8354>72 436.8 S
(he script must be readable and executable by root.)-8.94 E 8.94<8354>72
452.4 S(he script cannot be writable by anyone but root.)-8.94 E .871
(The script may be a shell script or an executable object \214le.)72 468
R -.52(Ty)6.431 G(pically).52 E 3.651(,as)-1.11 G .871
(hell script should)-3.651 F(start with a line of the form:)72 480 Q F3
(#! interpreter)2.78 E F0(.)A
(See the rules under execve\(2\) or exec\(2\) on your system.)74.78 492
Q F1 2.87(5.2.1. Prologue)72 516 R(and Epilogue Arguments)2.87 E F0
(When invoked, the prologue is called with the following arguments:)72
531.6 Q 14.26(argv[1] is)72 547.2 R(the job id.)2.78 E 14.26(argv[2] is)
72 562.8 R(the user name under which the job executes.)2.78 E 14.26
(argv[3] is)72 578.4 R(the group name under which the job executes.)2.78
E(The epilogue is called with the above, plus:)72 594 Q 14.26
(argv[4] is)72 609.6 R(the job name.)2.78 E 14.26(argv[5] is)72 625.2 R
(the session id. \207)2.78 E 14.26(argv[6] is)72 640.8 R
(the requested resource limits \(list\). \207)2.78 E 14.26(argv[7] is)72
656.4 R(the list of resources used.)2.78 E 14.26(argv[8] is)72 672 R
(the name of the queue in which the job resides. \207)2.78 E 14.26
(argv[9] is)72 687.6 R(the account string, if one exists. \207)2.78 E
.32 LW 76 697.6 72 697.6 DL 80 697.6 76 697.6 DL 84 697.6 80 697.6 DL 88
697.6 84 697.6 DL 92 697.6 88 697.6 DL 96 697.6 92 697.6 DL 100 697.6 96
697.6 DL 104 697.6 100 697.6 DL 108 697.6 104 697.6 DL 112 697.6 108
697.6 DL 116 697.6 112 697.6 DL 120 697.6 116 697.6 DL 124 697.6 120
697.6 DL 128 697.6 124 697.6 DL 132 697.6 128 697.6 DL 136 697.6 132
697.6 DL 140 697.6 136 697.6 DL 144 697.6 140 697.6 DL/F4 8
/NewCenturySchlbk-Roman@0 SF 4.448<8754>82 709.4 S .124(he PBS developm\
ent group reserves the right in a future release to remove certain of t\
he arguments)-4.448 F(passed to the Epilogue which could be obtained wi\
th in the script by calling qstat\(1B\) or pbs_statjob\(3B\).)72 719.4 Q
F0(Chapt Revision: 1.173)72 768 Q(43)319.37 E EP
%%Page: 44 48
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 262.91(Operation PBS)72 48 R
(Administrator Guide)2.78 E(For both the prologue and epilogue:)72 84 Q
25(envp The)72 99.6 R(environment passed to the script is null.)2.78 E
29.26(cwd The)72 115.2 R(current working directory is the user)2.78 E
.74 -.37('s h).55 H(ome directory).37 E(.)-1.11 E 22.22(input When)72
130.8 R .382(invoked, both scripts have standard input connected to a s\
ystem dependent)3.162 F 3.998(\214le. For)122 142.8 R 1.218
(all systems execute the SP)3.998 F 3.999(,t)-1.29 G 1.219
(his is /dev/null.)-3.999 F 1.219(For the SP)6.779 F 3.999(,t)-1.29 G
1.219(he \214le is the)-3.999 F
(host \214le containing the list of nodes assigned to the job.)122 154.8
Q 16.48(output W)72 170.4 R .211(ith one exception, the standard output\
 and standard error of the scripts are con-)-.37 F .355(nected to the \
\214les which contain the standard output and error of the job.)122
182.4 R .355(If a job)5.915 F .339(is an interactive PBS job, the stand\
ard output and error of the epilogue is pointed)122 194.4 R .395(to /de\
v/null because the pseudo terminal connection used was released by the \
sys-)122 206.4 R(tem when the job terminated.)122 218.4 Q/F1 10
/NewCenturySchlbk-Bold@0 SF 2.87(5.2.2. Prologue)72 242.4 R(Epilogue T)
2.87 E(ime Out)-.25 E F0 2.454 -.92(To p)72 258 T .613(revent a bad scr\
ipt or error condition within the script from delaying PBS, MOM places)
.92 F 1.772(an alarm around the scripts execution.)72 270 R 1.773
(This is currently set to 30 seconds.)7.333 F 1.773(If the alarm)7.333 F
.648
(sounds before the scripts has terminated, MOM will kill the script.)72
282 R .648(The alarm value can be)6.208 F
(changed by changing the de\214ne of within src/resmom/prolog.c.)72 294
Q F1 2.87(5.2.3. Prologue)72 318 R(Error Processing)2.87 E F0(Normally)
72 333.6 Q 3.041(,t)-1.11 G .262
(he prologue script should exit with a zero exit status.)-3.041 F .262
(MOM will record in her log)5.822 F
(any case of a non-zero exit from a script.)72 345.6 Q
(Exit status values and their impact on the job are:)5.56 E 13.33
(-4 The)72 361.2 R(script timed out \(took too long\).)2.78 E
(The job will be requeued.)5.56 E 13.33(-3 The)72 376.8 R .257
(wait\(2\) call waiting for the script to exit returned with an error)
3.037 F 5.816(.T)-.74 G .256(he job will be re-)-5.816 F(queued.)97
388.8 Q 13.33(-2 The)72 404.4 R
(input \214le to be passed to the script could not be opened.)2.78 E
(The job will be requeued.)5.56 E 13.33(-1 The)72 420 R .931
(script has a permission error)3.711 F 3.712(,i)-.74 G 3.712(ti)-3.712 G
3.712(sn)-3.712 G .932(ot owned by root and or is writable by others)
-3.712 F(than root.)97 432 Q(The job will be requeued.)5.56 E 19.44(0T)
72 447.6 S(he script was successful.)-19.44 E(The job will run.)8.34 E
19.44(1T)72 463.2 S
(he script returned an exit value of 1, the job will be aborted.)-19.44
E 10.6(>1 The)72 478.8 R
(script returned a value greater than one, the job will be requeued.)
2.78 E .907(The above apply to normal batch jobs.)72 494.4 R .906
(Note, interactive-batch jobs \(-I option\) cannot be re-)6.466 F .134(\
queued on a non-zero status, the network connection back to qsub is los\
t and cannot be re-es-)72 506.4 R 2.78(tablished. Interactive)72 518.4 R
(jobs will be aborted on any non-zero prologue exit.)2.78 E 1.847(The a\
dministrator must exercise great caution in setting up the prologue to \
prevent jobs)72 542.4 R(from being \215ushed from the system.)72 554.4 Q
.289(Epilogue script exit values are logged, if non-zero, but have no i\
mpact on the state of the job.)72 570 R F1 2.87(5.3. Use)72 594 R
(and Maintenance of Logs)2.87 E F0 1.488
(The PBS system tends to produce lots of log \214le entries.)72 609.6 R
1.487(There are two types of logs, the)7.048 F 4.034
(event logs which record events within each PBS daemon \(pbs_server)72
621.6 R 6.815(,p)-.74 G 4.035(bs_mom, and)-6.815 F
(pbs_sched\) and the Server)72 633.6 Q .74 -.37('s a).55 H
(ccounting log.).37 E F1 2.87(5.3.1. The)72 657.6 R(Daemon Logs)2.87 E
F0 4.573(Each PBS daemon maintains an event log \214le.)72 673.2 R 4.572
(The Server \(pbs_server\), Scheduler)10.133 F 1.44(\(pbs_sched\), and \
MOM \(pbs_mom\) default their logs to a \214le with the current date as\
 the)72 685.2 R .853(name in the PBS_HOME/\(daemon\)_logs directory)72
697.2 R 6.413(.T)-1.11 G .853(his location can be overridden with the)
-6.413 F("-L pathname" option; pathname must be an absolute path.)72
709.2 Q 316.59(44 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Page: 45 49
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Operation)265.69 E .326(If the default log \214le name is used, no -L \
option, the log will be closed and reopened with the)72 84 R .226
(current date daily)72 96 R 5.786(.T)-1.11 G .226
(his happens on the \214rst message after midnight.)-5.786 F .225
(If a path is given with)5.785 F .252
(the -L option, the automatic close/reopen does not take place.)72 108 R
.253(All daemons will close and re-)8.593 F .137
(open the same named log \214le on receipt of SIGHUP)72 120 R 5.697(.T)
-1.29 G .137(he pid of the daemon is available in its)-5.697 F .531
(lock \214le in its home directory)72 132 R 6.091(.T)-1.11 G .531
(hus it is possible to move the current log \214le to a new name)-6.091
F(and send SIGHUP to restart the \214le:)72 144 Q/F1 10/Courier@0 SF
(cd PBS_HOME/daemon_logs)108 156 Q(mv current archive)108 168 Q
(kill -HUP `cat ../daemon_priv/daemon.lock`)108 180 Q F0 .911(The amoun\
t of output in the logs depends on the selected events to log and the p\
resence of)72 195.6 R(0)10 E .339
(debug writes, turned on by compiling with -DDEBUG.)72 207.6 R .34
(The server and MOM can be directed)5.899 F .622
(to record only messages pertaining to certain event types.)72 219.6 R
.621(The speci\214ed events are logically)6.181 F -.18(``)72 231.6 S(or)
.18 E(-ed')-.18 E 2.78('. Their)-.18 F(decimal values are:)2.78 E 19.44
(1E)72 247.2 S(rror Events)-19.44 E 19.44(2B)72 262.8 S
(atch System/Server Events)-19.44 E 19.44(4A)72 278.4 S
(dministration Events)-19.44 E 19.44(8J)72 294 S(ob Events)-19.44 E 11.1
(16 Job)72 309.6 R(Resource Usage \(hex value 0x10\))2.78 E 11.1
(32 Security)72 325.2 R -.44(Vi)2.78 G(olations \(hex value 0x20\)).44 E
11.1(64 Scheduler)72 340.8 R(Calls \(hex value 0x40\))2.78 E 5.54
(128 Debug)72 356.4 R(Messages \(hex value 0x80\))2.78 E 5.54(256 Extra)
72 372 R(Debug Messages \(hex value 0x100\))2.78 E(0)226.6 E .23
(Everything turned on is of course 51)72 387.6 R 3.01(1. 127)-.55 F .23
(is a good value to use.)3.01 F .23(The event logging mask is)5.79 F(0)
10 E .195(controlled differently for the server and MOM.)72 399.6 R .195
(The server)5.755 F .935 -.37('s m).55 H .195
(ask is set via qmgr\(1B\) setting).37 F(0)10 E(the)72 411.6 Q/F2 10
/NewCenturySchlbk-Bold@0 SF(log_events)3.698 E F0 6.478(attribute. This)
3.698 F .918(can be done at any time.)3.698 F(MOM')6.478 E 3.698(sm)-.37
G .918(ask may be set via her)-3.698 F(0)10 E .358
(con\214guration \214le with a)72 423.6 R F1($logevent)3.138 E F0(entry)
3.138 E 3.138(,s)-1.11 G .358(ee the -c option on pbs_mom.)-3.138 F
2.198 -.92(To c)5.918 H .358(hange her log-).92 F(0)10 E(ging mask, edi\
t the con\214guration \214le and send MOM a SIGHUP signal.)72 435.6 Q(0)
112.14 E .669(The scheduler)72 451.2 R 3.449(,b)-.74 G .669(eing site w\
ritten may have a different method of changing its event logging)-3.449
F(0)10 E(mask, or it may not have the ability at all.)72 463.2 Q F2 2.87
(5.3.2. The)72 487.2 R(Accounting Log)2.87 E F0 .735
(The PBS Server daemon maintains an accounting log.)72 502.8 R .734
(The format of the log is described in)6.295 F 2.467
(chapter 3 of the ERS.)72 514.8 R 2.467(The log name defaults to)8.027 F
F1(\(pbs_home\)/server_priv/account-)5.247 E(ing/yyyymmdd)72 526.8 Q F0
1.169(where yyyymmdd is the date.)3.95 F 1.169
(The accounting may be placed elsewhere by)6.729 F 1.305
(specifying the -A option on the pbs_server command line.)72 538.8 R
1.305(The option argument is the full)6.865 F
(\(absolute\) path name of the \214le to be used.)72 550.8 Q
(If a null string is given, for example)5.56 E F1(pbs_server -A "")108
562.8 Q F0(then the accounting log will not be opened and no accounting\
 records will be recorded.)72 574.8 Q .181(If the default \214le is use\
d, named for the date, the \214le will be closed and a new one opened e\
v-)72 590.4 R .469(ery day at midnight.)72 602.4 R .469(If the server r\
eceives a SIGHUP signal, it will close the accounting log)6.029 F .659
(and reopen it.)72 614.4 R .659(This allows you to rename the old log a\
nd start recording anew on an empty)6.219 F 4.897(\214le. For)72 626.4 R
2.118(example, if the server was started on February 1, it will be writ\
ing in the \214le)4.897 F F1(19960201)72 638.4 Q F0 6.454(.I)C 3.674(ft)
-6.454 G .894(he current date is February 9, then the following actions\
 will cause the cur)-3.674 F(-)-.18 E 3.015
(rent accounting \214le to be renamed)72 650.4 R F1(feb1)5.796 E F0
5.796(,t)C 3.016(he server to close 032 and starting writing)-5.796 F F1
(19960209)72 662.4 Q F0(.)A F1(mv 19960201 feb1)108 674.4 Q
(kill -HUP 1234)108 686.4 Q(\(the server's pid\))30 E F0
(Chapt Revision: 1.173)72 768 Q(45)319.37 E EP
%%Page: 46 50
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 262.91(Operation PBS)72 48 R
(Administrator Guide)2.78 E/F1 10/NewCenturySchlbk-Bold@0 SF 2.87
(5.4. Problem)72 84 R(Solving)2.87 E F0(The following is a very incompl\
ete list of possible problems and how to solve them.)72 99.6 Q F1 2.87
(5.4.1. Clients)72 123.6 R(Unable to Contact Server)2.87 E F0 .55
(If a client command, qstat, qmgr)72 139.2 R 3.33(,.)-.74 G .55
(.., is unable to connect to a server there are several possi-)-3.33 F
.036(bilities to check.)72 151.2 R .036(If the error return is 15034, `)
5.596 F .036(`No server to connect to')-.18 F .036
(', check \(1\) that there is)-.18 F 1.888(indeed a server running and \
\(2\) that the default server information is set correctly)72 163.2 R
7.447(.T)-1.11 G(he)-7.447 E .156(client commands will attempt to conne\
ct to the server speci\214ed on the command line if given,)72 175.2 R
.724(or if not given, the server speci\214ed in the `)72 187.2 R .724
(`default server \214le')-.18 F 3.504('s)-.18 G .724
(peci\214ed when the commands)-3.504 F(where built and installed.)72
199.2 Q .234(If the error return is 15007, `)72 214.8 R .234
(`No permission')-.18 F .234(', check for \(2\) as above.)-.18 F .234
(Also check that the exe-)5.794 F(cutable)72 226.8 Q/F2 10
/NewCenturySchlbk-Italic@0 SF(pbs_iff)2.863 E F0 .083(is located in the\
 search path for the client and that it is setuid root.)4.529 F
(Addition-)5.642 E(ally)72 238.8 Q 2.78(,t)-1.11 G
(ry running pbs_iff by typing:)-2.78 E/F3 10/Courier@0 SF
(pbs_iff server_host 15000)108 250.8 Q F0(Where)72 262.8 Q F3
(server_host)3.836 E F0 1.057
(is the name of the host on which the server is running and)3.836 F F3
(15000)3.837 E F0(is)3.837 E .41(the port to which the server is listen\
ing \(if built with a different port number)72 274.8 R 3.19(,u)-.74 G
.41(se that num-)-3.19 F .34(ber instead of 15000\).)72 286.8 R .341(pb\
s_iff should print out a string of garbage characters and exit with a)
5.9 F .18(status of 0.)72 298.8 R .179(The garbage is the encrypted cre\
dential which would be used by the command to)5.74 F .642
(authenticate the client to the server)72 310.8 R 6.202(.I)-.74 G 3.422
(fp)-6.202 G .643(bs_iff fails to print the garbage and/or exits with a)
-3.422 F .293(non-zero status, either the server is not running or was \
built with a different encryption sys-)72 322.8 R(tem than was pbs_iff.)
72 334.8 Q F1 2.87(5.4.2. Non)72 358.8 R(Delivery of Output)2.87 E F0
2.238(If the output of a job cannot be delivered to the user)72 374.4 R
5.018(,i)-.74 G 5.019(ti)-5.018 G 5.019(ss)-5.019 G 2.239
(aved in a special directory)-5.019 F(,)-1.11 E .607
(\(pbs_home\)/undelivered, and mail is sent to the user)72 386.4 R 6.167
(.T)-.74 G .607(he typical causes of non-delivery are)-6.167 F .987(\(1\
\) destination host is not trusted and the user does not have a .rhost \
\214le, \(2\) An improper)72 398.4 R .343(path was speci\214ed, \(3\) a\
 directory is not writable, and \(4\) the user)72 410.4 R 1.082 -.37
('s .).55 H .342(cshrc on the destination).37 F 1.532
(host generates output when executed.)72 422.4 R 1.532
(This are explained fully in the section `)7.092 F 1.533(`Delivery of)
-.18 F(Output Files')72 434.4 Q 2.78('i)-.18 G 2.78(nt)-2.78 G
(he next chapter)-2.78 E(.)-.74 E F1 2.87(5.4.3. Job)72 458.4 R
(Cannot be Executed)2.87 E F0 .799
(If a user receives a mail message containing a job id and the line `)72
474 R .798(`Job cannot be executed')-.18 F(',)-.18 E .504
(the job was aborted by MOM when she tried to place it into execution.)
72 486 R .504(The complete reason)6.064 F
(can be found in one of two places, MOM')72 498 Q 2.78(sl)-.37 G
(og \214le or the standard error \214le of the user)-2.78 E .74 -.37
('s j).55 H(ob.).37 E .585(If the second line of the message is `)72
513.6 R .585(`See Administrator for help')-.18 F .585
(', then MOM aborted the job)-.18 F 1.079(before the job')72 525.6 R
3.859<738c>-.37 G 1.079(les were set up.)-3.859 F 1.079
(The reason will be noted in MOM')9.419 F 3.86(sl)-.37 G 3.86(og. T)
-3.86 F 1.08(ypical reasons)-.52 F(are a bad user/group account, checkp\
oint/restart \214le \(Cray\), or a system error)72 537.6 Q(.)-.74 E .584
(If the second line of the message is `)72 553.2 R .583
(`See job standard error \214le')-.18 F .583
(', then MOM had created the)-.18 F(job')72 565.2 Q 3.156<738c>-.37 G
.376(le and additional messages were written to standard error)-3.156 F
5.937(.T)-.74 G .377(his is typically the result)-5.937 F
(of a bad resource request.)72 577.2 Q F1 2.87(5.4.4. Running)72 601.2 R
(Jobs with No Active Processes)2.87 E F0 .982(On very rare occasions, P\
BS may be in a situation where a job is in the Running state but)72
616.8 R(0)10 E .284(has no active processes.)72 628.8 R .284
(This should never happen as the death of the job')5.844 F 3.065(ss)-.37
G .285(hell should trig-)-3.065 F(0)10 E .41(ger Mom to notify the serv\
er that the job exited and end of job processing should begin.)72 640.8
R 7.22(The 0)5.97 F
(fact that it happens even rarely means there is a bug in PBS \()72
652.8 Q F2(gasp! Oh the horror of it all.)A F0 18.09(\). 0)B 1.046
(If this situation is noted, PBS offers a way out.)72 668.4 R 1.047
(Use the qsig command to send SIGNULL,)6.606 F(0)10 E .201
(signal 0, to the job.)72 680.4 R .2(If Mom notes there are not any pro\
cesses then she will force the job into)8.541 F(0)10 E
(the exiting state.)72 692.4 Q 316.59(46 Chapt)72 768 R(Revision: 1.173)
2.78 E EP
%%Page: 47 51
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Operation)265.69 E/F1 10/NewCenturySchlbk-Bold@0 SF 2.87
(5.5. Communication)72 84 R(with the User)2.87 E F0 1.05
(Users tend to want to know what is happening to their job.)72 99.6 R
1.05(PBS provides a special job at-)6.61 F(tribute,)72 111.6 Q/F2 10
/NewCenturySchlbk-Italic@0 SF(comment)4.564 E F0 4.564(,w)1.666 G 1.784
(hich is available to the operator)-4.564 F 4.564(,m)-.74 G(anager)
-4.564 E 4.563(,o)-.74 G 4.563(rt)-4.563 G 1.783(he scheduler program.)
-4.563 F .208(This attribute can be set to a string to pass information\
 to the job owner)72 123.6 R 5.769(.I)-.74 G 2.989(tm)-5.769 G .209
(ight be used to)-2.989 F .622(display information about why the job is\
 not being run or why a hold was placed on the job.)72 135.6 R .043(Use\
rs are able to see this attribute when it is set by using the -f option\
 of the qstat command.)72 147.6 R 4.18(As)72 159.6 S 1.399(cheduler pro\
gram can set the comment attribute via the pbs_alterjob\(\) API.)-4.18 F
(Operators)6.959 E
(and managers may use the -W option of the qalter command, for example)
72 171.6 Q/F3 10/Courier@0 SF(qalter -W comment="some text" job_id)108
183.6 Q F1(6.)72 207.6 Q/F4 12/NewCenturySchlbk-Bold@0 SF
(Advice for Users)5.74 E F0 .098(The following sections provide informa\
tion necessary to the general user community concern-)72 223.2 R
(ing use of PBS.)72 235.2 Q(Please make this information available.)5.56
E F1 2.87(6.1. Modi\214cation)72 259.2 R
(of User shell initialization \214les)2.87 E F0 4.098(Au)72 274.8 S
-2.23(ser ')-4.098 F 4.098(sj)-.37 G 1.318(ob may not run if the user)
-4.098 F 2.057 -.37('s s).55 H 1.317
(tart-up \214les \(.cshrc, .login, or .pro\214le\) contain com-).37 F
.121(mands which attempt to set terminal characteristics.)72 286.8 R
.122(Any such activity should be skipped by)5.682 F .147
(placing a test of the environment variable)72 298.8 R F1
(PBS_ENVIRONMENT)2.926 E F0 .146(\(or for NQS compatibility)2.926 F(,)
-1.11 E F1(ENVIRONMENT)72 310.8 Q F0 2.78(\). This)B
(can be done as shown in the following sample .login:)2.78 E F3
(setenv PRINTER printer_1)108 322.8 Q
(setenv MANPATH /usr/man:/usr/local/man:/usr/new/man)108 334.8 Q
(if \( ! $?PBS_ENVIRONMENT \) then)108 346.8 Q(do terminal stuff here)
133 358.8 Q(endif)108 370.8 Q F1 2.87(6.2. Shell)72 394.8 R(Invocation)
2.87 E F0 1.175(When PBS starts a job, it invokes the user)72 410.4 R
1.915 -.37('s l).55 H 1.175
(ogin shell \(unless the user submitted the job).37 F .079
(with the -S option\).)72 422.4 R .078(PBS passes the job script which \
is a shell script to the login in one of two)5.639 F
(ways depending on how PBS was installed.)72 434.4 Q
(Script as Standard Input)97 450 Q 1.465(The standard method for PBS \(\
built with SHELL_INVOKE = 0\), is to open the)122 462 R 5.009
(script \214le as standard input for the shell.)122 474 R 5.008
(This is equivalent to typing)10.568 F F3(shell < script)122 486 Q F0
5.56(.T)C(his offers advantages and disadvantages:)-5.56 E 8.94(+T)122
501.6 S(he user)-8.94 E .74 -.37('s s).55 H
(cript will always be directly processed by the user).37 E .74 -.37
('s l).55 H(ogin shell.).37 E 8.94(+I)122 517.2 S 3.203(ft)-8.94 G .423
(he user speci\214es a non-standard shell \(any old program\) with the \
-S option,)-3.203 F
(the script can be read by that program as its input.)137 529.2 Q 11.67
(-I)122 544.8 S 4.641(fac)-11.67 G 1.861
(ommand within the job script reads from standard input, it may read)
-4.641 F .551(lines from the script depending on how far ahead the shel\
l has buffered its in-)137 556.8 R 3.277(put. Any)137 568.8 R .496
(command line so read will not be executed by the shell.)3.277 F 3.276
(Ac)6.056 G(ommand)-3.276 E 1.51(that reads from standard input with ou\
t explicit redirection is generally un-)137 580.8 R
(wise in a batch job.)137 592.8 Q(Name of Script on Standard Input)97
608.4 Q 2.203(The alternative method \(PBS built with SHELL_INVOKE = 1\
\), is to pass the)122 620.4 R .241
(name of the job script to the shell program.)122 632.4 R .242
(This is equivalent to typing the script)5.801 F .894
(name as a command to an interactive shell.)122 644.4 R .894
(Since this is the only line passed to)6.454 F .349
(the script, standard input will be empty to any commands.)122 656.4 R
.35(This approach also of-)5.909 F
(fers both advantages and disadvantages:)122 668.4 Q 8.94(+A)122 684 S
.214(ny command which reads from standard input without redirection wil\
l get an)-8.94 F(EOF)137 696 Q(.)-1.11 E 8.94(+T)122 711.6 S .971(he sh\
ell syntax can vary from script to script, it does not have to match th\
e)-8.94 F 1.12(syntax for the user)137 723.6 R 1.86 -.37('s l).55 H 1.12
(ogin shell.).37 F 1.12(The \214rst line of the script, even before any)
9.46 F(Chapt Revision: 1.173)72 768 Q(47)319.37 E EP
%%Page: 48 52
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 278.66(Advice PBS)72 48 R
(Administrator Guide)2.78 E .318(#PBS directives, should be)137 84 R/F1
10/Courier@0 SF(#!/shell)3.098 E F0(where)3.098 E F1(shell)3.098 E F0
.319(is the full path to the shell)3.098 F .933
(of choice, /bin/sh, /bin/csh, ...)137 96 R .932
(The login shell will interpret the #! line and in-)6.492 F
(voke that shell to process the script.)137 108 Q 11.67(-A)122 123.6 S
2.78(ne)-11.67 G(xtra shell process is run to process the job script.)
-2.78 E 11.67(-I)122 139.2 S 3.626(fan)-11.67 G .847(on-standard shell \
is used via the -S option, it will not receive the script,)-3.626 F
(but its name, on its standard input.)137 151.2 Q 1.365
(The choice if shell invocation methods is left to the site.)97 166.8 R
1.364(It is recommended that all)9.704 F .179(PBS execution servers \(p\
bs_mom\) within that site be built to use the same shell invoca-)97
178.8 R(tion method.)97 190.8 Q/F2 10/NewCenturySchlbk-Bold@0 SF 2.87
(6.3. Job)72 218.4 R(Exit Status)2.87 E F0 .745(The exit status of a jo\
b is normally the exit status of the shell executing the job script.)72
234 R .745(If a)6.305 F .85(user is using)72 246 R/F3 10
/NewCenturySchlbk-Italic@0 SF(csh)3.63 E F0 .85(and has a)5.296 F F3
(.login)3.63 E F0 .85(\214le in the home directory)5.296 F 3.631(,t)
-1.11 G .851(he exit status of csh becomes)-3.631 F .55
(the exit status of the last command in .logout.)72 258 R .549
(This may impact the use of job dependencies)6.109 F 1.059
(which depend on the job')72 270 R 3.839(se)-.37 G 1.059(xit status.)
-3.839 F 2.899 -.92(To p)6.619 H 1.059(reserve the job').92 F 3.84(ss)
-.37 G 1.06(tatus, the user may either re-)-3.84 F
(move .logout or add the following two lines to it.)72 282 Q
(Add as the \214rst line:)5.56 E F1(set EXITVAL = $status)96 294 Q F0
(and as the last executable line:)72 306 Q F1(exit $EXITVAL)96 318 Q F2
2.87(6.4. Delivery)72 342 R(of Output Files)2.87 E F0 .33
(PBS uses a version of the)72 357.6 R F2(rcp)3.11 E F0 .33
(\(1\) command,)B F2(pbs_rcp)3.11 E F0 .33
(\(1B\) to return output \214les to the user at)B 3.227(ar)72 369.6 S
.447(emote host after the user)-3.227 F 1.187 -.37('s j).55 H .447
(ob terminates.).37 F .447
(This version of rcp is based on the bsd 4.4 lite)6.007 F 1.968
(distribution rcp.)72 381.6 R 1.967(It is provided because it, unlike s\
ome rcp implementation, always exits)7.528 F 1.163
(with a non-zero exits status for any error)72 393.6 R 9.504(.T)-.74 G
1.164(hus pbs_mom knows if the \214le was not deliv-)-9.504 F 3.857
(ered. Note)72 405.6 R 1.076(that the secure copy program, scp, is also\
 based on this version of rcp and it is)3.857 F
(good about exit statuses.)72 417.6 Q(Using rcp, the copy of output or \
staged \214les can fail for \(at least\) two reasons.)72 433.2 Q 13.88
(1. If)72 448.8 R 1.293(the user)4.073 F 2.033 -.37('s .).55 H 1.293(cs\
hrc script outputs any characters to standard output, e.g. contains an)
.37 F .61(echo command,)97 460.8 R F2(pbs_rcp)3.39 E F0 .61(will fail.)
3.39 F .61(See the section in this document entitled)6.17 F F2
(Modi\214ca-)3.39 E(tion of User shell initialization \214les)97 472.8 Q
F0(.)A 13.88(2. The)72 488.4 R .054(user must have permission to)2.834 F
F3(rsh)2.834 E F0 .054(to the remote host.)4.5 F .054
(Output is delivered to the re-)5.614 F 1.433
(mote destination host with the remote \214le owner)97 500.4 R 2.172
-.37('s n).55 H 1.432(ame being the job owner).37 F 2.172 -.37('s n).55
H(ame).37 E .867(\(job submitter\).)97 512.4 R .868
(On the execution host, the \214le is owned by the user)6.427 F 1.608
-.37('s e).55 H .868(xecution name).37 F .227(which may be different.)97
524.4 R .226(For information, see the)5.786 F F1 .226(-u user_list)3.006
F F0 .226(option on the)3.006 F F2(qsub)3.006 E F0(\(1\))A(command.)97
536.4 Q .318(If the two names are identical, permission to rcp may be g\
ranted at the system level by)97 552 R
(an entry in the destination host')97 564 Q(s)-.37 E F3(/etc/host.equiv)
2.78 E F0(\214le calling out the execution host.)4.446 E 1.834(If the o\
wner name and the execution name are different or if the destination ho\
st')97 579.6 R(s)-.37 E .114(/etc/hosts.equiv \214le does not contain a\
n entry for the execution host, the user must have)97 591.6 R .563(an "\
.rhosts" \214le in her home directory of the system to which the output\
 \214les are being)97 603.6 R 3.517(returned. The)97 615.6 R .737
(.rhosts must contain an entry for the system on which the job executed)
3.517 F 1.373
(with the user name under under which the job was executed.)97 627.6 R
1.372(It is wise to have two)6.932 F
(lines, one with just the "base" host name and one with the full)97
639.6 Q F3(host.domain_name)2.78 E F0(.)1.666 E .945
(For delivery of output \214les on the local host, PBS uses the)72 655.2
R F2(/bin/cp)3.725 E F0 .945(\(1\) command.)B .945(Local and)6.505 F(re\
mote Delivery of output may fail for the following additional reasons:)
72 667.2 Q 13.88(1. A)72 682.8 R
(directory in the speci\214ed path does not exist.)2.78 E 13.88(2. A)72
698.4 R(directory in the speci\214ed path is not searchable by the user)
2.78 E(.)-.74 E 13.88(3. The)72 714 R
(target directory is not writable by the user)2.78 E(.)-.74 E 316.59
(48 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Page: 49 53
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF(PBS Administrator Guide)72 48 Q
(Advice)281.44 E 1.675(Additional information as to the cause of the de\
livery problem might be determined from)72 84 R(MOM')72 96 Q 6.268(sl)
-.37 G 3.488(og \214le.)-6.268 F 3.488(Each failure is logged.)9.048 F
3.489(The various error codes are described in re-)9.049 F
(quests.c/sys_copy\(\) in the IDS.)72 108 Q .439
(If PBS is built to use the)72 123.6 R/F1 10/NewCenturySchlbk-Italic@0
SF .439(Secure Copy Program)3.219 F F0 3.219(,s)C .439
(cp, then PBS will \214rst try to deliver output)-3.219 F .758
(or stage-in/out \214les using scp.)72 135.6 R .759
(If scp fails, PBS will try again using rcp [assuming that scp)9.099 F
.489(might not exist on the remote host].)72 147.6 R .489
(If rcp also \214les, the above cycle will be repeated after a)6.049 F
.129
(delay in case the problem is caused by a temporary network problem.)72
159.6 R .13(All failures are logged)8.47 F(in Mom')72 171.6 Q 2.78(sl)
-.37 G(og.)-2.78 E/F2 10/NewCenturySchlbk-Bold@0 SF 2.87(6.5. Stage)72
195.6 R(in and Stage out problems)2.87 E F0 1.264(The same requirements\
 and hints discussed above in regard to delivery of output apply to)72
211.2 R 1.29(staging \214les in and out.)72 223.2 R 1.29
(It may also be useful to note that the stage in and out option on)6.85
F(qsub both take the form)72 235.2 Q/F3 10/Courier@0 SF
(local_file@remote_host:remote_file)72 247.2 Q F0
(regardless of the direction of transfer)72 259.2 Q 5.56(.T)-.74 G
(hus for stage in, the direction of travel is)-5.56 E 2.78
(local_\214le <-- remote_host:remote_\214le)97 271.2 R
(and for stage out, the direction of travel is)72 283.2 Q 2.78
(local_\214le --> remote_host:remote_\214le)97 295.2 R 1.119
(Also note that all relative paths are relative to the user)72 307.2 R
1.858 -.37('s h).55 H 1.118(ome directory on the respective).37 F 4.912
(hosts. PBS)72 319.2 R 2.132(uses rcp \(or cp if the remote host is the\
 local host\) to perform the transfer)4.912 F(.)-.74 E
(Hence, a stage in is just a)72 331.2 Q
(rcp -r remote_host:remote_\214le local_\214le)97 343.2 Q
(and a stage out is just)72 355.2 Q
(rcp -r local_\214le remote_host:remote_\214le)97 367.2 Q .748
(As with rcp, the remote_\214le may be a directory name.)72 382.8 R .747
(Also as with rcp, the local_\214le speci-)6.307 F .3
(\214ed in the stage in/out directive may name a directory)72 394.8 R
5.86(.F)-1.11 G .3(or stage in, if remote_\214le is a direc-)-5.86 F
(tory)72 406.8 Q 2.919(,t)-1.11 G .139
(hen local \214le must also be a directory)-2.919 F 8.479(.F)-1.11 G
.139(or stage out, if local_\214le is a directory)-8.479 F 2.918(,t)
-1.11 G .138(hen re-)-2.918 F(mote_\214le must also be a directory)72
418.8 Q(.)-1.11 E .293(If local_\214le is directory on a stage out dire\
ctive, the local_\214le directory on the execution host,)72 434.4 R .771
(including all \214les and subdirectories, will be copied.)72 446.4 R
.77(At the end of the job, the directory)6.331 F 3.55(,i)-1.11 G(n-)
-3.55 E 1.407(cluding all \214les and subdirectories, will be deleted.)
72 458.4 R 1.407(Users should be aware that this may)9.747 F
(create a problem if multiple jobs are using the same directory)72 470.4
Q(.)-1.11 E 1.316(Stage in presents another problem.)72 486 R 1.315
(Assume the user wishes to stage in the contents of a)9.656 F
(single \214le named)72 498 Q F1(poo)2.78 E F0
(and gives the following stage in directive:)4.446 E F3
(-W stagein=/tmp/bear@somehost:poo)108 510 Q F0 .258
(If /tmp/bear is an existing directory)72 522 R 3.038(,t)-1.11 G .258
(he local \214le becomes /tmp/bear/poo.)-3.038 F .258
(When the job exits,)5.818 F 4.949(PBS will determind that)72 534 R F1
(/tmp/bear)7.729 E F0 4.948(is a directory and append)9.394 F F1(/poo)
7.728 E F0 4.948(to it.)9.394 F(Thus)10.508 E F1(/tmp/bear/poo)72 546 Q
F0 .583(will be deleted.)5.029 F .583(If however)6.143 F 3.363(,t)-.74 G
.584(he user wishes to stage in the contents of a di-)-3.363 F
(rectory named)72 558 Q F1(cat)2.78 E F0
(and gives the following stage in directive:)4.446 E F3
(-W stagein=/tmp/dog/newcat@somehost:cat)108 570 Q F0(where)72 582 Q F1
(/tmp/dog)6.785 E F0 4.004(is an existing directory)8.451 F 6.784(,t)
-1.11 G 4.004(hen at job end, PBS will determine that)-6.784 F F1
(/tmp/dog/newcat)72 594 Q F0 1.835(is a directory and append)6.28 F F1
(/cat)4.615 E F0 1.835(and then fail on the attempt to delete)6.281 F F1
(/tmp/dog/newcat/cat)72 606 Q F0(.)1.666 E .772
(On stage in when remote_\214le is directory)72 621.6 R 3.552(,t)-1.11 G
.772(he user should not specify a new directory as lo-)-3.552 F 2.78
(cal_name. In)72 633.6 R(the above case, the user should go with)2.78 E
F3(-W stagein=/tmp/dog@somehost:cat)108 645.6 Q F0(which will produce)72
657.6 Q F1(/tmp/dog/cat)2.78 E F0
(which will match what PBS will try to delete at job')4.446 E 2.78(se)
-.37 G(nd.)-2.78 E F2 2.87(6.6. Dependent)72 681.6 R(Jobs and T)2.87 E
(est Systems)-.92 E F0 .25(If you have users running on a test batch sy\
stem using an alternative port number)72 697.2 R 3.03(,-)-.74 G 3.03(po)
-3.03 G(ption)-3.03 E .31(to pbs_server)72 709.2 R 3.09(,p)-.74 G .309(\
roblems may occur with job dependency if the following requirements are\
 not)-3.09 F(observed:)72 721.2 Q(Chapt Revision: 1.173)72 768 Q(49)
319.37 E EP
%%Page: 50 54
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/NewCenturySchlbk-Roman@0 SF 278.66(Advice PBS)72 48 R
(Administrator Guide)2.78 E 13.88(1. For)72 84 R 3.316(at)3.316 G .536(\
est system, the job identi\214er in a dependency speci\214cation must i\
nclude at least)-3.316 F(the \214rst part of the host name.)97 96 Q
13.88(2. The)72 111.6 R 1.191(colon in the port number speci\214cation \
must be escaped by a black slash.)3.971 F 1.19(This is)6.75 F
(true for both the server and current server sections.)97 123.6 Q
(For example:)72 139.2 Q/F1 10/Courier@0 SF(123.test_host\\:17000)72
151.2 Q(123.old_host@test_host\\:17000)72 163.2 Q
(123.test_host\\:17000@diff_test_host\\:18000)72 175.2 Q F0 1.545
(On a shell line, the back slash itself)4.325 F
(must be escaped from the shell, so the above become:)72 187.2 Q F1
(123.test_host\\\\:17000)72 199.2 Q(123.old_host@test_host\\\\:17000)72
211.2 Q(123.test_host\\\\:17000@diff_test_host\\\\:18000)72 223.2 Q F0
1.278(These rules are not documented on the qsub/qalter man pages since\
 the likely hood of the)72 238.8 R .935(general user community \214ndin\
g themselves seting up dependencies with jobs on a test sys-)72 250.8 R
(tem is small and the inclusion would be generally confusing.)72 262.8 Q
316.59(50 Chapt)72 768 R(Revision: 1.173)2.78 E EP
%%Trailer
end
%%EOF
